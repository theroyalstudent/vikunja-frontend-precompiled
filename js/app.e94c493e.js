(function(t){function e(e){for(var s,r,o=e[0],c=e[1],l=e[2],u=0,h=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&h.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(e);while(h.length)h.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={app:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0ea7":function(t,e,a){},"1afa":function(t,e,a){"use strict";var s=a("bb12"),i=a.n(s);i.a},"1e59":function(t,e,a){},"28c3":function(t,e,a){},"2da9":function(t,e,a){"use strict";var s=a("97df"),i=a.n(s);i.a},"30cd":function(t,e,a){"use strict";var s=a("4c31"),i=a.n(s);i.a},"3c55":function(t,e,a){"use strict";var s=a("6613"),i=a.n(s);i.a},4565:function(t,e,a){"use strict";var s=a("e3aa"),i=a.n(s);i.a},4732:function(t,e,a){"use strict";var s=a("28c3"),i=a.n(s);i.a},"4ab6":function(t,e,a){"use strict";var s=a("dfcd"),i=a.n(s);i.a},"4c31":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.online?a("div",[a("div",{staticClass:"offline",staticStyle:{height:"0",width:"0"}}),t.userAuthenticated&&t.userInfo&&t.userInfo.type===t.authTypes.USER?a("nav",{staticClass:"navbar main-theme is-fixed-top",class:{"has-background":t.background},attrs:{role:"navigation","aria-label":"main navigation"}},[a("div",{staticClass:"navbar-brand"},[a("router-link",{staticClass:"navbar-item logo",attrs:{to:{name:"home"}}},[5===(new Date).getMonth()?a("img",{attrs:{src:"/images/logo-full-pride.svg",alt:"Vikunja"}}):a("img",{attrs:{src:"/images/logo-full.svg",alt:"Vikunja"}})]),a("a",{staticClass:"menu-show-button",class:{"is-visible":!t.menuActive},on:{click:function(e){t.menuActive=!0}}},[a("icon",{attrs:{icon:"bars"}})],1)],1),a("a",{staticClass:"menu-show-button",on:{click:function(e){t.menuActive=!0}}},[a("icon",{attrs:{icon:"bars"}})],1),t.currentList.id?a("div",{staticClass:"list-title"},[a("h1",{staticClass:"title",style:{opacity:""===t.currentList.title?"0":"1"}},[t._v(" "+t._s(""===t.currentList.title?"Loading...":t.currentList.title)+" ")]),a("router-link",{staticClass:"icon",attrs:{to:{name:"list.edit",params:{id:t.currentList.id}}}},[a("icon",{attrs:{icon:"cog",size:"2x"}})],1)],1):t._e(),a("div",{staticClass:"navbar-end"},[t.updateAvailable?a("div",{staticClass:"update-notification"},[a("p",[t._v("There is an update for Vikunja available!")]),a("a",{staticClass:"button is-primary noshadow",on:{click:function(e){return t.refreshApp()}}},[t._v("Update Now")])]):t._e(),a("div",{staticClass:"user"},[a("img",{staticClass:"avatar",attrs:{src:t.userInfo.getAvatarUrl(),alt:""}}),a("div",{staticClass:"dropdown is-right is-active"},[a("div",{staticClass:"dropdown-trigger"},[a("button",{staticClass:"button noshadow",on:{click:function(e){t.userMenuActive=!t.userMenuActive}}},[a("span",{staticClass:"username"},[t._v(t._s(t.userInfo.username))]),a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"chevron-down"}})],1)])]),a("transition",{attrs:{name:"fade"}},[t.userMenuActive?a("div",{staticClass:"dropdown-menu"},[a("div",{staticClass:"dropdown-content"},[a("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"user.settings"}}},[t._v(" Settings ")]),a("a",{staticClass:"dropdown-item",on:{click:function(e){return t.logout()}}},[t._v(" Logout ")])],1)]):t._e()])],1)])])]):t._e(),t.userAuthenticated&&t.userInfo&&t.userInfo.type===t.authTypes.USER?a("div",[t.menuActive?a("a",{staticClass:"menu-hide-button",on:{click:function(e){t.menuActive=!1}}},[a("icon",{attrs:{icon:"times"}})],1):t._e(),a("div",{staticClass:"app-container",class:{"has-background":t.background},style:{"background-image":"url("+t.background+")"}},[a("div",{staticClass:"namespace-container",class:{"is-active":t.menuActive}},[a("div",{staticClass:"menu top-menu"},[a("router-link",{staticClass:"logo",attrs:{to:{name:"home"}}},[a("img",{attrs:{src:"/images/logo-full.svg",alt:"Vikunja"}})]),a("ul",{staticClass:"menu-list"},[a("li",[a("router-link",{attrs:{to:{name:"home"}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"calendar"}})],1),t._v(" Overview ")])],1),a("li",[a("router-link",{attrs:{to:{name:"tasks.range",params:{type:"week"}}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"calendar-week"}})],1),t._v(" Next Week ")])],1),a("li",[a("router-link",{attrs:{to:{name:"tasks.range",params:{type:"month"}}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:["far","calendar-alt"]}})],1),t._v(" Next Month ")])],1),a("li",[a("router-link",{attrs:{to:{name:"teams.index"}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"users"}})],1),t._v(" Teams ")])],1),a("li",[a("router-link",{attrs:{to:{name:"namespaces.index"}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"layer-group"}})],1),t._v(" Namespaces & Lists ")])],1),a("li",[a("router-link",{attrs:{to:{name:"labels.index"}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"tags"}})],1),t._v(" Labels ")])],1)])],1),a("a",{staticClass:"collapse-menu-button",on:{click:function(e){t.menuActive=!1}}},[t._v("Collapse Menu")]),a("aside",{staticClass:"menu namespaces-lists"},[a("div",{staticClass:"spinner",class:{"is-loading":t.namespaceService.loading}}),t._l(t.namespaces,(function(e){return[a("div",{key:e.id},[e.id>0?a("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:"Settings",expression:"'Settings'",modifiers:{right:!0}}],staticClass:"nsettings",attrs:{to:{name:"namespace.edit",params:{id:e.id}}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"cog"}})],1)]):t._e(),e.id>0?a("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Add a new list in the "+e.title+" namespace",expression:"'Add a new list in the ' + n.title + ' namespace'"}],key:e.id+"list.create",staticClass:"nsettings",attrs:{to:{name:"list.create",params:{id:e.id}}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"plus"}})],1)]):t._e(),a("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.title+" ("+e.lists.length+")",expression:"n.title + ' (' + n.lists.length + ')'"}],staticClass:"menu-label",attrs:{for:e.id+"checker"}},[a("span",{staticClass:"name"},[""!==e.hexColor?a("span",{staticClass:"color-bubble",style:{backgroundColor:e.hexColor}}):t._e(),t._v(" "+t._s(e.title)+" ("+t._s(e.lists.length)+") ")])])],1),a("input",{key:e.id+"checker",staticClass:"checkinput",attrs:{type:"checkbox",checked:"checked",id:e.id+"checker"}}),a("div",{key:e.id+"child",staticClass:"more-container"},[a("ul",{staticClass:"menu-list can-be-hidden"},t._l(e.lists,(function(e){return a("li",{key:e.id},[a("router-link",{class:{"router-link-exact-active":t.currentList.id===e.id},attrs:{to:{name:"list.index",params:{listId:e.id}}}},[a("span",{staticClass:"name"},[""!==e.hexColor?a("span",{staticClass:"color-bubble",style:{backgroundColor:e.hexColor}}):t._e(),t._v(" "+t._s(e.title)+" ")])])],1)})),0),a("label",{staticClass:"hidden-hint",attrs:{for:e.id+"checker"}},[t._v(" Show hidden lists ("+t._s(e.lists.length)+")... ")])])]}))],2),a("a",{staticClass:"menu-bottom-link",attrs:{target:"_blank",href:"https://vikunja.io"}},[t._v("Powered by Vikunja")])]),a("div",{staticClass:"app-content",class:{"fullpage-overlay":t.fullpage,"is-menu-enabled":t.menuActive}},[t.menuActive?a("a",{staticClass:"mobile-overlay",on:{click:function(e){t.menuActive=!1}}}):t._e(),a("transition",{attrs:{name:"fade"}},[a("router-view")],1)],1)])]):t.userAuthenticated&&t.userInfo&&t.userInfo.type===t.authTypes.LINK_SHARE?a("div",{staticClass:"link-share-container",class:{"has-background":t.background},style:{"background-image":"url("+t.background+")"}},[a("div",{staticClass:"container has-text-centered link-share-view"},[a("div",{staticClass:"column is-10 is-offset-1"},[a("img",{staticClass:"logo",attrs:{src:"/images/logo-full.svg",alt:"Vikunja"}}),a("h1",{staticClass:"title",style:{opacity:""===t.currentList.title?"0":"1"}},[t._v(" "+t._s(""===t.currentList.title?"Loading...":t.currentList.title)+" ")]),a("div",{staticClass:"box has-text-left view"},[a("div",{staticClass:"logout"},[a("a",{staticClass:"button",on:{click:function(e){return t.logout()}}},[a("span",[t._v("Logout")]),a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"sign-out-alt"}})],1)])]),a("router-view")],1)])])]):a("div",[a("div",{staticClass:"noauth-container"},[a("img",{attrs:{src:"/images/logo-full.svg",alt:"Vikunja"}}),""!==t.motd?a("div",{staticClass:"message is-info"},[t._m(0),a("div",{staticClass:"message-body"},[t._v(" "+t._s(t.motd)+" ")])]):t._e(),a("router-view")],1)]),a("notification")],1):a("div",{staticClass:"app offline"},[t._m(1)])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-header"},[a("p",[t._v("Info")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"offline-message"},[a("h1",[t._v("You are offline.")]),a("p",[t._v("Please check your network connection and try again.")])])}],r=(a("4de4"),a("b0c0"),a("8c4f")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content has-text-centered"},[a("h2",[t._v("Hi "+t._s(t.userInfo.username)+"!")]),t.hasTasks?t._e():[a("p",[t._v("Click on a list or namespace on the left to get started.")]),t.migratorsEnabled?a("router-link",{staticClass:"button is-primary is-right noshadow is-outlined",attrs:{to:{name:"migrate.start"}}},[t._v(" Import your data into Vikunja ")]):t._e()],a("ShowTasks",{attrs:{"show-all":!0}})],2)},c=[],l=a("2f62"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showAll?a("h3",[t._v("Current tasks")]):a("h3",[t._v("Tasks from "+t._s(t.startDate.toLocaleDateString())+" until "+t._s(t.endDate.toLocaleDateString()))]),t.taskService.loading||t.hasUndoneTasks&&t.tasks?t._e():[a("h3",{staticClass:"nothing"},[t._v("Nothing to do - Have a nice day!")]),a("img",{attrs:{src:"/images/cool.svg",alt:""}})],a("div",{staticClass:"spinner",class:{"is-loading":t.taskService.loading}}),t.tasks&&t.tasks.length>0?a("div",{staticClass:"tasks"},t._l(t.tasks,(function(e){return a("div",{key:e.id,staticClass:"task"},[a("single-task-in-list",{attrs:{"the-task":e,"show-list":!0},on:{taskUpdated:t.updateTasks}})],1)})),0):t._e()],2)},u=[],h=(a("4160"),a("d81d"),a("a434"),a("a9e3"),a("b64b"),a("159b"),a("276c")),m=a("e954"),p=a("920b"),f=a("92a6"),v=(a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("fc11")),k=a("bc3a"),b=a.n(k),g=a("2ef0"),C=a("0122"),w=a("87ab"),y=a("a4d6");function _(t){if("object"!==Object(C["a"])(t))return t;var e={};for(var a in t)e[Object(w["a"])(a)]=t[a],null!==t[a]&&(Array.isArray(t[a])?e[Object(w["a"])(a)]=t[a].map((function(t){return _(t)})):"object"===Object(C["a"])(t[a])&&(e[Object(w["a"])(a)]=_(t[a])));return e}function T(t){if("object"!==Object(C["a"])(t))return t;var e={};for(var a in t)e[Object(y["a"])(a)]=t[a],null===t[a]||t[a]instanceof Date||(Array.isArray(t[a])?e[Object(y["a"])(a)]=t[a].map((function(t){return T(t)})):"object"===Object(C["a"])(t[a])&&(e[Object(y["a"])(a)]=T(t[a])));return e}var D=function(){function t(e){var a=this;Object(h["a"])(this,t),Object(v["a"])(this,"http",null),Object(v["a"])(this,"loading",!1),Object(v["a"])(this,"paths",{create:"",get:"",getAll:"",update:"",delete:""}),Object(v["a"])(this,"totalPages",0),Object(v["a"])(this,"resultCount",0),this.http=b.a.create({baseURL:window.API_URL,headers:{"Content-Type":"application/json"}});var s=this;this.http.interceptors.request.use((function(t){switch(t.method){case"post":a.useUpdateInterceptor()&&(t.data=s.beforeUpdate(t.data),t.data=JSON.stringify(T(t.data)));break;case"put":a.useCreateInterceptor()&&(t.data=s.beforeCreate(t.data),t.data=JSON.stringify(T(t.data)));break;case"delete":a.useDeleteInterceptor()&&(t.data=s.beforeDelete(t.data),t.data=JSON.stringify(T(t.data)));break}return t})),""!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&(this.http.defaults.headers.common["Authorization"]="Bearer "+localStorage.getItem("token")),this.paths={create:void 0!==e.create?e.create:"",get:void 0!==e.get?e.get:"",getAll:void 0!==e.getAll?e.getAll:"",update:void 0!==e.update?e.update:"",delete:void 0!==e.delete?e.delete:""}}return Object(m["a"])(t,[{key:"useCreateInterceptor",value:function(){return!0}},{key:"useUpdateInterceptor",value:function(){return!0}},{key:"useDeleteInterceptor",value:function(){return!0}},{key:"errorHandler",value:function(t){return Promise.reject(t)}},{key:"getRouteReplacements",value:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={},i=this.getRouteParameterPattern();for(i=new RegExp(i instanceof RegExp?i.source:i,"g");null!==(e=i.exec(t));)s[e[0]]=a[e[1]];return s}},{key:"getRouteParameterPattern",value:function(){return/{([^}]+)}/}},{key:"getReplacedRoute",value:function(t,e){var a=this.getRouteReplacements(t,e);return Object(g["reduce"])(a,(function(t,e,a){return Object(g["replace"])(t,a,e)}),t)}},{key:"setLoading",value:function(){var t=this,e=setTimeout((function(){t.loading=!0}),100);return function(){clearTimeout(e),t.loading=!1}}},{key:"modelFactory",value:function(t){return t}},{key:"modelGetFactory",value:function(t){return this.modelFactory(t)}},{key:"modelGetAllFactory",value:function(t){return this.modelFactory(t)}},{key:"modelCreateFactory",value:function(t){return this.modelFactory(t)}},{key:"modelUpdateFactory",value:function(t){return this.modelFactory(t)}},{key:"beforeGet",value:function(t){return t}},{key:"beforeCreate",value:function(t){return t}},{key:"beforeUpdate",value:function(t){return t}},{key:"beforeDelete",value:function(t){return t}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return""===this.paths.get?Promise.reject({message:"This model is not able to get data."}):this.getM(this.paths.get,t,e)}},{key:"getM",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.setLoading();a=this.beforeGet(a);var n=this.getReplacedRoute(t,a);return this.http.get(n,{params:s}).catch((function(t){return e.errorHandler(t)})).then((function(t){return Promise.resolve(e.modelGetFactory(t.data))})).finally((function(){i()}))}},{key:"getAll",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(""===this.paths.getAll)return Promise.reject({message:"This model is not able to get data."});a.page=s;var i=this.setLoading();e=this.beforeGet(e);var n=this.getReplacedRoute(this.paths.getAll,e);return this.http.get(n,{params:a}).catch((function(e){return t.errorHandler(e)})).then((function(e){return t.resultCount=Number(e.headers["x-pagination-result-count"]),t.totalPages=Number(e.headers["x-pagination-total-pages"]),Array.isArray(e.data)?Promise.resolve(e.data.map((function(e){return t.modelGetAllFactory(e)}))):null===e.data?Promise.resolve([]):Promise.resolve(t.modelGetAllFactory(e.data))})).finally((function(){i()}))}},{key:"create",value:function(t){var e=this;if(""===this.paths.create)return Promise.reject({message:"This model is not able to create data."});var a=this.setLoading(),s=this.getReplacedRoute(this.paths.create,t);return this.http.put(s,t).catch((function(t){return e.errorHandler(t)})).then((function(t){return Promise.resolve(e.modelCreateFactory(t.data))})).finally((function(){a()}))}},{key:"post",value:function(t,e){var a=this,s=this.setLoading();return this.http.post(t,e).catch((function(t){return a.errorHandler(t)})).then((function(t){return Promise.resolve(a.modelUpdateFactory(t.data))})).finally((function(){s()}))}},{key:"update",value:function(t){if(""===this.paths.update)return Promise.reject({message:"This model is not able to update data."});var e=this.getReplacedRoute(this.paths.update,t);return this.post(e,t)}},{key:"delete",value:function(t){var e=this;if(""===this.paths.delete)return Promise.reject({message:"This model is not able to delete data."});var a=this.setLoading(),s=this.getReplacedRoute(this.paths.delete,t);return this.http.delete(s,t).catch((function(t){return e.errorHandler(t)})).then((function(t){return Promise.resolve(t.data)})).finally((function(){a()}))}}]),t}(),x=(a("2ca0"),a("96cf"),a("c964")),I=a("2c4c"),S=function(){function t(e){Object(h["a"])(this,t),e=_(e),Object(g["defaults"])(this,Object(g["omitBy"])(e,g["isNil"]),this.defaults())}return Object(m["a"])(t,[{key:"defaults",value:function(){return{}}}]),t}(),O=(a("99af"),function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(t){var s;return Object(h["a"])(this,a),s=e.call(this,t),s.created=new Date(s.created),s.updated=new Date(s.updated),s}return Object(m["a"])(a,[{key:"defaults",value:function(){return{id:0,email:"",username:"",created:null,updated:null}}},{key:"getAvatarUrl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return"".concat(window.API_URL,"/").concat(this.username,"/avatar?size=").concat(t)}}]),a}(S)),j=function(t){if("#"===t||""===t)return!0;var e=parseInt(t.substring(1,7),16),a=e>>16&255,s=e>>8&255,i=e>>0&255,n=.2126*a+.7152*s+.0722*i;return n>128},A=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(t){var s;return Object(h["a"])(this,a),s=e.call(this,t),""===s.hexColor&&(s.hexColor="e8e8e8"),"#"!==s.hexColor.substring(0,1)&&(s.hexColor="#"+s.hexColor),s.textColor=j(s.hexColor)?"#4a4a4a":"#e5e5e5",s.createdBy=new O(s.createdBy),s.created=new Date(s.created),s.updated=new Date(s.updated),s}return Object(m["a"])(a,[{key:"defaults",value:function(){return{id:0,title:"",hexColor:"",description:"",createdBy:O,listId:0,textColor:"",created:null,updated:null}}}]),a}(S),E=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(t){var s;return Object(h["a"])(this,a),s=e.call(this,t),s.created=new Date(s.created),s}return Object(m["a"])(a,[{key:"defaults",value:function(){return{id:0,mime:"",name:"",size:"",created:null}}},{key:"getHumanSize",value:function(){var t={0:"B",1:"KB",2:"MB",3:"GB",4:"TB"},e=0,a=this.size;while(a>1024)a/=1024,e++;return Number(Math.round(a+"e2")+"e-2")+" "+t[e]}}]),a}(S),$=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(t){var s;return Object(h["a"])(this,a),s=e.call(this,t),s.createdBy=new O(s.createdBy),s.file=new E(s.file),s.created=new Date(s.created),s}return Object(m["a"])(a,[{key:"defaults",value:function(){return{id:0,taskId:0,file:E,createdBy:O,created:null}}}]),a}(S),P=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(t){var s;return Object(h["a"])(this,a),s=e.call(this,t),Object(v["a"])(Object(I["a"])(s),"defaultColor","198CFF"),s.id=Number(s.id),s.listId=Number(s.listId),s.dueDate=s.dueDate&&!s.dueDate.startsWith("0001")?new Date(s.dueDate):null,s.startDate=s.startDate&&!s.startDate.startsWith("0001")?new Date(s.startDate):null,s.endDate=s.endDate&&!s.endDate.startsWith("0001")?new Date(s.endDate):null,s.cancelScheduledNotifications().then((function(){s.reminderDates=s.reminderDates.map((function(t){return t=new Date(t),s.scheduleNotification(t),t})),s.reminderDates.push(null)})),s.parseRepeatAfter(),s.assignees=s.assignees.map((function(t){return new O(t)})),s.createdBy=new O(s.createdBy),s.labels=s.labels.map((function(t){return new A(t)})),""===s.hexColor&&(s.hexColor=s.defaultColor),"#"!==s.hexColor.substring(0,1)&&(s.hexColor="#"+s.hexColor),Object.keys(s.relatedTasks).forEach((function(t){s.relatedTasks[t]=s.relatedTasks[t].map((function(t){return new a(t)}))})),s.attachments=s.attachments.map((function(t){return new $(t)})),s.identifier==="-".concat(s.index)&&(s.identifier=""),s.created=new Date(s.created),s.updated=new Date(s.updated),s}return Object(m["a"])(a,[{key:"defaults",value:function(){return{id:0,text:"",description:"",done:!1,priority:0,labels:[],assignees:[],dueDate:0,startDate:0,endDate:0,repeatAfter:0,repeatFromCurrentDate:!1,reminderDates:[],parentTaskId:0,hexColor:"",percentDone:0,relatedTasks:{},attachments:[],identifier:"",index:0,createdBy:O,created:null,updated:null,listId:0}}},{key:"parseRepeatAfter",value:function(){var t=this.repeatAfter/60/60;if(this.repeatAfter={type:"hours",amount:t},t%24===0){var e=t/24;e%7===0?(this.repeatAfter.type="weeks",this.repeatAfter.amount=e/7):e%30===0?(this.repeatAfter.type="months",this.repeatAfter.amount=e/30):e%365===0?(this.repeatAfter.type="years",this.repeatAfter.amount=e/365):(this.repeatAfter.type="days",this.repeatAfter.amount=e)}}},{key:"cancelScheduledNotifications",value:function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("showTrigger"in Notification.prototype){t.next=3;break}return console.debug("This browser does not support triggered notifications"),t.abrupt("return");case 3:return t.next=5,navigator.serviceWorker.getRegistration();case 5:if(e=t.sent,"undefined"!==typeof e){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,e.getNotifications({tag:"vikunja-task-".concat(this.id),includeTriggered:!0});case 10:a=t.sent,console.debug("Already scheduled notifications:",a),a.forEach((function(t){return t.close()}));case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"scheduleNotification",value:function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(e){var a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e<new Date)){t.next=3;break}return console.debug("Date is in the past, not scheduling a notification. Date is ",e),t.abrupt("return");case 3:if("showTrigger"in Notification.prototype){t.next=6;break}return console.debug("This browser does not support triggered notifications"),t.abrupt("return");case 6:return t.next=8,navigator.permissions.request({name:"notifications"});case 8:if(a=t.sent,s=a.state,"granted"===s){t.next=13;break}return console.debug("Notification permission not granted, not showing notifications"),t.abrupt("return");case 13:return t.next=15,navigator.serviceWorker.getRegistration();case 15:if(i=t.sent,"undefined"!==typeof i){t.next=19;break}return console.error("No service worker registration available"),t.abrupt("return");case 19:i.showNotification("Vikunja Reminder",{tag:"vikunja-task-".concat(this.id),body:this.title,showTrigger:new TimestampTrigger(e),badge:"/images/icons/badge-monochrome.png",icon:"/images/icons/android-chrome-512x512.png",data:{taskId:this.id},actions:[{action:"mark-as-done",title:"Done"},{action:"show-task",title:"Show task"}]}).then((function(){console.debug("Notification scheduled for "+e)})).catch((function(t){console.debug("Error scheduling notification",t)}));case 20:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),a}(S),N=(a("3ca3"),a("ddb0"),a("2b3d"),a("737d")),L=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){var t;return Object(h["a"])(this,a),t=e.call(this,{create:"/tasks/{taskId}/attachments",getAll:"/tasks/{taskId}/attachments",delete:"/tasks/{taskId}/attachments/{id}"}),Object(v["a"])(Object(I["a"])(t),"uploadProgress",0),t}return Object(m["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(N["a"])(t.created),t}},{key:"useCreateInterceptor",value:function(){return!1}},{key:"modelFactory",value:function(t){return new $(t)}},{key:"modelCreateFactory",value:function(t){var e=this;return t.success=(null===t.success?[]:t.success).map((function(t){return e.modelFactory(t)})),t}},{key:"download",value:function(t){this.http({url:"/tasks/"+t.taskId+"/attachments/"+t.id,method:"GET",responseType:"blob"}).then((function(e){var a=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=a,s.setAttribute("download",t.file.name),s.click(),window.URL.revokeObjectURL(a)}))}},{key:"create",value:function(t,e){for(var a=this,s=new FormData,i=0;i<e.length;i++)s.append("files",new Blob([e[i]]),e[i].name);var n=this.setLoading();return this.http.put(this.getReplacedRoute(this.paths.create,t),s,{headers:{"Content-Type":"multipart/form-data; boundary="+s._boundary},onUploadProgress:function(t){a.uploadProgress=Math.round(100*t.loaded/t.total)}}).catch((function(t){return a.errorHandler(t)})).then((function(t){return Promise.resolve(a.modelCreateFactory(t.data))})).finally((function(){a.uploadProgress=0,n()}))}}]),a}(D),R=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{create:"/labels",getAll:"/labels",get:"/labels/{id}",update:"/labels/{id}",delete:"/labels/{id}"})}return Object(m["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(N["a"])(t.created),t.updated=Object(N["a"])(t.updated),t.hexColor=t.hexColor.substring(1,7),t}},{key:"modelFactory",value:function(t){return new A(t)}},{key:"beforeUpdate",value:function(t){return this.processModel(t)}},{key:"beforeCreate",value:function(t){return this.processModel(t)}}]),a}(D),M=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{create:"/lists/{listId}",getAll:"/tasks/all",get:"/tasks/{id}",update:"/tasks/{id}",delete:"/tasks/{id}"})}return Object(m["a"])(a,[{key:"modelFactory",value:function(t){return new P(t)}},{key:"beforeUpdate",value:function(t){return this.processModel(t)}},{key:"beforeCreate",value:function(t){return this.processModel(t)}},{key:"processModel",value:function(t){var e=this;for(var a in t.listId=Number(t.listId),t.dueDate=t.dueDate?Object(N["a"])(new Date(t.dueDate)):null,t.startDate=t.startDate?Object(N["a"])(new Date(t.startDate)):null,t.endDate=t.endDate?Object(N["a"])(new Date(t.endDate)):null,t.created=Object(N["a"])(t.created),t.updated=Object(N["a"])(t.updated),t.reminderDates)null===t.reminderDates[a]&&t.reminderDates.splice(a,1);t.reminderDates.length>0&&(t.reminderDates=t.reminderDates.map((function(t){return Object(N["a"])(new Date(t))})));var s=0;if(null!==t.repeatAfter.amount||0!==t.repeatAfter.amount)switch(t.repeatAfter.type){case"hours":s=60*t.repeatAfter.amount*60;break;case"days":s=60*t.repeatAfter.amount*60*24;break;case"weeks":s=60*t.repeatAfter.amount*60*24*7;break;case"months":s=60*t.repeatAfter.amount*60*24*30;break;case"years":s=60*t.repeatAfter.amount*60*24*365;break}if(t.repeatAfter=s,"#"===t.hexColor.substring(0,1)&&(t.hexColor=t.hexColor.substring(1,7)),Object.keys(t.relatedTasks).forEach((function(a){t.relatedTasks[a]=t.relatedTasks[a].map((function(t){return e.processModel(t)}))})),t.attachments.length>0){var i=new L;t.attachments.map((function(t){return i.processModel(t)}))}if(t.labels.length>0){var n=new R;t.labels=t.labels.map((function(t){return n.processModel(t)}))}return t}}]),a}(D),B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("fancycheckbox",{attrs:{disabled:t.isArchived},on:{change:t.markAsDone},model:{value:t.task.done,callback:function(e){t.$set(t.task,"done",e)},expression:"task.done"}}),a("router-link",{staticClass:"tasktext",class:{done:t.task.done},attrs:{to:{name:t.taskDetailRoute,params:{id:t.task.id}}}},[t.showList&&null!==t.$store.getters["lists/getListById"](t.task.listId)?a("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"This task belongs to list '"+t.$store.getters["lists/getListById"](t.task.listId).title+"'",expression:"`This task belongs to list '${$store.getters['lists/getListById'](task.listId).title}'`"}],staticClass:"task-list",attrs:{to:{name:"list.list",params:{listId:t.task.listId}}}},[t._v(" "+t._s(t.$store.getters["lists/getListById"](t.task.listId).title)+" ")]):t._e(),"undefined"!==typeof t.task.relatedTasks.parenttask?a("span",{staticClass:"parent-tasks"},[t._l(t.task.relatedTasks.parenttask,(function(e,a){return[t._v(" "+t._s(e.title)),a+1<t.task.relatedTasks.parenttask.length?[t._v(", ")]:t._e()]})),t._v(" > ")],2):t._e(),t._v(" "+t._s(t.task.title)+" "),a("labels",{attrs:{labels:t.task.labels}}),t._l(t.task.assignees,(function(e,s){return a("user",{key:t.task.id+"assignee"+e.id+s,attrs:{user:e,"avatar-size":27,"show-username":!1,"is-inline":!0}})})),t.task.dueDate>0?a("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.formatDate(t.task.dueDate),expression:"formatDate(task.dueDate)"}],class:{overdue:t.task.dueDate<=new Date&&!t.task.done}},[t._v(" - Due "+t._s(t.formatDateSince(t.task.dueDate)))]):t._e(),a("priority-label",{attrs:{priority:t.task.priority}})],2)],1)},U=[],F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showAll||t.priority>=t.priorities.HIGH?a("span",{class:{"not-so-high":t.priority===t.priorities.HIGH,"high-priority":t.priority>=t.priorities.HIGH}},[t.priority>=t.priorities.HIGH?a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"exclamation"}})],1):t._e(),t.priority===t.priorities.UNSET?[t._v("Unset")]:t._e(),t.priority===t.priorities.LOW?[t._v("Low")]:t._e(),t.priority===t.priorities.MEDIUM?[t._v("Medium")]:t._e(),t.priority===t.priorities.HIGH?[t._v("High")]:t._e(),t.priority===t.priorities.URGENT?[t._v("Urgent")]:t._e(),t.priority===t.priorities.DO_NOW?[t._v("DO NOW")]:t._e(),t.priority===t.priorities.DO_NOW?a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"exclamation"}})],1):t._e()],2):t._e()},W=[],q=a("9f07"),G={name:"priorityLabel",data:function(){return{priorities:q}},props:{priority:{default:0,type:Number},showAll:{type:Boolean,default:!1}}},H=G,z=(a("4ab6"),a("2877")),Y=Object(z["a"])(H,F,W,!1,null,null,null),K=Y.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-wrapper"},t._l(t.labels,(function(e){return a("span",{key:e.id,staticClass:"tag",style:{background:e.hexColor,color:e.textColor}},[a("span",[t._v(t._s(e.title))])])})),0)},J=[],Q={name:"labels",props:{labels:{required:!0}}},X=Q,Z=(a("e011"),Object(z["a"])(X,V,J,!1,null,"6ad66d40",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user",class:{"is-inline":t.isInline}},[a("img",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.user.username,expression:"user.username"}],staticClass:"avatar",attrs:{src:t.user.getAvatarUrl(t.avatarSize),alt:"",width:t.avatarSize,height:t.avatarSize}}),t.showUsername?a("span",{staticClass:"username"},[t._v(t._s(t.user.username))]):t._e()])},at=[],st={name:"user",props:{user:{required:!0,type:Object},showUsername:{required:!1,type:Boolean,default:!0},avatarSize:{required:!1,type:Number,default:50},isInline:{required:!1,type:Boolean,default:!1}}},it=st,nt=(a("4565"),Object(z["a"])(it,et,at,!1,null,"7e2731ba",null)),rt=nt.exports,ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fancycheckbox",class:{"is-disabled":t.disabled}},[a("input",{staticStyle:{display:"none"},attrs:{type:"checkbox",id:t.checkBoxId,disabled:t.disabled},domProps:{checked:t.checked},on:{change:t.updateData}}),a("label",{staticClass:"check",attrs:{for:t.checkBoxId}},[a("svg",{attrs:{width:"18px",height:"18px",viewBox:"0 0 18 18"}},[a("path",{attrs:{d:"M1,9 L1,3.5 C1,2 2,1 3.5,1 L14.5,1 C16,1 17,2 17,3.5 L17,14.5 C17,16 16,17 14.5,17 L3.5,17 C2,17 1,16 1,14.5 L1,9 Z"}}),a("polyline",{attrs:{points:"1 9 7 14 15 4"}})]),a("span",[t._t("default")],2)])])},ct=[],lt={name:"fancycheckbox",data:function(){return{checked:!1,checkBoxId:""}},props:{value:{required:!1},disabled:{type:Boolean,required:!1,default:!1}},watch:{value:function(t){this.checked=t}},mounted:function(){this.checked=this.value},created:function(){this.checkBoxId="fancycheckbox"+Math.random()},methods:{updateData:function(t){this.checked=t.target.checked,this.$emit("input",this.checked),this.$emit("change",t.target.checked)}}},dt=lt,ut=Object(z["a"])(dt,ot,ct,!1,null,null,null),ht=ut.exports,mt={name:"singleTaskInList",data:function(){return{taskService:M,task:P}},components:{Fancycheckbox:ht,User:rt,Labels:tt,PriorityLabel:K},props:{theTask:{type:P,required:!0},isArchived:{type:Boolean,default:!1},taskDetailRoute:{type:String,default:"task.list.detail"},showList:{type:Boolean,default:!1}},watch:{theTask:function(t){this.task=t}},mounted:function(){this.task=this.theTask},created:function(){this.task=new P,this.taskService=new M},methods:{markAsDone:function(t){var e=this,a=function(){e.taskService.update(e.task).then((function(a){e.task=a,e.$emit("taskUpdated",a),e.success({message:"The task was successfully "+(e.task.done?"":"un-")+"marked as done."},e,[{title:"Undo",callback:function(){return e.markAsDone({target:{checked:!t}})}}])})).catch((function(t){e.error(t,e)}))};t?setTimeout(a,300):a()}}},pt=mt,ft=Object(z["a"])(pt,B,U,!1,null,null,null),vt=ft.exports,kt="loading",bt="errorMessage",gt="online",Ct="isFullpage",wt="currentList",yt="hasTasks",_t="config",Tt={name:"ShowTasks",components:{SingleTaskInList:vt},data:function(){return{tasks:[],hasUndoneTasks:!1,taskService:M}},props:{startDate:Date,endDate:Date,showAll:Boolean},created:function(){this.taskService=new M,this.loadPendingTasks()},watch:{$route:"loadPendingTasks"},computed:Object(l["b"])({userAuthenticated:function(t){return t.auth.authenticated}}),methods:{loadPendingTasks:function(){var t=this;if(this.userAuthenticated){var e={sort_by:["due_date","id"],order_by:["desc","desc"],filter_by:["done"],filter_value:[!1],filter_comparator:["equals"],filter_concat:"and",filter_include_nulls:!0};this.showAll||(e.filter_by.push("start_date"),e.filter_value.push(this.startDate),e.filter_comparator.push("greater"),e.filter_by.push("end_date"),e.filter_value.push(this.endDate),e.filter_comparator.push("less"),e.filter_by.push("due_date"),e.filter_value.push(this.endDate),e.filter_comparator.push("less")),this.taskService.getAll({},e).then((function(e){if(e.length>0)for(var a in e)!0!==e[a].done&&(t.hasUndoneTasks=!0);t.$set(t,"tasks",e.filter((function(t){return!t.done}))),t.$store.commit(yt,e.length>0)})).catch((function(e){t.error(e,t)}))}},sortTasks:function(){if(null!==this.tasks&&this.tasks!==[])return this.tasks.sort((function(t,e){return t.done<e.done?-1:t.done>e.done?1:t.id>e.id?-1:t.id<e.id?1:0}))},updateTasks:function(t){for(var e in this.tasks)if(this.tasks[e].id===t.id){this.$set(this.tasks,e,t);break}this.sortTasks()}}},Dt=Tt,xt=(a("fe6e"),Object(z["a"])(Dt,d,u,!1,null,"47848407",null)),It=xt.exports,St={name:"Home",components:{ShowTasks:It},data:function(){return{loading:!1,currentDate:new Date,tasks:[]}},computed:Object(l["b"])({migratorsEnabled:function(t){return null!==t.config.availableMigrators&&t.config.availableMigrators.length>0},authenticated:function(t){return t.auth.authenticated},userInfo:function(t){return t.auth.info},hasTasks:function(t){return t.hasTasks}})},Ot=St,jt=Object(z["a"])(Ot,o,c,!1,null,null,null),At=jt.exports,Et=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},$t=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content has-text-centered"},[a("h1",[t._v("Not found")]),a("p",[t._v("The page you requested does not exist.")])])}],Pt={name:"404"},Nt=Pt,Lt=Object(z["a"])(Nt,Et,$t,!1,null,null,null),Rt=Lt.exports,Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"title has-text-centered"},[t._v("Login")]),a("div",{staticClass:"box"},[t.confirmedEmailSuccess?a("div",{staticClass:"notification is-success has-text-centered"},[t._v(" You successfully confirmed your email! You can log in now. ")]):t._e(),a("form",{attrs:{id:"loginform"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"username"}},[t._v("Username")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"focus",rawName:"v-focus"}],ref:"username",staticClass:"input",attrs:{type:"text",id:"username",name:"username",placeholder:"e.g. frederick",required:""}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"password"}},[t._v("Password")]),a("div",{staticClass:"control"},[a("input",{ref:"password",staticClass:"input",attrs:{type:"password",id:"password",name:"password",placeholder:"e.g. ••••••••••••",required:""}})])]),t.needsTotpPasscode?a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"totpPasscode"}},[t._v("Two Factor Authentication Code")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"focus",rawName:"v-focus"}],ref:"totpPasscode",staticClass:"input",attrs:{type:"text",id:"totpPasscode",placeholder:"e.g. 123456",required:""}})])]):t._e(),a("div",{staticClass:"field is-grouped login-buttons"},[a("div",{staticClass:"control is-expanded"},[a("button",{staticClass:"button is-primary",class:{"is-loading":t.loading},attrs:{type:"submit"}},[t._v("Login ")]),t.registrationEnabled?a("router-link",{staticClass:"button",attrs:{to:{name:"user.register"}}},[t._v("Register ")]):t._e()],1),a("div",{staticClass:"control"},[a("router-link",{staticClass:"reset-password-link",attrs:{to:{name:"user.password-reset.request"}}},[t._v("Reset your password ")])],1)]),t.errorMessage?a("div",{staticClass:"notification is-danger"},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e()])])])},Bt=[],Ut=b.a.create({baseURL:window.API_URL}),Ft={setLoading:function(t){var e=setTimeout((function(){t.loading=!0}),100);return function(){clearTimeout(e),t.loading=!1}},error:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=t.message;t.response&&t.response.data&&t.response.data.message&&(s+="<br/>"+t.response.data.message),e.$notify({type:"error",title:"Error",text:s,actions:a}),e.loading=!1},success:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=t.message;t.response&&t.response.data&&t.response.data.message&&(s+="<br/>"+t.response.data.message),e.$notify({type:"success",title:"Success",text:s,data:{actions:a}}),e.loading=!1}},Wt={data:function(){return{confirmedEmailSuccess:!1}},beforeMount:function(){var t=this,e=localStorage.getItem("emailConfirmToken");if(e){var a=Ft.setLoading(this);Ut.post("user/confirm",{token:e}).then((function(){localStorage.removeItem("emailConfirmToken"),t.confirmedEmailSuccess=!0,a()})).catch((function(e){a(),t.$store.commit(bt,e.response.data.message)}))}this.authenticated&&ro.push({name:"home"})},computed:Object(l["b"])({registrationEnabled:function(t){return t.config.registrationEnabled},loading:kt,errorMessage:bt,needsTotpPasscode:function(t){return t.auth.needsTotpPasscode},authenticated:function(t){return t.auth.authenticated}}),methods:{submit:function(){this.$store.commit(bt,"");var t={username:this.$refs.username.value,password:this.$refs.password.value};this.needsTotpPasscode&&(t.totpPasscode=this.$refs.totpPasscode.value),this.$store.dispatch("auth/login",t).then((function(){ro.push({name:"home"})})).catch((function(){}))}}},qt=Wt,Gt=(a("3c55"),Object(z["a"])(qt,Mt,Bt,!1,null,"460a5ba7",null)),Ht=Gt.exports,zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"title has-text-centered"},[t._v("Register")]),a("div",{staticClass:"box"},[a("form",{attrs:{id:"registerform"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"username"}},[t._v("Username")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.credentials.username,expression:"credentials.username"}],staticClass:"input",attrs:{type:"text",id:"username",name:"username",placeholder:"e.g. frederick",required:""},domProps:{value:t.credentials.username},on:{input:function(e){e.target.composing||t.$set(t.credentials,"username",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"email"}},[t._v("E-mail address")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.email,expression:"credentials.email"}],staticClass:"input",attrs:{type:"email",id:"email",name:"email",placeholder:"e.g. frederic@vikunja.io",required:""},domProps:{value:t.credentials.email},on:{input:function(e){e.target.composing||t.$set(t.credentials,"email",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"password1"}},[t._v("Password")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"}],staticClass:"input",attrs:{type:"password",id:"password1",name:"password1",placeholder:"e.g. ••••••••••••",required:""},domProps:{value:t.credentials.password},on:{input:function(e){e.target.composing||t.$set(t.credentials,"password",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"password2"}},[t._v("Retype your password")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password2,expression:"credentials.password2"}],staticClass:"input",attrs:{type:"password",id:"password2",name:"password2",placeholder:"e.g. ••••••••••••",required:""},domProps:{value:t.credentials.password2},on:{input:function(e){e.target.composing||t.$set(t.credentials,"password2",e.target.value)}}})])]),a("div",{staticClass:"field is-grouped"},[a("div",{staticClass:"control"},[a("button",{staticClass:"button is-primary",class:{"is-loading":t.loading},attrs:{type:"submit"}},[t._v("Register")]),a("router-link",{staticClass:"button",attrs:{to:{name:"user.login"}}},[t._v("Login")])],1)]),t.loading?a("div",{staticClass:"notification is-info"},[t._v(" Loading... ")]):t._e(),""!==t.errorMessage?a("div",{staticClass:"notification is-danger"},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e()])])])},Yt=[],Kt={data:function(){return{credentials:{username:"",email:"",password:"",password2:""}}},beforeMount:function(){this.authenticated&&ro.push({name:"home"})},computed:Object(l["b"])({authenticated:function(t){return t.auth.authenticated},loading:kt,errorMessage:bt}),methods:{submit:function(){if(this.$store.commit(kt,!0),this.$store.commit(bt,""),this.credentials.password2!==this.credentials.password)return this.$store.commit(bt,"Passwords don't match."),void this.$store.commit(kt,!1);var t={username:this.credentials.username,email:this.credentials.email,password:this.credentials.password};this.$store.dispatch("auth/register",t)}}},Vt=Kt,Jt=(a("1afa"),Object(z["a"])(Vt,zt,Yt,!1,null,"efd05d60",null)),Qt=Jt.exports,Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"title has-text-centered"},[t._v("Reset your password")]),a("div",{staticClass:"box"},[t.successMessage?t._e():a("form",{attrs:{id:"form"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"password1"}},[t._v("Password")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"}],staticClass:"input",attrs:{type:"password",id:"password1",name:"password1",placeholder:"e.g. ••••••••••••",required:""},domProps:{value:t.credentials.password},on:{input:function(e){e.target.composing||t.$set(t.credentials,"password",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"password2"}},[t._v("Retype your password")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password2,expression:"credentials.password2"}],staticClass:"input",attrs:{type:"password",id:"password2",name:"password2",placeholder:"e.g. ••••••••••••",required:""},domProps:{value:t.credentials.password2},on:{input:function(e){e.target.composing||t.$set(t.credentials,"password2",e.target.value)}}})])]),a("div",{staticClass:"field is-grouped"},[a("div",{staticClass:"control"},[a("button",{staticClass:"button is-primary",class:{"is-loading":this.passwordResetService.loading},attrs:{type:"submit"}},[t._v("Reset your password")])])]),this.passwordResetService.loading?a("div",{staticClass:"notification is-info"},[t._v(" Loading... ")]):t._e(),t.errorMsg?a("div",{staticClass:"notification is-danger"},[t._v(" "+t._s(t.errorMsg)+" ")]):t._e()]),t.successMessage?a("div",{staticClass:"has-text-centered"},[a("div",{staticClass:"notification is-success"},[t._v(" "+t._s(t.successMessage)+" ")]),a("router-link",{staticClass:"button is-primary",attrs:{to:{name:"user.login"}}},[t._v("Login")])],1):t._e()])])},Zt=[],te=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(t){var s;return Object(h["a"])(this,a),s=e.call(this,t),s.token=localStorage.getItem("passwordResetToken"),s}return Object(m["a"])(a,[{key:"defaults",value:function(){return{token:"",newPassword:"",email:""}}}]),a}(S),ee=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){var t;return Object(h["a"])(this,a),t=e.call(this,{}),t.paths={reset:"/user/password/reset",requestReset:"/user/password/token"},t}return Object(m["a"])(a,[{key:"modelFactory",value:function(t){return new te(t)}},{key:"resetPassword",value:function(t){var e=this,a=this.setLoading();return this.http.post(this.paths.reset,t).catch((function(t){return e.errorHandler(t)})).then((function(t){return Promise.resolve(e.modelFactory(t.data))})).finally((function(){a()}))}},{key:"requestResetPassword",value:function(t){var e=this,a=this.setLoading();return this.http.post(this.paths.requestReset,t).catch((function(t){return e.errorHandler(t)})).then((function(t){return Promise.resolve(e.modelFactory(t.data))})).finally((function(){a()}))}}]),a}(D),ae={data:function(){return{passwordResetService:ee,credentials:{password:"",password2:""},errorMsg:"",successMessage:""}},created:function(){this.passwordResetService=new ee},methods:{submit:function(){var t=this;if(this.errorMsg="",this.credentials.password2===this.credentials.password){var e=new te({newPassword:this.credentials.password});this.passwordResetService.resetPassword(e).then((function(e){t.successMessage=e.data.message,localStorage.removeItem("passwordResetToken")})).catch((function(e){t.errorMsg=e.response.data.message}))}else this.errorMsg="Passwords don't match"}}},se=ae,ie=(a("2da9"),Object(z["a"])(se,Xt,Zt,!1,null,"5580d0c8",null)),ne=ie.exports,re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"title has-text-centered"},[t._v("Reset your password")]),a("div",{staticClass:"box"},[t.isSuccess?t._e():a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"email"}},[t._v("E-mail address")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.passwordReset.email,expression:"passwordReset.email"}],staticClass:"input",attrs:{type:"email",id:"email",name:"email",placeholder:"e.g. frederic@vikunja.io",required:""},domProps:{value:t.passwordReset.email},on:{input:function(e){e.target.composing||t.$set(t.passwordReset,"email",e.target.value)}}})])]),a("div",{staticClass:"field is-grouped"},[a("div",{staticClass:"control"},[a("button",{staticClass:"button is-primary",class:{"is-loading":t.passwordResetService.loading},attrs:{type:"submit"}},[t._v("Send me a password reset link")]),a("router-link",{staticClass:"button",attrs:{to:{name:"user.login"}}},[t._v("Login")])],1)]),t.errorMsg?a("div",{staticClass:"notification is-danger"},[t._v(" "+t._s(t.errorMsg)+" ")]):t._e()]),t.isSuccess?a("div",{staticClass:"has-text-centered"},[a("div",{staticClass:"notification is-success"},[t._v(" Check your inbox! You should have a mail with instructions on how to reset your password. ")]),a("router-link",{staticClass:"button is-primary",attrs:{to:{name:"user.login"}}},[t._v("Login")])],1):t._e()])])},oe=[],ce={data:function(){return{passwordResetService:ee,passwordReset:te,errorMsg:"",isSuccess:!1}},created:function(){this.passwordResetService=new ee,this.passwordReset=new te},methods:{submit:function(){var t=this;this.errorMsg="",this.passwordResetService.requestResetPassword(this.passwordReset).then((function(){t.isSuccess=!0})).catch((function(e){t.errorMsg=e.response.data.message}))}}},le=ce,de=(a("30cd"),Object(z["a"])(le,re,oe,!1,null,"bc3cd3fe",null)),ue=de.exports,he=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loader-container",class:{"is-loading":t.passwordUpdateService.loading||t.emailUpdateService.loading||t.totpService.loading}},[a("div",{staticClass:"card"},[t._m(0),a("div",{staticClass:"card-content"},[a("div",{staticClass:"content"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.updatePassword()}}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"newPassword"}},[t._v("New Password")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordUpdate.newPassword,expression:"passwordUpdate.newPassword"}],staticClass:"input",attrs:{type:"password",id:"newPassword",placeholder:"The new password..."},domProps:{value:t.passwordUpdate.newPassword},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updatePassword(e)},input:function(e){e.target.composing||t.$set(t.passwordUpdate,"newPassword",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"newPasswordConfirm"}},[t._v("New Password Confirmation")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordConfirm,expression:"passwordConfirm"}],staticClass:"input",attrs:{type:"password",id:"newPasswordConfirm",placeholder:"Confirm your new password..."},domProps:{value:t.passwordConfirm},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updatePassword(e)},input:function(e){e.target.composing||(t.passwordConfirm=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"currentPassword"}},[t._v("Current Password")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordUpdate.oldPassword,expression:"passwordUpdate.oldPassword"}],staticClass:"input",attrs:{type:"password",id:"currentPassword",placeholder:"Your current password"},domProps:{value:t.passwordUpdate.oldPassword},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updatePassword(e)},input:function(e){e.target.composing||t.$set(t.passwordUpdate,"oldPassword",e.target.value)}}})])])]),a("div",{staticClass:"bigbuttons"},[a("button",{staticClass:"button is-primary is-fullwidth",class:{"is-loading":t.passwordUpdateService.loading},on:{click:function(e){return t.updatePassword()}}},[t._v(" Save ")])])])])]),a("div",{staticClass:"card"},[t._m(1),a("div",{staticClass:"card-content"},[a("div",{staticClass:"content"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.updateEmail()}}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"newEmail"}},[t._v("New Email Address")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.emailUpdate.newEmail,expression:"emailUpdate.newEmail"}],staticClass:"input",attrs:{type:"email",id:"newEmail",placeholder:"The new email address..."},domProps:{value:t.emailUpdate.newEmail},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateEmail(e)},input:function(e){e.target.composing||t.$set(t.emailUpdate,"newEmail",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"currentPassword"}},[t._v("Current Password")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.emailUpdate.password,expression:"emailUpdate.password"}],staticClass:"input",attrs:{type:"password",id:"currentPassword",placeholder:"Your current password"},domProps:{value:t.emailUpdate.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateEmail(e)},input:function(e){e.target.composing||t.$set(t.emailUpdate,"password",e.target.value)}}})])])]),a("div",{staticClass:"bigbuttons"},[a("button",{staticClass:"button is-primary is-fullwidth",class:{"is-loading":t.emailUpdateService.loading},on:{click:function(e){return t.updateEmail()}}},[t._v(" Save ")])])])])]),t.totpEnabled?a("div",{staticClass:"card"},[t._m(2),a("div",{staticClass:"card-content"},[t.totpEnrolled||""!==t.totp.secret?""===t.totp.secret||t.totp.enabled?""!==t.totp.secret&&t.totp.enabled?a("div",{staticClass:"content"},[a("p",[t._v(" You've sucessfully set up two factor authentication! ")]),t.totpDisableForm?t._e():a("p",[a("a",{staticClass:"button is-danger",on:{click:function(e){t.totpDisableForm=!0}}},[t._v("Disable")])]),t.totpDisableForm?a("div",[a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"currentPassword"}},[t._v("Please Enter Your Password")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.totpDisablePassword,expression:"totpDisablePassword"},{name:"focus",rawName:"v-focus"}],staticClass:"input",attrs:{type:"password",id:"currentPassword",placeholder:"Your current password"},domProps:{value:t.totpDisablePassword},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.totpDisable(e)},input:function(e){e.target.composing||(t.totpDisablePassword=e.target.value)}}})])]),a("a",{staticClass:"button is-danger",on:{click:function(e){return t.totpDisable()}}},[t._v("Disable two factor authentication")])]):t._e()]):t._e():a("div",{staticClass:"content"},[a("p",[t._v(" To finish your setup, use this secret in your totp app (Google Authenticator or similar): "),a("strong",[t._v(t._s(t.totp.secret))]),a("br"),t._v(" After that, enter a code from your app below. ")]),a("p",[t._v(" Alternatively you can scan this QR code:"),a("br"),a("img",{attrs:{src:t.totpQR,alt:""}})]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"totpConfirmPasscode"}},[t._v("Passcode")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.totpConfirmPasscode,expression:"totpConfirmPasscode"}],staticClass:"input",attrs:{type:"text",id:"totpConfirmPasscode",placeholder:"A code generated by your totp application"},domProps:{value:t.totpConfirmPasscode},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.totpConfirm()},input:function(e){e.target.composing||(t.totpConfirmPasscode=e.target.value)}}})])]),a("a",{staticClass:"button is-primary",on:{click:function(e){return t.totpConfirm()}}},[t._v("Confirm")])]):a("a",{staticClass:"button is-primary",class:{"is-loading":t.totpService.loading},on:{click:function(e){return t.totpEnroll()}}},[t._v(" Enroll ")])])]):t._e(),t.totpEnabled?a("div",{staticClass:"card"},[t._m(3),a("div",{staticClass:"card-content"},[t.migratorsEnabled?a("router-link",{staticClass:"button is-primary is-right noshadow is-outlined",attrs:{to:{name:"migrate.start"}}},[t._v(" Import your data into Vikunja ")]):t._e()],1)]):t._e()])},me=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v(" Update Your Password ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v(" Update Your E-Mail Address ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v(" Two Factor Authentication ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v(" Migrate from other services to Vikunja ")])])}],pe=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.apply(this,arguments)}return Object(m["a"])(a,[{key:"defaults",value:function(){return{newPassword:"",oldPassword:""}}}]),a}(S),fe=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{update:"/user/password"})}return a}(D),ve=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{update:"/user/settings/email"})}return a}(D),ke=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.apply(this,arguments)}return Object(m["a"])(a,[{key:"defaults",value:function(){return{newEmail:"",passwort:""}}}]),a}(S),be=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.apply(this,arguments)}return Object(m["a"])(a,[{key:"defaults",value:function(){return{secret:"",enabled:!1,url:""}}}]),a}(S),ge=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){var t;return Object(h["a"])(this,a),t=e.call(this,{}),Object(v["a"])(Object(I["a"])(t),"urlPrefix","/user/settings/totp"),t.paths.get=t.urlPrefix,t}return Object(m["a"])(a,[{key:"modelFactory",value:function(t){return new be(t)}},{key:"enroll",value:function(){return this.post("".concat(this.urlPrefix,"/enroll"),{})}},{key:"enable",value:function(t){return this.post("".concat(this.urlPrefix,"/enable"),t)}},{key:"disable",value:function(t){return this.post("".concat(this.urlPrefix,"/disable"),t)}},{key:"qrcode",value:function(){return this.http({url:"".concat(this.urlPrefix,"/qrcode"),method:"GET",responseType:"blob"}).then((function(t){return Promise.resolve(new Blob([t.data]))}))}}]),a}(D),Ce={name:"Settings",data:function(){return{passwordUpdateService:fe,passwordUpdate:pe,passwordConfirm:"",emailUpdateService:ve,emailUpdate:ke,totpService:ge,totp:be,totpQR:"",totpEnrolled:!1,totpConfirmPasscode:"",totpDisableForm:!1,totpDisablePassword:""}},created:function(){this.passwordUpdateService=new fe,this.passwordUpdate=new pe,this.emailUpdateService=new ve,this.emailUpdate=new ke,this.totpService=new ge,this.totp=new be,this.totpStatus()},computed:Object(l["b"])({totpEnabled:function(t){return t.config.totpEnabled},migratorsEnabled:function(t){return null!==t.config.availableMigrators&&t.config.availableMigrators.length>0}}),methods:{updatePassword:function(){var t=this;this.passwordConfirm===this.passwordUpdate.newPassword?this.passwordUpdateService.update(this.passwordUpdate).then((function(){t.success({message:"The password was successfully updated."},t)})).catch((function(e){return t.error(e,t)})):this.error({message:"The new password and its confirmation don't match."},this)},updateEmail:function(){var t=this;this.emailUpdateService.update(this.emailUpdate).then((function(){t.success({message:"Your email address was successfully updated. We've sent you a link to confirm it."},t)})).catch((function(e){return t.error(e,t)}))},totpStatus:function(){var t=this;this.totpEnabled&&this.totpService.get().then((function(e){t.$set(t,"totp",e),t.totpSetQrCode()})).catch((function(e){e.response&&e.response.data&&e.response.data.code&&1016===e.response.data.code?t.totpEnrolled=!1:t.error(e,t)}))},totpSetQrCode:function(){var t=this;this.totpService.qrcode().then((function(e){var a=window.URL||window.webkitURL;t.totpQR=a.createObjectURL(e)}))},totpEnroll:function(){var t=this;this.totpService.enroll().then((function(e){t.totpEnrolled=!0,t.$set(t,"totp",e),t.totpSetQrCode()})).catch((function(e){return t.error(e,t)}))},totpConfirm:function(){var t=this;this.totpService.enable({passcode:this.totpConfirmPasscode}).then((function(){t.$set(t.totp,"enabled",!0),t.success({message:"You've successfully confirmed your totp setup and can use it from now on!"},t)})).catch((function(e){return t.error(e,t)}))},totpDisable:function(){var t=this;this.totpService.disable({password:this.totpDisablePassword}).then((function(){t.totpEnrolled=!1,t.$set(t,"totp",new be),t.success({message:"Two factor authentication was sucessfully disabled."},t)})).catch((function(e){return t.error(e,t)}))}}},we=Ce,ye=Object(z["a"])(we,he,me,!1,null,null,null),_e=ye.exports,Te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fullpage"},[a("a",{staticClass:"close",on:{click:function(e){return t.back()}}},[a("icon",{attrs:{icon:["far","times-circle"]}})],1),a("h3",[t._v("Create a new list")]),a("div",{staticClass:"field is-grouped"},[a("p",{staticClass:"control is-expanded",class:{"is-loading":t.listService.loading}},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.list.title,expression:"list.title"}],staticClass:"input",class:{disabled:t.listService.loading},attrs:{type:"text",placeholder:"The list's name goes here..."},domProps:{value:t.list.title},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.back()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.newList()}],input:function(e){e.target.composing||t.$set(t.list,"title",e.target.value)}}})]),a("p",{staticClass:"control"},[a("button",{staticClass:"button is-success noshadow",attrs:{disabled:""===t.list.title},on:{click:function(e){return t.newList()}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"plus"}})],1),t._v(" Add ")])])]),t.showError&&""===t.list.title?a("p",{staticClass:"help is-danger"},[t._v(" Please specify a title. ")]):t._e()])},De=[],xe=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(t){var s;return Object(h["a"])(this,a),s=e.call(this,t),""!==s.hexColor&&"#"!==s.hexColor.substring(0,1)&&(s.hexColor="#"+s.hexColor),s.tasks=s.tasks.map((function(t){return new P(t)})),s.owner=new O(s.owner),s.created=new Date(s.created),s.updated=new Date(s.updated),s}return Object(m["a"])(a,[{key:"defaults",value:function(){return{id:0,title:"",description:"",owner:O,tasks:[],namespaceId:0,isArchived:!1,hexColor:"",identifier:"",backgroundInformation:null,created:null,updated:null}}}]),a}(S),Ie=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{create:"/namespaces/{namespaceId}/lists",get:"/lists/{id}",getAll:"/lists",update:"/lists/{id}",delete:"/lists/{id}"})}return Object(m["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(N["a"])(t.created),t.updated=Object(N["a"])(t.updated),t}},{key:"modelFactory",value:function(t){return new xe(t)}},{key:"beforeUpdate",value:function(t){var e=new M;return t.tasks=t.tasks.map((function(t){return e.beforeUpdate(t)})),t.hexColor=t.hexColor.substring(1,7),t}},{key:"beforeCreate",value:function(t){return t.hexColor=t.hexColor.substring(1,7),t}},{key:"background",value:function(t){return null===t.background?Promise.resolve(""):this.http({url:"/lists/".concat(t.id,"/background"),method:"GET",responseType:"blob"}).then((function(t){return window.URL.createObjectURL(new Blob([t.data]))})).catch((function(t){return t}))}}]),a}(D),Se={name:"NewList",data:function(){return{showError:!1,list:xe,listService:Ie}},created:function(){this.list=new xe,this.listService=new Ie,this.$store.commit(Ct,!0)},methods:{newList:function(){var t=this;""!==this.list.title?(this.showError=!1,this.list.namespaceId=this.$route.params.id,this.listService.create(this.list).then((function(e){e.namespaceId=t.list.namespaceId,t.$store.commit("namespaces/addListToNamespace",e),t.success({message:"The list was successfully created."},t),ro.push({name:"list.index",params:{listId:e.id}})})).catch((function(e){t.error(e,t)}))):this.showError=!0},back:function(){ro.go(-1)}}},Oe=Se,je=Object(z["a"])(Oe,Te,De,!1,null,null,null),Ae=je.exports,Ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loader-container edit-list",class:{"is-loading":t.listService.loading}},[t.list.isArchived?a("div",{staticClass:"notification is-warning"},[t._v(" This list is archived. It is not possible to create new or edit tasks or it. ")]):t._e(),a("div",{staticClass:"card"},[t._m(0),a("div",{staticClass:"card-content"},[a("div",{staticClass:"content"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.submit()}}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"listtext"}},[t._v("List Name")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.list.title,expression:"list.title"}],staticClass:"input",class:{disabled:t.listService.loading},attrs:{disabled:t.listService.loading,type:"text",id:"listtext",placeholder:"The list title goes here..."},domProps:{value:t.list.title},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)},input:function(e){e.target.composing||t.$set(t.list,"title",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"The list identifier can be used to uniquely identify a task across lists. You can set it to empty to disable it.",expression:"'The list identifier can be used to uniquely identify a task across lists. You can set it to empty to disable it.'"}],staticClass:"label",attrs:{for:"listtext"}},[t._v(" List Identifier ")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.list.identifier,expression:"list.identifier"}],staticClass:"input",class:{disabled:t.listService.loading},attrs:{disabled:t.listService.loading,type:"text",id:"listtext",placeholder:"The list identifier goes here..."},domProps:{value:t.list.identifier},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)},input:function(e){e.target.composing||t.$set(t.list,"identifier",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"listdescription"}},[t._v("Description")]),a("div",{staticClass:"control"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.list.description,expression:"list.description"}],staticClass:"textarea",class:{disabled:t.listService.loading},attrs:{disabled:t.listService.loading,placeholder:"The lists description goes here...",id:"listdescription"},domProps:{value:t.list.description},on:{input:function(e){e.target.composing||t.$set(t.list,"description",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"isArchivedCheck"}},[t._v("Is Archived")]),a("div",{staticClass:"control"},[a("fancycheckbox",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"If a list is archived, you cannot create new tasks or edit the list or existing tasks.",expression:"'If a list is archived, you cannot create new tasks or edit the list or existing tasks.'"}],model:{value:t.list.isArchived,callback:function(e){t.$set(t.list,"isArchived",e)},expression:"list.isArchived"}},[t._v(" This list is archived ")])],1)]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Color")]),a("div",{staticClass:"control"},[a("color-picker",{model:{value:t.list.hexColor,callback:function(e){t.$set(t.list,"hexColor",e)},expression:"list.hexColor"}})],1)])]),a("div",{staticClass:"columns bigbuttons"},[a("div",{staticClass:"column"},[a("button",{staticClass:"button is-primary is-fullwidth",class:{"is-loading":t.listService.loading},on:{click:function(e){return t.submit()}}},[t._v(" Save ")])]),a("div",{staticClass:"column is-1"},[a("button",{staticClass:"button is-danger is-fullwidth",class:{"is-loading":t.listService.loading},on:{click:function(e){t.showDeleteModal=!0}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"trash-alt"}})],1)])])])])])]),a("div",{staticClass:"card"},[t._m(1),a("div",{staticClass:"card-content"},[a("div",{staticClass:"content"},[a("p",[t._v("Select a namespace which should hold the duplicated list:")]),a("div",{staticClass:"field is-grouped"},[a("p",{staticClass:"control is-expanded"},[a("namespace-search",{on:{selected:t.selectNamespace}})],1),a("p",{staticClass:"control"},[a("button",{staticClass:"button is-success",attrs:{type:"submit"},on:{click:t.duplicateList}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"plus"}})],1),t._v(" Add ")])])])])])]),a("background",{attrs:{"list-id":t.$route.params.id}}),a(t.manageUsersComponent,{tag:"component",attrs:{id:t.list.id,type:"list",shareType:"user",userIsAdmin:t.userIsAdmin}}),a(t.manageTeamsComponent,{tag:"component",attrs:{id:t.list.id,type:"list",shareType:"team",userIsAdmin:t.userIsAdmin}}),t.linkSharingEnabled?a("link-sharing",{attrs:{"list-id":t.$route.params.id}}):t._e(),t.showDeleteModal?a("modal",{on:{close:function(e){t.showDeleteModal=!1},submit:function(e){return t.deleteList()}}},[a("span",{attrs:{slot:"header"},slot:"header"},[t._v("Delete the list")]),a("p",{attrs:{slot:"text"},slot:"text"},[t._v("Are you sure you want to delete this list and all of its contents? "),a("br"),t._v("This includes all tasks and "),a("b",[t._v("CANNOT BE UNDONE!")])])]):t._e()],1)},$e=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v(" Edit List ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v(" Duplicate this list ")])])}],Pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card is-fullwidth"},[a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v(" Shared with these "+t._s(t.shareType)+"s ")])]),a("div",{staticClass:"card-content content sharables-list"},[t.userIsAdmin?a("form",{staticClass:"add-form",on:{submit:function(e){return e.preventDefault(),t.add()}}},[a("div",{staticClass:"field is-grouped"},[a("p",{staticClass:"control is-expanded",class:{"is-loading":t.searchService.loading}},[a("multiselect",{attrs:{options:t.found,multiple:!1,searchable:!0,loading:t.searchService.loading,"internal-search":!0,placeholder:"Type to search",label:t.searchLabel,"track-by":"id"},on:{"search-change":t.find},scopedSlots:t._u([{key:"clear",fn:function(e){return[0!==t.sharable.id?a("div",{staticClass:"multiselect__clear",on:{mousedown:function(a){return a.preventDefault(),a.stopPropagation(),t.clearAll(e.search)}}}):t._e()]}}],null,!1,2100565130),model:{value:t.sharable,callback:function(e){t.sharable=e},expression:"sharable"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Oops! No "+t._s(t.shareType)+" found. Consider changing the search query.")])])],1),a("p",{staticClass:"control"},[a("button",{staticClass:"button is-success",attrs:{type:"submit"}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"plus"}})],1),t._v(" Add ")])])])]):t._e(),a("table",{staticClass:"table is-striped is-hoverable is-fullwidth"},[a("tbody",t._l(t.sharables,(function(e){return a("tr",{key:e.id},["user"===t.shareType?[a("td",[t._v(t._s(e.username))]),a("td",[e.id===t.userInfo.id?[a("b",{staticClass:"is-success"},[t._v("You")])]:t._e()],2)]:t._e(),"team"===t.shareType?[a("td",[a("router-link",{attrs:{to:{name:"teams.edit",params:{id:e.id}}}},[t._v(" "+t._s(e.name)+" ")])],1)]:t._e(),a("td",{staticClass:"type"},[e.right===t.rights.ADMIN?[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"lock"}})],1),t._v(" Admin ")]:e.right===t.rights.READ_WRITE?[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"pen"}})],1),t._v(" Write ")]:[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"users"}})],1),t._v(" Read-only ")]],2),t.userIsAdmin?a("td",{staticClass:"actions"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedRight[e.id],expression:"selectedRight[s.id]"}],staticClass:"button buttonright",on:{change:[function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.selectedRight,e.id,a.target.multiple?s:s[0])},function(a){return t.toggleType(e)}]}},[a("option",{domProps:{value:t.rights.READ,selected:e.right===t.rights.READ}},[t._v("Read only")]),a("option",{domProps:{value:t.rights.READ_WRITE,selected:e.right===t.rights.READ_WRITE}},[t._v("Read & write")]),a("option",{domProps:{value:t.rights.ADMIN,selected:e.right===t.rights.ADMIN}},[t._v("Admin")])])]),a("button",{staticClass:"button is-danger icon-only",on:{click:function(){t.sharable=e,t.showDeleteModal=!0}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"trash-alt"}})],1)])]):t._e()],2)})),0)])]),t.showDeleteModal?a("modal",{on:{close:function(e){t.showDeleteModal=!1},submit:function(e){return t.deleteSharable()}}},[a("span",{attrs:{slot:"header"},slot:"header"},[t._v("Remove a "+t._s(t.shareType)+" from the "+t._s(t.typeString))]),a("p",{attrs:{slot:"text"},slot:"text"},[t._v("Are you sure you want to remove this "+t._s(t.shareType)+" from the "+t._s(t.typeString)+"?"),a("br"),a("b",[t._v("This CANNOT BE UNDONE!")])])]):t._e()],1)},Ne=[],Le=a("8e5f"),Re=a.n(Le),Me=a("f20d"),Be=a("fbf1"),Ue=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(t){var s;return Object(h["a"])(this,a),s=e.call(this,t),s.created=new Date(s.created),s.updated=new Date(s.updated),s}return Object(m["a"])(a,[{key:"defaults",value:function(){return{userId:"",right:0,created:null,updated:null}}}]),a}(S),Fe=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.apply(this,arguments)}return Object(m["a"])(a,[{key:"defaults",value:function(){return Object(g["merge"])(Object(Be["a"])(Object(Me["a"])(a.prototype),"defaults",this).call(this),{namespaceId:0})}}]),a}(Ue),We=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{create:"/namespaces/{namespaceId}/users",getAll:"/namespaces/{namespaceId}/users",update:"/namespaces/{namespaceId}/users/{userId}",delete:"/namespaces/{namespaceId}/users/{userId}"})}return Object(m["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(N["a"])(t.created),t.updated=Object(N["a"])(t.updated),t}},{key:"modelFactory",value:function(t){return new Fe(t)}},{key:"modelGetAllFactory",value:function(t){return new O(t)}}]),a}(D),qe=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.apply(this,arguments)}return Object(m["a"])(a,[{key:"defaults",value:function(){return Object(g["merge"])(Object(Be["a"])(Object(Me["a"])(a.prototype),"defaults",this).call(this),{listId:0})}}]),a}(Ue),Ge=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{create:"/lists/{listId}/users",getAll:"/lists/{listId}/users",update:"/lists/{listId}/users/{userId}",delete:"/lists/{listId}/users/{userId}"})}return Object(m["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(N["a"])(t.created),t.updated=Object(N["a"])(t.updated),t}},{key:"modelFactory",value:function(t){return new qe(t)}},{key:"modelGetAllFactory",value:function(t){return new O(t)}}]),a}(D),He=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{getAll:"/users"})}return Object(m["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(N["a"])(t.created),t.updated=Object(N["a"])(t.updated),t}},{key:"modelFactory",value:function(t){return new O(t)}}]),a}(D),ze=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(t){var s;return Object(h["a"])(this,a),s=e.call(this,t),s.created=new Date(s.created),s.updated=new Date(s.updated),s}return Object(m["a"])(a,[{key:"defaults",value:function(){return{teamId:0,right:0,created:null,updated:null}}}]),a}(S),Ye=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.apply(this,arguments)}return Object(m["a"])(a,[{key:"defaults",value:function(){return Object(g["merge"])(Object(Be["a"])(Object(Me["a"])(a.prototype),"defaults",this).call(this),{namespaceId:0})}}]),a}(ze),Ke=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.apply(this,arguments)}return Object(m["a"])(a,[{key:"defaults",value:function(){return Object(g["merge"])(Object(Be["a"])(Object(Me["a"])(a.prototype),"defaults",this).call(this),{admin:!1,teamId:0})}}]),a}(O),Ve=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(t){var s;return Object(h["a"])(this,a),s=e.call(this,t),s.members=s.members.map((function(t){return new Ke(t)})),s.createdBy=new O(s.createdBy),s.created=new Date(s.created),s.updated=new Date(s.updated),s}return Object(m["a"])(a,[{key:"defaults",value:function(){return{id:0,name:"",description:"",members:[],right:0,createdBy:{},created:null,updated:null}}}]),a}(S),Je=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{create:"/namespaces/{namespaceId}/teams",getAll:"/namespaces/{namespaceId}/teams",update:"/namespaces/{namespaceId}/teams/{teamId}",delete:"/namespaces/{namespaceId}/teams/{teamId}"})}return Object(m["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(N["a"])(t.created),t.updated=Object(N["a"])(t.updated),t}},{key:"modelFactory",value:function(t){return new Ye(t)}},{key:"modelGetAllFactory",value:function(t){return new Ve(t)}}]),a}(D),Qe=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.apply(this,arguments)}return Object(m["a"])(a,[{key:"defaults",value:function(){return Object(g["merge"])(Object(Be["a"])(Object(Me["a"])(a.prototype),"defaults",this).call(this),{listId:0})}}]),a}(ze),Xe=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{create:"/lists/{listId}/teams",getAll:"/lists/{listId}/teams",update:"/lists/{listId}/teams/{teamId}",delete:"/lists/{listId}/teams/{teamId}"})}return Object(m["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(N["a"])(t.created),t.updated=Object(N["a"])(t.updated),t}},{key:"modelFactory",value:function(t){return new Qe(t)}},{key:"modelGetAllFactory",value:function(t){return new Ve(t)}}]),a}(D),Ze=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{create:"/teams",get:"/teams/{id}",getAll:"/teams",update:"/teams/{id}",delete:"/teams/{id}"})}return Object(m["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(N["a"])(t.created),t.updated=Object(N["a"])(t.updated),t}},{key:"modelFactory",value:function(t){return new Ve(t)}}]),a}(D),ta=a("a1b4"),ea={name:"userTeamShare",props:{type:{type:String,default:""},shareType:{type:String,default:""},id:{type:Number,default:0},userIsAdmin:{type:Boolean,default:!1}},data:function(){return{stuffService:Object,stuffModel:Object,searchService:Object,sharable:Object,found:[],searchLabel:"",rights:ta,selectedRight:{},typeString:"",sharables:[],showDeleteModal:!1}},components:{multiselect:Re.a},computed:Object(l["b"])({userInfo:function(t){return t.auth.info}}),created:function(){if("user"===this.shareType)if(this.searchService=new He,this.sharable=new O,this.searchLabel="username","list"===this.type)this.typeString="list",this.stuffService=new Ge,this.stuffModel=new qe({listId:this.id});else{if("namespace"!==this.type)throw new Error("Unknown type: "+this.type);this.typeString="namespace",this.stuffService=new We,this.stuffModel=new Fe({namespaceId:this.id})}else{if("team"!==this.shareType)throw new Error("Unkown share type");if(this.searchService=new Ze,this.sharable=new Ve,this.searchLabel="name","list"===this.type)this.typeString="list",this.stuffService=new Xe,this.stuffModel=new Qe({listId:this.id});else{if("namespace"!==this.type)throw new Error("Unknown type: "+this.type);this.typeString="namespace",this.stuffService=new Je,this.stuffModel=new Ye({namespaceId:this.id})}}this.load()},methods:{load:function(){var t=this;this.stuffService.getAll(this.stuffModel).then((function(e){t.$set(t,"sharables",e),e.forEach((function(e){return t.$set(t.selectedRight,e.id,e.right)}))})).catch((function(e){t.error(e,t)}))},deleteSharable:function(){var t=this;"user"===this.shareType?this.stuffModel.userId=this.sharable.username:"team"===this.shareType&&(this.stuffModel.teamId=this.sharable.id),this.stuffService.delete(this.stuffModel).then((function(){for(var e in t.showDeleteModal=!1,t.sharables)(t.sharables[e].id===t.stuffModel.userId&&"user"===t.shareType||t.sharables[e].id===t.stuffModel.teamId&&"team"===t.shareType)&&t.sharables.splice(e,1);t.success({message:"The "+t.shareType+" was successfully deleted from the "+t.typeString+"."},t)})).catch((function(e){t.error(e,t)}))},add:function(t){var e=this;null===t&&(t=!1),this.stuffModel.right=ta.READ,t&&(this.stuffModel.right=ta.ADMIN),"user"===this.shareType?this.stuffModel.userId=this.sharable.username:"team"===this.shareType&&(this.stuffModel.teamId=this.sharable.id),this.stuffService.create(this.stuffModel).then((function(){e.success({message:"The "+e.shareType+" was successfully added."},e),e.load()})).catch((function(t){e.error(t,e)}))},toggleType:function(t){var e=this;this.selectedRight[t.id]!==ta.ADMIN&&this.selectedRight[t.id]!==ta.READ&&this.selectedRight[t.id]!==ta.READ_WRITE&&(this.selectedRight[t.id]=ta.READ),this.stuffModel.right=this.selectedRight[t.id],"user"===this.shareType?this.stuffModel.userId=t.username:"team"===this.shareType&&(this.stuffModel.teamId=t.id),this.stuffService.update(this.stuffModel).then((function(t){for(var a in e.sharables)(e.sharables[a].username===e.stuffModel.userId&&"user"===e.shareType||e.sharables[a].id===e.stuffModel.teamId&&"team"===e.shareType)&&e.$set(e.sharables[a],"right",t.right);e.success({message:"The "+e.shareType+" right was successfully updated."},e)})).catch((function(t){e.error(t,e)}))},find:function(t){var e=this;""!==t?this.searchService.getAll({},{s:t}).then((function(t){e.$set(e,"found",t)})).catch((function(t){e.error(t,e)})):this.$set(this,"found",[])},clearAll:function(){this.$set(this,"found",[])}}},aa=ea,sa=Object(z["a"])(aa,Pe,Ne,!1,null,null,null),ia=sa.exports,na=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card is-fullwidth"},[t._m(0),a("div",{staticClass:"card-content content sharables-list"},[a("form",{staticClass:"add-form",on:{submit:function(e){return e.preventDefault(),t.add()}}},[a("p",[t._v(" Share with a link: ")]),a("div",{staticClass:"field has-addons"},[a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedRight,expression:"selectedRight"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedRight=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:t.rights.READ}},[t._v("Read only")]),a("option",{domProps:{value:t.rights.READ_WRITE}},[t._v("Read & write")]),a("option",{domProps:{value:t.rights.ADMIN}},[t._v("Admin")])])])]),t._m(1)])]),a("table",{staticClass:"table is-striped is-hoverable is-fullwidth link-share-list"},[a("tbody",[t._m(2),t.linkShares.length>0?t._l(t.linkShares,(function(e){return a("tr",{key:e.id},[a("td",[a("div",{staticClass:"field has-addons"},[a("div",{staticClass:"control"},[a("input",{staticClass:"input",attrs:{type:"text",readonly:""},domProps:{value:t.getShareLink(e.hash)}})]),a("div",{staticClass:"control"},[a("a",{staticClass:"button is-success noshadow",on:{click:function(a){t.copy(t.getShareLink(e.hash))}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"paste"}})],1)])])])]),a("td",[t._v(" "+t._s(e.sharedBy.username)+" ")]),a("td",{staticClass:"type"},[e.right===t.rights.ADMIN?[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"lock"}})],1),t._v(" Admin ")]:e.right===t.rights.READ_WRITE?[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"pen"}})],1),t._v(" Write ")]:[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"users"}})],1),t._v(" Read-only ")]],2),a("td",{staticClass:"actions"},[a("button",{staticClass:"button is-danger icon-only",on:{click:function(){t.linkIdToDelete=e.id,t.showDeleteModal=!0}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"trash-alt"}})],1)])])])})):t._e()],2)])]),t.showDeleteModal?a("modal",{on:{close:function(e){t.showDeleteModal=!1},submit:function(e){return t.remove()}}},[a("span",{attrs:{slot:"header"},slot:"header"},[t._v("Remove a link share")]),a("p",{attrs:{slot:"text"},slot:"text"},[t._v("Are you sure you want to remove this link share?"),a("br"),t._v(" It will no longer be possible to access this list with this link share."),a("br"),a("b",[t._v("This CANNOT BE UNDONE!")])])]):t._e()],1)},ra=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v(" Share links ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"control"},[a("button",{staticClass:"button is-success",attrs:{type:"submit"}},[t._v(" Share ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("Link")]),a("th",[t._v("Shared by")]),a("th",[t._v("Right")]),a("th",[t._v("Delete")])])}],oa=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(t){var s;return Object(h["a"])(this,a),s=e.call(this,t),s.sharedBy=new O(s.sharedBy),s.created=new Date(s.created),s.updated=new Date(s.updated),s}return Object(m["a"])(a,[{key:"defaults",value:function(){return{id:0,hash:"",right:0,sharedBy:O,sharingType:0,listId:0,created:null,updated:null}}}]),a}(S),ca=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{getAll:"/lists/{listId}/shares",get:"/lists/{listId}/shares/{id}",create:"/lists/{listId}/shares",delete:"/lists/{listId}/shares/{id}"})}return Object(m["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(N["a"])(t.created),t.updated=Object(N["a"])(t.updated),t}},{key:"modelFactory",value:function(t){return new oa(t)}}]),a}(D),la=a("f904"),da=a.n(la),ua=void 0,ha={name:"linkSharing",props:{listId:{default:0,required:!0}},data:function(){return{linkShares:[],linkShareService:ca,newLinkShare:oa,rights:ta,selectedRight:ta.READ,showDeleteModal:!1,linkIdToDelete:0}},beforeMount:function(){this.linkShareService=new ca},created:function(){this.linkShareService=new ca,this.load()},watch:{listId:function(){ua.load()}},computed:Object(l["b"])({frontendUrl:function(t){return t.config.frontendUrl}}),methods:{load:function(){var t=this;0!==this.listId&&this.linkShareService.getAll({listId:this.listId}).then((function(e){t.linkShares=e})).catch((function(e){t.error(e,t)}))},add:function(){var t=this,e=new oa({right:this.selectedRight,listId:this.listId});this.linkShareService.create(e).then((function(){t.selectedRight=ta.READ,t.success({message:"The link share was successfully created"},t),t.load()})).catch((function(e){t.error(e,t)}))},remove:function(){var t=this,e=new oa({id:this.linkIdToDelete,listId:this.listId});this.linkShareService.delete(e).then((function(){t.success({message:"The link share was successfully deleted"},t),t.load()})).catch((function(e){t.error(e,t)})).finally((function(){t.showDeleteModal=!1}))},copy:function(t){da()(t)},getShareLink:function(t){return this.frontendUrl+"share/"+t+"/auth"}}},ma=ha,pa=Object(z["a"])(ma,na,ra,!1,null,null,null),fa=pa.exports,va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.uploadBackgroundEnabled||t.unsplashBackgroundEnabled?a("div",{staticClass:"card list-background-setting loader-container",class:{"is-loading":t.backgroundService.loading}},[t._m(0),a("div",{staticClass:"card-content"},[t.uploadBackgroundEnabled?a("div",{staticClass:"content"},[a("input",{ref:"backgroundUploadInput",staticClass:"is-hidden",attrs:{type:"file",accept:"image/*"},on:{change:t.uploadBackground}}),a("a",{staticClass:"button is-primary",class:{"is-loading":t.backgroundUploadService.loading},on:{click:function(e){return t.$refs.backgroundUploadInput.click()}}},[t._v(" Choose a background from your pc ")])]):t._e(),t.unsplashBackgroundEnabled?a("div",{staticClass:"content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.backgroundSearchTerm,expression:"backgroundSearchTerm"}],staticClass:"input is-expanded",class:{"is-loading":t.backgroundService.loading},attrs:{type:"text",placeholder:"Search for a background..."},domProps:{value:t.backgroundSearchTerm},on:{keyup:function(){return t.newBackgroundSearch()},input:function(e){e.target.composing||(t.backgroundSearchTerm=e.target.value)}}}),t._m(1),a("div",{staticClass:"image-search-result"},t._l(t.backgroundSearchResult,(function(e){return a("a",{key:e.id,staticClass:"image",style:{"background-image":"url("+t.backgroundThumbs[e.id]+")"},on:{click:function(){return t.setBackground(e.id)}}},[a("a",{staticClass:"info",attrs:{href:"https://unsplash.com/@"+e.info.author}},[t._v(" "+t._s(e.info.authorName)+" ")])])})),0),t.backgroundSearchResult.length>0?a("a",{staticClass:"button is-primary is-centered is-load-more-button is-outlined noshadow",attrs:{disabled:t.backgroundService.loading},on:{click:function(){return t.searchBackgrounds(t.currentPage+1)}}},[t.backgroundService.loading?[t._v(" Loading... ")]:[t._v(" Load more photos ")]],2):t._e()]):t._e()])]):t._e()},ka=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v(" Set list background ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"unsplash-link"},[a("a",{attrs:{href:"https://unsplash.com",target:"_blank"}},[t._v("Powered by Unsplash")])])}],ba=(a("caad"),a("2532"),function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.apply(this,arguments)}return Object(m["a"])(a,[{key:"defaults",value:function(){return{id:0,url:"",thumb:"",info:{}}}}]),a}(S)),ga=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{getAll:"/backgrounds/unsplash/search",update:"/lists/{listId}/backgrounds/unsplash"})}return Object(m["a"])(a,[{key:"modelFactory",value:function(t){return new ba(t)}},{key:"modelUpdateFactory",value:function(t){return new xe(t)}},{key:"thumb",value:function(t){return this.http({url:"/backgrounds/unsplash/images/".concat(t.id,"/thumb"),method:"GET",responseType:"blob"}).then((function(t){return window.URL.createObjectURL(new Blob([t.data]))})).catch((function(t){return t}))}}]),a}(D),Ca=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){var t;return Object(h["a"])(this,a),t=e.call(this,{create:"/lists/{listId}/backgrounds/upload"}),Object(v["a"])(Object(I["a"])(t),"uploadProgress",0),t}return Object(m["a"])(a,[{key:"useCreateInterceptor",value:function(){return!1}},{key:"modelCreateFactory",value:function(t){return new xe(t)}},{key:"create",value:function(t,e){var a=this,s=new FormData;s.append("background",new Blob([e]),e.name);var i=this.setLoading();return this.http.put(this.getReplacedRoute(this.paths.create,{listId:t}),s,{headers:{"Content-Type":"multipart/form-data; boundary="+s._boundary},onUploadProgress:function(t){a.uploadProgress=Math.round(100*t.loaded/t.total)}}).catch((function(t){return a.errorHandler(t)})).then((function(t){return Promise.resolve(a.modelCreateFactory(t.data))})).finally((function(){a.uploadProgress=0,i()}))}}]),a}(D),wa={name:"background-settings",data:function(){return{backgroundSearchTerm:"",backgroundSearchResult:[],backgroundService:null,backgroundThumbs:{},currentPage:1,backgroundSearchTimeout:null,backgroundUploadService:null}},props:{listId:{default:0,required:!0}},computed:{unsplashBackgroundEnabled:function(){return this.$store.state.config.enabledBackgroundProviders.includes("unsplash")},uploadBackgroundEnabled:function(){return this.$store.state.config.enabledBackgroundProviders.includes("upload")}},created:function(){this.backgroundService=new ga,this.backgroundUploadService=new Ca,this.newBackgroundSearch()},methods:{newBackgroundSearch:function(){this.unsplashBackgroundEnabled&&(this.$set(this,"backgroundSearchResult",[]),this.$set(this,"backgroundThumbs",{}),this.searchBackgrounds())},searchBackgrounds:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null!==this.backgroundSearchTimeout&&clearTimeout(this.backgroundSearchTimeout),this.backgroundSearchTimeout=setTimeout((function(){t.currentPage=e,t.backgroundService.getAll({},{s:t.backgroundSearchTerm,p:e}).then((function(e){t.backgroundSearchResult=t.backgroundSearchResult.concat(e),e.forEach((function(e){t.backgroundService.thumb(e).then((function(a){t.$set(t.backgroundThumbs,e.id,a)}))}))})).catch((function(e){t.error(e,t)}))}),300)},setBackground:function(t){var e=this;this.backgroundService.loading||this.backgroundService.update({id:t,listId:this.listId}).then((function(t){e.$store.commit(wt,t),e.$store.commit("namespaces/setListInNamespaceById",t),e.success({message:"The background has been set successfully!"},e)})).catch((function(t){e.error(t,e)}))},uploadBackground:function(){var t=this;0!==this.$refs.backgroundUploadInput.files.length&&this.backgroundUploadService.create(this.listId,this.$refs.backgroundUploadInput.files[0]).then((function(e){t.$store.commit(wt,e),t.$store.commit("namespaces/setListInNamespaceById",e),t.success({message:"The background has been set successfully!"},t)})).catch((function(e){t.error(e,t)}))}}},ya=wa,_a=Object(z["a"])(ya,va,ka,!1,null,null,null),Ta=_a.exports,Da=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"color-picker-container"},[a("verte",{attrs:{menuPosition:t.menuPosition,picker:"square",model:"hex",enableAlpha:!1,rgbSliders:!0},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}}),a("a",{staticClass:"reset",on:{click:t.reset}},[t._v(" Reset Color ")])],1)},xa=[],Ia=a("36fc"),Sa=(a("bbb4"),{name:"colorPicker",data:function(){return{color:"",lastChangeTimeout:null}},components:{verte:Ia["a"]},props:{value:{required:!0},menuPosition:{type:String,default:"top"}},watch:{value:function(t){this.color=t},color:function(){this.update()}},mounted:function(){this.color=this.value},methods:{update:function(){var t=this;null!==this.lastChangeTimeout&&clearTimeout(this.lastChangeTimeout),this.lastChangeTimeout=setTimeout((function(){t.$emit("input",t.color),t.$emit("change")}),500)},reset:function(){this.color="",this.update()}}}),Oa=Sa,ja=Object(z["a"])(Oa,Da,xa,!1,null,null,null),Aa=ja.exports,Ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{options:t.namespaces,multiple:!1,searchable:!0,loading:t.namespaceService.loading,"internal-search":!0,placeholder:"Search for a namespace...",label:"title","track-by":"id"},on:{"search-change":t.findNamespaces,select:t.select},scopedSlots:t._u([{key:"clear",fn:function(e){return[0!==t.namespace.id?a("div",{staticClass:"multiselect__clear",on:{mousedown:function(a){return a.preventDefault(),a.stopPropagation(),t.clearAll(e.search)}}}):t._e()]}}]),model:{value:t.namespace,callback:function(e){t.namespace=e},expression:"namespace"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("No namespace found. Consider changing the search query.")])])},$a=[],Pa=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(t){var s;return Object(h["a"])(this,a),s=e.call(this,t),""!==s.hexColor&&"#"!==s.hexColor.substring(0,1)&&(s.hexColor="#"+s.hexColor),s.lists=s.lists.map((function(t){return new xe(t)})),s.owner=new O(s.owner),s.created=new Date(s.created),s.updated=new Date(s.updated),s}return Object(m["a"])(a,[{key:"defaults",value:function(){return{id:0,title:"",description:"",owner:O,lists:[],isArchived:!1,hexColor:"",created:null,updated:null}}}]),a}(S),Na=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{create:"/namespaces",get:"/namespaces/{id}",getAll:"/namespaces",update:"/namespaces/{id}",delete:"/namespaces/{id}"})}return Object(m["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(N["a"])(t.created),t.updated=Object(N["a"])(t.updated),t}},{key:"modelFactory",value:function(t){return new Pa(t)}},{key:"beforeUpdate",value:function(t){return t.hexColor=t.hexColor.substring(1,7),t}},{key:"beforeCreate",value:function(t){return t.hexColor=t.hexColor.substring(1,7),t}}]),a}(D),La={name:"namespace-search",data:function(){return{namespaceService:Na,namespace:Pa,namespaces:[]}},components:{multiselect:Re.a},created:function(){this.namespaceService=new Na},methods:{findNamespaces:function(t){var e=this;""!==t?this.namespaceService.getAll({},{s:t}).then((function(t){e.$set(e,"namespaces",t)})).catch((function(t){e.error(t,e)})):this.clearAll()},clearAll:function(){this.$set(this,"namespaces",[])},select:function(t){this.$emit("selected",t)}}},Ra=La,Ma=Object(z["a"])(Ra,Ea,$a,!1,null,null,null),Ba=Ma.exports,Ua=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(t){var s;return Object(h["a"])(this,a),s=e.call(this,t),s.list=new xe(s.list),s}return Object(m["a"])(a,[{key:"defaults",value:function(){return{listId:0,namespaceId:0,list:xe}}}]),a}(S),Fa=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{create:"/lists/{listId}/duplicate"})}return Object(m["a"])(a,[{key:"beforeCreate",value:function(t){return t.list=null,t}},{key:"modelFactory",value:function(t){return new Ua(t)}}]),a}(D),Wa={name:"EditList",data:function(){return{list:xe,listService:Ie,showDeleteModal:!1,manageUsersComponent:"",manageTeamsComponent:"",listDuplicateService:Fa,selectedNamespace:null}},components:{NamespaceSearch:Ba,ColorPicker:Aa,Background:Ta,Fancycheckbox:ht,LinkSharing:fa,manageSharing:ia},created:function(){this.listService=new Ie,this.listDuplicateService=new Fa,this.loadList()},watch:{$route:"loadList"},computed:{linkSharingEnabled:function(){return this.$store.state.config.linkSharingEnabled},userIsAdmin:function(){return this.list.owner&&this.list.owner.id===this.$store.state.auth.info.id}},methods:{loadList:function(){var t=this,e=new xe({id:this.$route.params.id});this.listService.get(e).then((function(e){t.$set(t,"list",e),t.$store.commit(wt,e),t.manageTeamsComponent="manageSharing",t.manageUsersComponent="manageSharing"})).catch((function(e){t.error(e,t)}))},submit:function(){var t=this;this.listService.update(this.list).then((function(e){t.$store.commit("namespaces/setListInNamespaceById",e),t.success({message:"The list was successfully updated."},t)})).catch((function(e){t.error(e,t)}))},deleteList:function(){var t=this;this.listService.delete(this.list).then((function(){t.success({message:"The list was successfully deleted."},t),ro.push({name:"home"})})).catch((function(e){t.error(e,t)}))},selectNamespace:function(t){this.selectedNamespace=t},duplicateList:function(){var t=this,e=new Ua({listId:this.list.id,namespaceId:this.selectedNamespace.id});this.listDuplicateService.create(e).then((function(e){t.$store.commit("namespaces/addListToNamespace",e.list),t.success({message:"The list was successfully duplicated."},t),ro.push({name:"list.index",params:{listId:e.list.id}})})).catch((function(e){t.error(e,t)}))}}},qa=Wa,Ga=Object(z["a"])(qa,Ee,$e,!1,null,null,null),Ha=Ga.exports,za=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content has-text-centered"},[a("ShowTasks",{attrs:{"start-date":t.startDate,"end-date":t.endDate}})],1)},Ya=[],Ka={name:"ShowTasksInRange",components:{ShowTasks:It},data:function(){return{startDate:new Date(this.$route.params.startDateUnix),endDate:new Date(this.$route.params.endDateUnix)}},watch:{$route:"setDates"},created:function(){this.setDates()},methods:{setDates:function(){switch(this.$route.params.type){case"week":this.startDate=new Date,this.endDate=new Date((new Date).getTime()+6048e5);break;case"month":this.startDate=new Date,this.endDate=new Date((new Date).setMonth((new Date).getMonth()+1));break}}}},Va=Ka,Ja=Object(z["a"])(Va,za,Ya,!1,null,null,null),Qa=Ja.exports,Xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loading?a("div",{staticClass:"message is-centered is-info"},[t._m(0)]):t._e()},Za=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-header"},[a("p",{staticClass:"has-text-centered"},[t._v(" Authenticating... ")])])}],ts={name:"LinkSharingAuth",data:function(){return{hash:"",loading:!0}},created:function(){this.auth()},methods:{auth:function(){var t=this;this.$store.dispatch("auth/linkShareAuth",this.$route.params.share).then((function(e){t.loading=!1,ro.push({name:"list.list",params:{listId:e.list_id}})})).catch((function(e){t.error(e,t)}))}}},es=ts,as=Object(z["a"])(es,Xa,Za,!1,null,null,null),ss=as.exports,is=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.target!==e.currentTarget?null:t.close()}}},[a("div",{staticClass:"scrolling-content"},[a("a",{staticClass:"close",on:{click:function(e){return t.close()}}},[a("icon",{attrs:{icon:"times"}})],1),a("task-detail-view")],1)])])},ns=[],rs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loader-container task-view-container",class:{"is-loading":t.taskService.loading}},[a("div",{staticClass:"task-view"},[a("div",{staticClass:"heading"},[""===t.task.identifier?a("h1",{staticClass:"title task-id"},[t._v(" #"+t._s(t.task.index)+" ")]):a("h1",{staticClass:"title task-id"},[t._v(" "+t._s(t.task.identifier)+" ")]),t.task.done?a("div",{staticClass:"is-done"},[t._v("Done")]):t._e(),a("h1",{ref:"taskTitle",staticClass:"title input",attrs:{contenteditable:"true"},on:{focusout:function(e){return t.saveTaskOnChange()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.saveTaskOnChange():null}}},[t._v(t._s(t.task.title))])]),t.parent&&t.parent.namespace&&t.parent.list?a("h6",{staticClass:"subtitle"},[t._v(" "+t._s(t.parent.namespace.title)+" > "),a("router-link",{attrs:{to:{name:t.listViewName,params:{listId:t.parent.list.id}}}},[t._v(" "+t._s(t.parent.list.title)+" ")])],1):t._e(),a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-two-thirds"},[a("div",{staticClass:"columns details"},[t.activeFields.assignees?a("div",{staticClass:"column assignees"},[a("div",{staticClass:"detail-title"},[a("icon",{attrs:{icon:"users"}}),t._v(" Assignees ")],1),a("edit-assignees",{ref:"assignees",attrs:{"task-id":t.task.id,"list-id":t.task.listId,"initial-assignees":t.task.assignees}})],1):t._e(),t.activeFields.priority?a("div",{staticClass:"column"},[a("div",{staticClass:"detail-title"},[a("icon",{attrs:{icon:["far","star"]}}),t._v(" Priority ")],1),a("priority-select",{ref:"priority",on:{change:t.saveTask},model:{value:t.task.priority,callback:function(e){t.$set(t.task,"priority",e)},expression:"task.priority"}})],1):t._e(),t.activeFields.dueDate?a("div",{staticClass:"column"},[a("div",{staticClass:"detail-title"},[a("icon",{attrs:{icon:"calendar"}}),t._v(" Due Date ")],1),a("div",{staticClass:"date-input"},[a("flat-pickr",{ref:"dueDate",staticClass:"input",class:{disabled:t.taskService.loading},attrs:{disabled:t.taskService.loading,config:t.flatPickerConfig,placeholder:"Click here to set a due date"},on:{"on-close":t.saveTask},model:{value:t.dueDate,callback:function(e){t.dueDate=e},expression:"dueDate"}}),t.dueDate?a("a",{on:{click:function(){t.dueDate=t.task.dueDate=null,t.saveTask()}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"times"}})],1)]):t._e()],1)]):t._e(),t.activeFields.percentDone?a("div",{staticClass:"column"},[a("div",{staticClass:"detail-title"},[a("icon",{attrs:{icon:"percent"}}),t._v(" Percent Done ")],1),a("percent-done-select",{ref:"percentDone",on:{change:t.saveTask},model:{value:t.task.percentDone,callback:function(e){t.$set(t.task,"percentDone",e)},expression:"task.percentDone"}})],1):t._e(),t.activeFields.startDate?a("div",{staticClass:"column"},[a("div",{staticClass:"detail-title"},[a("icon",{attrs:{icon:"calendar-week"}}),t._v(" Start Date ")],1),a("div",{staticClass:"date-input"},[a("flat-pickr",{ref:"startDate",staticClass:"input",class:{disabled:t.taskService.loading},attrs:{disabled:t.taskService.loading,config:t.flatPickerConfig,placeholder:"Click here to set a start date"},on:{"on-close":t.saveTask},model:{value:t.task.startDate,callback:function(e){t.$set(t.task,"startDate",e)},expression:"task.startDate"}}),t.task.startDate?a("a",{on:{click:function(){t.task.startDate=null,t.saveTask()}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"times"}})],1)]):t._e()],1)]):t._e(),t.activeFields.endDate?a("div",{staticClass:"column"},[a("div",{staticClass:"detail-title"},[a("icon",{attrs:{icon:"calendar-week"}}),t._v(" End Date ")],1),a("div",{staticClass:"date-input"},[a("flat-pickr",{ref:"endDate",staticClass:"input",class:{disabled:t.taskService.loading},attrs:{disabled:t.taskService.loading,config:t.flatPickerConfig,placeholder:"Click here to set an end date"},on:{"on-close":t.saveTask},model:{value:t.task.endDate,callback:function(e){t.$set(t.task,"endDate",e)},expression:"task.endDate"}}),t.task.endDate?a("a",{on:{click:function(){t.task.endDate=null,t.saveTask()}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"times"}})],1)]):t._e()],1)]):t._e(),t.activeFields.reminders?a("div",{staticClass:"column"},[a("div",{staticClass:"detail-title"},[a("icon",{attrs:{icon:"history"}}),t._v(" Reminders ")],1),a("reminders",{ref:"reminders",on:{change:t.saveTask},model:{value:t.task.reminderDates,callback:function(e){t.$set(t.task,"reminderDates",e)},expression:"task.reminderDates"}})],1):t._e(),t.activeFields.repeatAfter?a("div",{staticClass:"column"},[a("div",{staticClass:"detail-title"},[a("icon",{attrs:{icon:["far","clock"]}}),t._v(" Repeat ")],1),a("repeat-after",{ref:"repeatAfter",on:{change:t.saveTask},model:{value:t.task,callback:function(e){t.task=e},expression:"task"}})],1):t._e(),t.activeFields.color?a("div",{staticClass:"column"},[a("div",{staticClass:"detail-title"},[a("icon",{attrs:{icon:"fill-drip"}}),t._v(" Color ")],1),a("color-picker",{ref:"color",attrs:{"menu-position":"bottom"},on:{change:t.saveTask},model:{value:t.taskColor,callback:function(e){t.taskColor=e},expression:"taskColor"}})],1):t._e()]),t.activeFields.labels?a("div",{staticClass:"labels-list details"},[a("div",{staticClass:"detail-title"},[a("span",{staticClass:"icon is-grey"},[a("icon",{attrs:{icon:"tags"}})],1),t._v(" Labels ")]),a("edit-labels",{ref:"labels",attrs:{"task-id":t.taskId},model:{value:t.task.labels,callback:function(e){t.$set(t.task,"labels",e)},expression:"task.labels"}})],1):t._e(),a("div",{staticClass:"details content",class:{"has-top-border":t.activeFields.labels}},[a("h3",[a("span",{staticClass:"icon is-grey"},[a("icon",{attrs:{icon:"align-left"}})],1),t._v(" Description ")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.task.description,expression:"task.description"}],staticClass:"textarea",attrs:{rows:"6",placeholder:"Click here to enter a description..."},domProps:{value:t.task.description},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.saveTaskIfDescriptionChanged(e):null},keydown:t.setDescriptionChanged,change:t.saveTaskIfDescriptionChanged,input:function(e){e.target.composing||t.$set(t.task,"description",e.target.value)}}})]),t.activeFields.attachments?a("div",{staticClass:"content attachments has-top-border"},[a("attachments",{ref:"attachments",attrs:{"task-id":t.taskId,"initial-attachments":t.task.attachments}})],1):t._e(),t.activeFields.relatedTasks?a("div",{staticClass:"content details has-top-border"},[a("h3",[a("span",{staticClass:"icon is-grey"},[a("icon",{attrs:{icon:"tasks"}})],1),t._v(" Related Tasks ")]),a("related-tasks",{ref:"relatedTasks",attrs:{"task-id":t.taskId,"list-id":t.task.listId,"initial-related-tasks":t.task.relatedTasks,"show-no-relations-notice":!0}})],1):t._e(),t.activeFields.moveList?a("div",{staticClass:"content details has-top-border"},[a("h3",[a("span",{staticClass:"icon is-grey"},[a("icon",{attrs:{icon:"list"}})],1),t._v(" Move task to a different list ")]),a("div",{staticClass:"field has-addons"},[a("div",{staticClass:"control is-expanded"},[a("list-search",{ref:"moveList",on:{selected:t.changeList}})],1)])]):t._e(),a("comments",{attrs:{"task-id":t.taskId}})],1),a("div",{staticClass:"column is-one-third action-buttons"},[a("a",{staticClass:"button is-outlined noshadow has-no-border",class:{"is-success":!t.task.done},on:{click:function(e){return t.toggleTaskDone()}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"check-double"}})],1),t.task.done?[t._v(" Mark as undone ")]:[t._v(" Done! ")]],2),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("assignees")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"users"}})],1),t._v(" Assign this task to a user ")]),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("labels")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"tags"}})],1),t._v(" Add labels ")]),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("reminders")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"history"}})],1),t._v(" Set Reminders ")]),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("dueDate")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"calendar"}})],1),t._v(" Set Due Date ")]),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("startDate")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"calendar-week"}})],1),t._v(" Set a Start Date ")]),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("endDate")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"calendar-week"}})],1),t._v(" Set an End Date ")]),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("repeatAfter")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:["far","clock"]}})],1),t._v(" Set a repeating interval ")]),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("priority")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:["far","star"]}})],1),t._v(" Set Priority ")]),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("percentDone")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"percent"}})],1),t._v(" Set Percent Done ")]),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("attachments")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"paperclip"}})],1),t._v(" Add attachments ")]),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("relatedTasks")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"tasks"}})],1),t._v(" Add task relations ")]),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("moveList")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"list"}})],1),t._v(" Move task ")]),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("color")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"fill-drip"}})],1),t._v(" Set task color ")]),a("a",{staticClass:"button is-danger is-outlined noshadow has-no-border",on:{click:function(e){t.showDeleteModal=!0}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"trash-alt"}})],1),t._v(" Delete task ")])])])]),t.showDeleteModal?a("modal",{on:{close:function(e){t.showDeleteModal=!1},submit:function(e){return t.deleteTask()}}},[a("span",{attrs:{slot:"header"},slot:"header"},[t._v("Delete this task")]),a("p",{attrs:{slot:"text"},slot:"text"},[t._v(" Are you sure you want to remove this task? "),a("br"),t._v(" This will also remove all attachments, reminders and relations associated with this task and "),a("b",[t._v("cannot be undone!")])])]):t._e()],1)},os=[],cs=(a("1276"),a("b8e5")),ls=a("c38f"),ds=a.n(ls),us=(a("0952"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.priority,expression:"priority"}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.priority=e.target.multiple?a:a[0]},t.updateData]}},[a("option",{domProps:{value:t.priorities.UNSET}},[t._v("Unset")]),a("option",{domProps:{value:t.priorities.LOW}},[t._v("Low")]),a("option",{domProps:{value:t.priorities.MEDIUM}},[t._v("Medium")]),a("option",{domProps:{value:t.priorities.HIGH}},[t._v("High")]),a("option",{domProps:{value:t.priorities.URGENT}},[t._v("Urgent")]),a("option",{domProps:{value:t.priorities.DO_NOW}},[t._v("DO NOW")])])])}),hs=[],ms={name:"prioritySelect",data:function(){return{priorities:q,priority:0}},props:{value:{default:0,type:Number}},watch:{value:function(t){this.priority=t}},mounted:function(){this.priority=this.value},methods:{updateData:function(){this.$emit("input",this.priority),this.$emit("change")}}},ps=ms,fs=Object(z["a"])(ps,us,hs,!1,null,null,null),vs=fs.exports,ks=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model.number",value:t.percentDone,expression:"percentDone",modifiers:{number:!0}}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var a="_value"in e?e._value:e.value;return t._n(a)}));t.percentDone=e.target.multiple?a:a[0]},t.updateData]}},[a("option",{attrs:{value:"0"}},[t._v("0%")]),a("option",{attrs:{value:"0.1"}},[t._v("10%")]),a("option",{attrs:{value:"0.2"}},[t._v("20%")]),a("option",{attrs:{value:"0.3"}},[t._v("30%")]),a("option",{attrs:{value:"0.4"}},[t._v("40%")]),a("option",{attrs:{value:"0.5"}},[t._v("50%")]),a("option",{attrs:{value:"0.6"}},[t._v("60%")]),a("option",{attrs:{value:"0.7"}},[t._v("70%")]),a("option",{attrs:{value:"0.8"}},[t._v("80%")]),a("option",{attrs:{value:"0.9"}},[t._v("90%")]),a("option",{attrs:{value:"1"}},[t._v("100%")])])])},bs=[],gs={name:"percentDoneSelect",data:function(){return{percentDone:0}},props:{value:{default:0,type:Number}},watch:{value:function(t){this.percentDone=t}},mounted:function(){this.percentDone=this.value},methods:{updateData:function(){this.$emit("input",this.percentDone),this.$emit("change")}}},Cs=gs,ws=Object(z["a"])(Cs,ks,bs,!1,null,null,null),ys=ws.exports,_s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{multiple:!0,"close-on-select":!1,"clear-on-select":!0,"options-limit":300,"hide-selected":!0,options:t.foundLabels,searchable:!0,loading:t.labelService.loading||t.labelTaskService.loading,"internal-search":!0,placeholder:"Type to add a new label...",label:"title","track-by":"id",taggable:!0,showNoOptions:!1,"tag-placeholder":"Add this as new label"},on:{"search-change":t.findLabel,select:t.addLabel,tag:t.createAndAddLabel},scopedSlots:t._u([{key:"tag",fn:function(e){var s=e.option;return[a("span",{staticClass:"tag",style:{background:s.hexColor,color:s.textColor}},[a("span",[t._v(t._s(s.title))]),a("a",{staticClass:"delete is-small",on:{click:function(e){return t.removeLabel(s)}}})])]}},{key:"clear",fn:function(e){return[t.labels.length?a("div",{staticClass:"multiselect__clear",on:{mousedown:function(a){return a.preventDefault(),a.stopPropagation(),t.clearAllLabels(e.search)}}}):t._e()]}}]),model:{value:t.labels,callback:function(e){t.labels=e},expression:"labels"}})},Ts=[],Ds=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.apply(this,arguments)}return Object(m["a"])(a,[{key:"defaults",value:function(){return{id:0,taskId:0,labelId:0}}}]),a}(S),xs=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{create:"/tasks/{taskId}/labels",getAll:"/tasks/{taskId}/labels",delete:"/tasks/{taskId}/labels/{labelId}"})}return Object(m["a"])(a,[{key:"modelFactory",value:function(t){return new Ds(t)}}]),a}(D),Is={name:"edit-labels",props:{value:{default:function(){return[]},type:Array},taskId:{type:Number,required:!0}},data:function(){return{labelService:R,labelTaskService:xs,foundLabels:[],labelTimeout:null,labels:[],searchQuery:""}},components:{multiselect:Re.a},watch:{value:function(t){this.labels=t}},created:function(){this.labelService=new R,this.labelTaskService=new xs,this.labels=this.value},methods:{findLabel:function(t){var e=this;this.searchQuery=t,""!==t?(null!==this.labelTimeout&&clearTimeout(this.labelTimeout),this.labelTimeout=setTimeout((function(){e.labelService.getAll({},{s:t}).then((function(t){e.$set(e,"foundLabels",Object(g["differenceWith"])(t,e.labels,(function(t,e){return t.id===e.id}))),e.labelTimeout=null})).catch((function(t){e.error(t,e)}))}),300)):this.clearAllLabels()},clearAllLabels:function(){this.$set(this,"foundLabels",[])},addLabel:function(t){var e=this;this.$store.dispatch("tasks/addLabel",{label:t,taskId:this.taskId}).then((function(){e.$emit("input",e.labels)})).catch((function(t){e.error(t,e)}))},removeLabel:function(t){var e=this;this.$store.dispatch("tasks/removeLabel",{label:t,taskId:this.taskId}).then((function(){for(var a in e.labels)e.labels[a].id===t.id&&e.labels.splice(a,1);e.$emit("input",e.labels)})).catch((function(t){e.error(t,e)}))},createAndAddLabel:function(t){var e=this,a=new A({title:t});this.labelService.create(a).then((function(t){e.addLabel(t),e.labels.push(t)})).catch((function(t){e.error(t,e)}))}}},Ss=Is,Os=Object(z["a"])(Ss,_s,Ts,!1,null,"f40fc872",null),js=Os.exports,As=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{multiple:!0,"close-on-select":!1,"clear-on-select":!0,"options-limit":300,"hide-selected":!0,options:t.foundUsers,searchable:!0,loading:t.listUserService.loading,"internal-search":!0,placeholder:"Type to assign a user...",label:"username","track-by":"id","select-label":"Assign this user",showNoOptions:!1},on:{"search-change":t.findUser,select:t.addAssignee},scopedSlots:t._u([{key:"tag",fn:function(e){var s=e.option;return[a("user",{attrs:{user:s,"show-username":!1,"avatar-size":30}}),a("a",{staticClass:"remove-assignee",on:{click:function(e){return t.removeAssignee(s)}}},[a("icon",{attrs:{icon:"times"}})],1)]}},{key:"clear",fn:function(e){return[null!==t.newAssignee&&0!==t.newAssignee.id?a("div",{staticClass:"multiselect__clear",on:{mousedown:function(a){return a.preventDefault(),a.stopPropagation(),t.clearAllFoundUsers(e.search)}}}):t._e()]}}]),model:{value:t.assignees,callback:function(e){t.assignees=e},expression:"assignees"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("No user found. Consider changing the search query.")])])},Es=[],$s=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{getAll:"/lists/{listId}/listusers"})}return Object(m["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(N["a"])(t.created),t.updated=Object(N["a"])(t.updated),t}},{key:"modelFactory",value:function(t){return new O(t)}}]),a}(D),Ps=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(t){var s;return Object(h["a"])(this,a),s=e.call(this,t),s.created=new Date(s.created),s}return Object(m["a"])(a,[{key:"defaults",value:function(){return{created:null,userId:0,taskId:0}}}]),a}(S),Ns=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{create:"/tasks/{taskId}/assignees",delete:"/tasks/{taskId}/assignees/{userId}"})}return Object(m["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(N["a"])(t.created),t}},{key:"modelFactory",value:function(t){return new Ps(t)}}]),a}(D),Ls={name:"editAssignees",components:{User:rt,multiselect:Re.a},props:{taskId:{type:Number,required:!0},listId:{type:Number,required:!0},initialAssignees:{type:Array,default:function(){return[]}}},data:function(){return{newAssignee:O,listUserService:$s,foundUsers:[],assignees:[],taskAssigneeService:Ns}},created:function(){this.assignees=this.initialAssignees,this.listUserService=new $s,this.newAssignee=new O,this.taskAssigneeService=new Ns},watch:{initialAssignees:function(t){this.assignees=t}},methods:{addAssignee:function(t){var e=this;this.$store.dispatch("tasks/addAssignee",{user:t,taskId:this.taskId}).catch((function(t){e.error(t,e)}))},removeAssignee:function(t){var e=this;this.$store.dispatch("tasks/removeAssignee",{user:t,taskId:this.taskId}).then((function(){for(var a in e.assignees)e.assignees[a].id===t.id&&e.assignees.splice(a,1)})).catch((function(t){e.error(t,e)}))},findUser:function(t){var e=this;""!==t?this.listUserService.getAll({listId:this.listId},{s:t}).then((function(t){e.$set(e,"foundUsers",Object(g["differenceWith"])(t,e.assignees,(function(t,e){return t.id===e.id})))})).catch((function(t){e.error(t,e)})):this.clearAllFoundUsers()},clearAllFoundUsers:function(){this.$set(this,"foundUsers",[])}}},Rs=Ls,Ms=Object(z["a"])(Rs,As,Es,!1,null,null,null),Bs=Ms.exports,Us=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"attachments"},[a("h3",[a("span",{staticClass:"icon is-grey"},[a("icon",{attrs:{icon:"paperclip"}})],1),t._v(" Attachments "),a("a",{staticClass:"button is-primary is-outlined is-small noshadow",attrs:{disabled:t.attachmentService.loading},on:{click:function(e){return t.$refs.files.click()}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"cloud-upload-alt"}})],1),t._v(" Upload attachment ")])]),a("input",{ref:"files",attrs:{type:"file",id:"files",multiple:"",disabled:t.attachmentService.loading},on:{change:function(e){return t.uploadNewAttachment()}}}),t.attachmentService.uploadProgress>0?a("progress",{staticClass:"progress is-primary",attrs:{max:"100"},domProps:{value:t.attachmentService.uploadProgress}},[t._v(t._s(t.attachmentService.uploadProgress)+"%")]):t._e(),a("table",[t._m(0),t._l(t.attachments,(function(e){return a("tr",{key:e.id,staticClass:"attachment"},[a("td",[t._v(" "+t._s(e.file.name)+" ")]),a("td",[t._v(t._s(e.file.getHumanSize()))]),a("td",[t._v(t._s(e.file.mime))]),a("td",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.formatDate(e.created),expression:"formatDate(a.created)"}]},[t._v(t._s(t.formatDateSince(e.created)))]),a("td",[a("user",{attrs:{user:e.createdBy,"avatar-size":30}})],1),a("td",[a("div",{staticClass:"buttons has-addons"},[a("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Download this attachment",expression:"'Download this attachment'"}],staticClass:"button is-primary noshadow",on:{click:function(a){return t.downloadAttachment(e)}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"cloud-download-alt"}})],1)]),a("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete this attachment",expression:"'Delete this attachment'"}],staticClass:"button is-danger noshadow",on:{click:function(){t.attachmentToDelete=e,t.showDeleteModal=!0}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"trash-alt"}})],1)])])])])}))],2),a("div",{staticClass:"dropzone",class:{hidden:!t.showDropzone}},[a("div",{staticClass:"drop-hint"},[a("div",{staticClass:"icon"},[a("icon",{attrs:{icon:"cloud-upload-alt"}})],1),a("div",{staticClass:"hint"},[t._v(" Drop files here to upload ")])])]),t.showDeleteModal?a("modal",{on:{close:function(e){t.showDeleteModal=!1},submit:function(e){return t.deleteAttachment()}}},[a("span",{attrs:{slot:"header"},slot:"header"},[t._v("Delete attachment")]),a("p",{attrs:{slot:"text"},slot:"text"},[t._v("Are you sure you want to delete the attachment "+t._s(t.attachmentToDelete.file.name)+"?"),a("br"),a("b",[t._v("This CANNOT BE UNDONE!")])])]):t._e()],1)},Fs=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("Name")]),a("th",[t._v("Size")]),a("th",[t._v("Type")]),a("th",[t._v("Date")]),a("th",[t._v("Created By")]),a("th",[t._v("Action")])])}],Ws={name:"attachments",components:{User:rt},data:function(){return{attachments:[],attachmentService:L,showDropzone:!1,showDeleteModal:!1,attachmentToDelete:$}},props:{taskId:{required:!0,type:Number},initialAttachments:{type:Array}},created:function(){this.attachmentService=new L,this.attachments=this.initialAttachments},mounted:function(){var t=this;document.addEventListener("dragenter",(function(e){e.stopPropagation(),e.preventDefault(),t.showDropzone=!0})),window.addEventListener("dragleave",(function(e){e.stopPropagation(),e.preventDefault(),t.showDropzone=!1})),document.addEventListener("dragover",(function(e){e.stopPropagation(),e.preventDefault(),t.showDropzone=!0})),document.addEventListener("drop",(function(e){e.stopPropagation(),e.preventDefault();var a=e.dataTransfer.files;t.uploadFiles(a),t.showDropzone=!1}))},watch:{initialAttachments:function(t){this.attachments=t}},methods:{downloadAttachment:function(t){this.attachmentService.download(t)},uploadNewAttachment:function(){0!==this.$refs.files.files.length&&this.uploadFiles(this.$refs.files.files)},uploadFiles:function(t){var e=this,a=new $({taskId:this.taskId});this.attachmentService.create(a,t).then((function(t){null!==t.success&&t.success.forEach((function(t){e.attachments.push(t),e.$store.dispatch("tasks/addTaskAttachment",{taskId:e.taskId,attachment:t})})),null!==t.errors&&t.errors.forEach((function(t){e.error(t)}))})).catch((function(t){e.error(t,e)}))},deleteAttachment:function(){var t=this;this.attachmentService.delete(this.attachmentToDelete).then((function(e){for(var a in t.attachments)t.attachments[a].id===t.attachmentToDelete.id&&t.attachments.splice(a,1);t.success(e,t)})).catch((function(e){t.error(e,t)})).finally((function(){t.showDeleteModal=!1}))}}},qs=Ws,Gs=Object(z["a"])(qs,Us,Fs,!1,null,null,null),Hs=Gs.exports,zs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-relations"},[a("label",{staticClass:"label"},[t._v("New Task Relation")]),a("div",{staticClass:"field"},[a("multiselect",{attrs:{options:t.foundTasks,multiple:!1,searchable:!0,loading:t.taskService.loading,"internal-search":!0,placeholder:"Type search for a new task to add as related...",label:"title","track-by":"id",taggable:!0,showNoOptions:!1,"tag-placeholder":"Add this as new related task"},on:{"search-change":t.findTasks,tag:t.createAndRelateTask},scopedSlots:t._u([{key:"clear",fn:function(e){return[null!==t.newTaskRelationTask&&0!==t.newTaskRelationTask.id?a("div",{staticClass:"multiselect__clear",on:{mousedown:function(a){return a.preventDefault(),a.stopPropagation(),t.clearAllFoundTasks(e.search)}}}):t._e()]}}]),model:{value:t.newTaskRelationTask,callback:function(e){t.newTaskRelationTask=e},expression:"newTaskRelationTask"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("No task found. Consider changing the search query.")])])],1),a("div",{staticClass:"field has-addons"},[a("div",{staticClass:"control is-expanded"},[a("div",{staticClass:"select is-fullwidth has-defaults"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.newTaskRelationKind,expression:"newTaskRelationKind"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.newTaskRelationKind=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"unset"}},[t._v("Select a relation kind")]),t._l(t.relationKinds,(function(e,s){return a("option",{key:s,domProps:{value:s}},[t._v(" "+t._s(e[0])+" ")])}))],2)])]),a("div",{staticClass:"control"},[a("a",{staticClass:"button is-primary",on:{click:function(e){return t.addTaskRelation()}}},[t._v("Add task Relation")])])]),t._l(t.relatedTasks,(function(e,s){return a("div",{key:s,staticClass:"related-tasks"},[e.length>0?[a("span",{staticClass:"title"},[t._v(t._s(t.relationKindTitle(s,e.length)))]),a("div",{staticClass:"tasks noborder"},t._l(e,(function(e){return a("div",{key:e.id,staticClass:"task"},[a("router-link",{attrs:{to:{name:t.$route.name,params:{id:e.id}}}},[a("span",{staticClass:"tasktext",class:{done:e.done}},[e.listId!==t.listId?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"This task belongs to a different list.",expression:"'This task belongs to a different list.'"}],staticClass:"different-list"},[t._v(" "+t._s(null===t.$store.getters["lists/getListById"](e.listId)?"":t.$store.getters["lists/getListById"](e.listId).title)+" > ")]):t._e(),t._v(" "+t._s(e.title)+" ")])]),a("a",{staticClass:"remove",on:{click:function(){t.showDeleteModal=!0,t.relationToDelete={relationKind:s,otherTaskId:e.id}}}},[a("icon",{attrs:{icon:"trash-alt"}})],1)],1)})),0)]:t._e()],2)})),t.showNoRelationsNotice&&0===Object.keys(t.relatedTasks).length?a("p",{staticClass:"none"},[t._v(" No task relations yet. ")]):t._e(),t.showDeleteModal?a("modal",{on:{close:function(e){t.showDeleteModal=!1},submit:function(e){return t.removeTaskRelation()}}},[a("span",{attrs:{slot:"header"},slot:"header"},[t._v("Delete Task Relation")]),a("p",{attrs:{slot:"text"},slot:"text"},[t._v("Are you sure you want to delete this task relation?"),a("br"),a("b",[t._v("This CANNOT BE UNDONE!")])])]):t._e()],2)},Ys=[],Ks=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(t){var s;return Object(h["a"])(this,a),s=e.call(this,t),s.createdBy=new O(s.createdBy),s.created=new Date(s.created),s}return Object(m["a"])(a,[{key:"defaults",value:function(){return{id:0,otherTaskId:0,taskId:0,relationKind:"",createdBy:O,created:null}}}]),a}(S),Vs=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{create:"/tasks/{taskId}/relations",delete:"/tasks/{taskId}/relations"})}return Object(m["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(N["a"])(t.created),t}},{key:"modelFactory",value:function(t){return new Ks(t)}}]),a}(D),Js={name:"relatedTasks",data:function(){return{relatedTasks:{},taskService:M,foundTasks:[],relationKinds:cs,newTaskRelationTask:P,newTaskRelationKind:"related",taskRelationService:Vs,showDeleteModal:!1,relationToDelete:{}}},components:{multiselect:Re.a},props:{taskId:{type:Number,required:!0},initialRelatedTasks:{type:Object,default:function(){}},showNoRelationsNotice:{type:Boolean,default:!1},listId:{type:Number,default:0}},created:function(){this.taskService=new M,this.taskRelationService=new Vs,this.newTaskRelationTask=new P},watch:{initialRelatedTasks:function(t){this.relatedTasks=t}},mounted:function(){this.relatedTasks=this.initialRelatedTasks},methods:{findTasks:function(t){var e=this;""!==t?this.taskService.getAll({},{s:t}).then((function(t){e.$set(e,"foundTasks",t)})).catch((function(t){e.error(t,e)})):this.clearAllFoundTasks()},clearAllFoundTasks:function(){this.$set(this,"foundTasks",[])},addTaskRelation:function(){var t=this,e=new Ks({taskId:this.taskId,otherTaskId:this.newTaskRelationTask.id,relationKind:this.newTaskRelationKind});this.taskRelationService.create(e).then((function(){t.relatedTasks[t.newTaskRelationKind]||t.$set(t.relatedTasks,t.newTaskRelationKind,[]),t.relatedTasks[t.newTaskRelationKind].push(t.newTaskRelationTask),t.newTaskRelationKind="unset",t.newTaskRelationTask=new P})).catch((function(e){t.error(e,t)}))},removeTaskRelation:function(){var t=this,e=new Ks({relationKind:this.relationToDelete.relationKind,taskId:this.taskId,otherTaskId:this.relationToDelete.otherTaskId});this.taskRelationService.delete(e).then((function(){Object.keys(t.relatedTasks).forEach((function(e){for(var a in t.relatedTasks[e])t.relatedTasks[e][a].id===t.relationToDelete.otherTaskId&&e===t.relationToDelete.relationKind&&t.relatedTasks[e].splice(a,1)}))})).catch((function(e){t.error(e,t)})).finally((function(){t.showDeleteModal=!1}))},createAndRelateTask:function(t){var e=this,a=new P({title:t,listId:this.listId});this.taskService.create(a).then((function(t){e.newTaskRelationTask=t,e.addTaskRelation()})).catch((function(t){e.error(t,e)}))},relationKindTitle:function(t,e){return e>1?cs[t][1]:cs[t][0]}}},Qs=Js,Xs=Object(z["a"])(Qs,zs,Ys,!1,null,null,null),Zs=Xs.exports,ti=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"control repeat-after-input columns"},[a("p",{staticClass:"column is-1"},[t._v(" Each ")]),a("div",{staticClass:"column is-7 field has-addons"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.repeatAfter.amount,expression:"repeatAfter.amount"}],staticClass:"input",attrs:{placeholder:"Specify an amount..."},domProps:{value:t.repeatAfter.amount},on:{change:t.updateData,input:function(e){e.target.composing||t.$set(t.repeatAfter,"amount",e.target.value)}}})]),a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.repeatAfter.type,expression:"repeatAfter.type"}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.repeatAfter,"type",e.target.multiple?a:a[0])},t.updateData]}},[a("option",{attrs:{value:"hours"}},[t._v("Hours")]),a("option",{attrs:{value:"days"}},[t._v("Days")]),a("option",{attrs:{value:"weeks"}},[t._v("Weeks")]),a("option",{attrs:{value:"months"}},[t._v("Months")]),a("option",{attrs:{value:"years"}},[t._v("Years")])])])])]),a("fancycheckbox",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"When marking the task as done, all dates will be set relative to the current date rather than the date they had before.",expression:"'When marking the task as done, all dates will be set relative to the current date rather than the date they had before.'"}],staticClass:"column",on:{change:t.updateData},model:{value:t.task.repeatFromCurrentDate,callback:function(e){t.$set(t.task,"repeatFromCurrentDate",e)},expression:"task.repeatFromCurrentDate"}},[t._v(" Repeat from current date ")])],1)},ei=[],ai={name:"repeatAfter",components:{Fancycheckbox:ht},data:function(){return{task:{},repeatAfter:{amount:0,type:""}}},props:{value:{default:function(){},required:!0}},watch:{value:function(t){this.task=t,"undefined"!==typeof t.repeatAfter&&(this.repeatAfter=t.repeatAfter)}},mounted:function(){this.task=this.value,"undefined"!==typeof this.value.repeatAfter&&(this.repeatAfter=this.value.repeatAfter)},methods:{updateData:function(){this.task.repeatAfter=this.repeatAfter,this.$emit("input",this.task),this.$emit("change")}}},si=ai,ii=(a("8968"),Object(z["a"])(si,ti,ei,!1,null,"0985fd5b",null)),ni=ii.exports,ri=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reminders"},t._l(t.reminders,(function(e,s){return a("div",{key:s,staticClass:"reminder-input",class:{overdue:e<t.nowUnix&&s!==t.reminders.length-1}},[a("flat-pickr",{attrs:{"v-model":t.reminders,config:t.flatPickerConfig,id:"taskreminderdate"+s,value:e,"data-index":s,placeholder:"Add a new reminder..."}}),s!==t.reminders.length-1?a("a",{on:{click:function(e){return t.removeReminderByIndex(s)}}},[a("icon",{attrs:{icon:"times"}})],1):t._e()],1)})),0)},oi=[],ci={name:"reminders",data:function(){return{reminders:[],lastReminder:0,nowUnix:new Date,flatPickerConfig:{altFormat:"j M Y H:i",altInput:!0,dateFormat:"Y-m-d H:i",enableTime:!0,onOpen:this.updateLastReminderDate,onClose:this.addReminderDate}}},props:{value:{default:function(){return[]},type:Array}},components:{flatPickr:ds.a},mounted:function(){this.reminders=this.value},watch:{value:function(t){this.reminders=t}},methods:{updateData:function(){this.$emit("input",this.reminders),this.$emit("change")},updateLastReminderDate:function(t){this.lastReminder=+new Date(t[0])},addReminderDate:function(t,e,a){var s=+new Date(t[0]);if(s!==this.lastReminder){var i=parseInt(a.input.dataset.index);this.reminders[i]=s;var n=this.reminders.length-1;n!==i||isNaN(s)||this.reminders.push(null),this.updateData()}},removeReminderByIndex:function(t){this.reminders.splice(t,1),this.reminders[this.reminders.length-1]=null,this.updateData()}}},li=ci,di=Object(z["a"])(li,ri,oi,!1,null,null,null),ui=di.exports,hi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content details has-top-border"},[a("h1",[a("span",{staticClass:"icon is-grey"},[a("icon",{attrs:{icon:["far","comments"]}})],1),t._v(" Comments ")]),a("div",{staticClass:"comments"},[t.taskCommentService.loading?a("progress",{staticClass:"progress is-small is-info",attrs:{max:"100"}},[t._v("Loading comments...")]):t._e(),t._l(t.comments,(function(e){return a("div",{key:e.id,staticClass:"media comment"},[a("figure",{staticClass:"media-left"},[a("img",{staticClass:"image is-avatar",attrs:{src:e.author.getAvatarUrl(48),alt:"",width:"48",height:"48"}})]),a("div",{staticClass:"media-content"},[t.isCommentEdit&&t.commentEdit.id===e.id?a("div",{staticClass:"form"},[a("div",{staticClass:"field"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentEdit.comment,expression:"commentEdit.comment"}],staticClass:"textarea",class:{"is-loading":t.taskCommentService.loading},attrs:{placeholder:"Add your comment..."},domProps:{value:t.commentEdit.comment},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.editComment():null},input:function(e){e.target.composing||t.$set(t.commentEdit,"comment",e.target.value)}}})]),a("div",{staticClass:"field"},[a("button",{staticClass:"button is-primary",class:{"is-loading":t.taskCommentService.loading},attrs:{disabled:""===t.commentEdit.comment},on:{click:function(e){return t.editComment()}}},[t._v("Comment")]),a("a",{on:{click:function(){return t.isCommentEdit=!1}}},[t._v("Cancel")])])]):a("div",{staticClass:"content"},[a("strong",[t._v(t._s(e.author.username))]),t._v(" "),a("small",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.formatDate(e.created),expression:"formatDate(c.created)"}]},[t._v(t._s(t.formatDateSince(e.created)))]),+new Date(e.created)!==+new Date(e.updated)?a("small",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.formatDate(e.updated),expression:"formatDate(c.updated)"}]},[t._v(" · edited "+t._s(t.formatDateSince(e.updated)))]):t._e(),a("br"),a("p",[t._v(" "+t._s(e.comment)+" ")]),a("div",{staticClass:"comment-actions"},[a("a",{on:{click:function(a){return t.toggleEdit(e)}}},[t._v("Edit")]),t._v(" · "),a("a",{on:{click:function(a){return t.toggleDelete(e.id)}}},[t._v("Remove")])])])])])})),a("div",{staticClass:"media comment"},[a("figure",{staticClass:"media-left"},[a("img",{staticClass:"image is-avatar",attrs:{src:t.userAvatar,alt:"",width:"48",height:"48"}})]),a("div",{staticClass:"media-content"},[a("div",{staticClass:"form"},[a("div",{staticClass:"field"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newComment.comment,expression:"newComment.comment"}],staticClass:"textarea",class:{"is-loading":t.taskCommentService.loading&&!t.isCommentEdit},attrs:{placeholder:"Add your comment..."},domProps:{value:t.newComment.comment},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.addComment():null},input:function(e){e.target.composing||t.$set(t.newComment,"comment",e.target.value)}}})]),a("div",{staticClass:"field"},[a("button",{staticClass:"button is-primary",class:{"is-loading":t.taskCommentService.loading&&!t.isCommentEdit},attrs:{disabled:""===t.newComment.comment},on:{click:function(e){return t.addComment()}}},[t._v("Comment")])])])])])],2),t.showDeleteModal?a("modal",{on:{close:function(e){t.showDeleteModal=!1},submit:function(e){return t.deleteComment()}}},[a("span",{attrs:{slot:"header"},slot:"header"},[t._v("Delete this comment")]),a("p",{attrs:{slot:"text"},slot:"text"},[t._v("Are you sure you want to delete this comment? "),a("br"),t._v("This "),a("b",[t._v("CANNOT BE UNDONE!")])])]):t._e()],1)},mi=[],pi=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(t){var s;return Object(h["a"])(this,a),s=e.call(this,t),s.author=new O(s.author),s.created=new Date(s.created),s.updated=new Date(s.updated),s}return Object(m["a"])(a,[{key:"defaults",value:function(){return{id:0,taskId:0,comment:"",author:O,created:null,update:null}}}]),a}(S),fi=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{create:"/tasks/{taskId}/comments",getAll:"/tasks/{taskId}/comments",get:"/tasks/{taskId}/comments/{id}",update:"/tasks/{taskId}/comments/{id}",delete:"/tasks/{taskId}/comments/{id}"})}return Object(m["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(N["a"])(t.created),t.updated=Object(N["a"])(t.updated),t}},{key:"modelFactory",value:function(t){return new pi(t)}}]),a}(D),vi={name:"comments",props:{taskId:{type:Number,required:!0}},data:function(){return{comments:[],showDeleteModal:!1,commentToDelete:pi,isCommentEdit:!1,commentEdit:pi,taskCommentService:fi,newComment:pi}},created:function(){this.taskCommentService=new fi,this.newComment=new pi({taskId:this.taskId}),this.commentEdit=new pi({taskId:this.taskId}),this.commentToDelete=new pi({taskId:this.taskId}),this.comments=[]},mounted:function(){this.loadComments()},watch:{taskId:function(){this.loadComments()}},computed:{userAvatar:function(){return this.$store.state.auth.info.getAvatarUrl(48)}},methods:{loadComments:function(){var t=this;this.taskCommentService.getAll({taskId:this.taskId}).then((function(e){t.$set(t,"comments",e)})).catch((function(e){t.error(e,t)}))},addComment:function(){var t=this;""!==this.newComment.comment&&this.taskCommentService.create(this.newComment).then((function(e){t.comments.push(e),t.newComment.comment=""})).catch((function(e){t.error(e,t)}))},toggleEdit:function(t){this.isCommentEdit=!this.isCommentEdit,this.commentEdit=t},toggleDelete:function(t){this.showDeleteModal=!this.showDeleteModal,this.commentToDelete.id=t},editComment:function(){var t=this;""!==this.commentEdit.comment&&(this.commentEdit.taskId=this.taskId,this.taskCommentService.update(this.commentEdit).then((function(e){for(var a in t.comments)t.comments[a].id===t.commentEdit.id&&t.$set(t.comments,a,e)})).catch((function(e){t.error(e,t)})).finally((function(){t.isCommentEdit=!1})))},deleteComment:function(){var t=this;this.taskCommentService.delete(this.commentToDelete).then((function(){for(var e in t.comments)t.comments[e].id===t.commentToDelete.id&&t.comments.splice(e,1)})).catch((function(e){t.error(e,t)})).finally((function(){t.showDeleteModal=!1}))}}},ki=vi,bi=Object(z["a"])(ki,hi,mi,!1,null,null,null),gi=bi.exports,Ci=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"control is-expanded",attrs:{options:t.foundLists,multiple:!1,searchable:!0,loading:t.listSerivce.loading,"internal-search":!0,placeholder:"Type to search for a list...",label:"title","track-by":"id",showNoOptions:!1},on:{"search-change":t.findLists,select:t.select},scopedSlots:t._u([{key:"clear",fn:function(e){return[null!==t.list&&0!==t.list.id?a("div",{staticClass:"multiselect__clear",on:{mousedown:function(a){return a.preventDefault(),a.stopPropagation(),t.clearAll(e.search)}}}):t._e()]}},{key:"option",fn:function(e){return[a("span",{staticClass:"list-namespace-title"},[t._v(t._s(t.namespace(e.option.namespaceId))+" >")]),t._v(" "+t._s(e.option.title)+" ")]}}]),model:{value:t.list,callback:function(e){t.list=e},expression:"list"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("No list found. Consider changing the search query.")])])},wi=[],yi={name:"listSearch",data:function(){return{listSerivce:Ie,list:xe,foundLists:[]}},components:{multiselect:Re.a},beforeMount:function(){this.listSerivce=new Ie,this.list=new xe},methods:{findLists:function(t){var e=this;""!==t?this.listSerivce.getAll({},{s:t}).then((function(t){e.$set(e,"foundLists",t)})).catch((function(t){e.error(t,e)})):this.clearAll()},clearAll:function(){this.$set(this,"foundLists",[])},select:function(t){this.$emit("selected",t)},namespace:function(t){var e=this.$store.getters["namespaces/getNamespaceById"](t);return null!==e?e.title:"Shared Lists"}}},_i=yi,Ti=Object(z["a"])(_i,Ci,wi,!1,null,null,null),Di=Ti.exports,xi={name:"TaskDetailView",components:{ColorPicker:Aa,ListSearch:Di,Reminders:ui,RepeatAfter:ni,RelatedTasks:Zs,Attachments:Hs,EditAssignees:Bs,EditLabels:js,PercentDoneSelect:ys,PrioritySelect:vs,Comments:gi,flatPickr:ds.a},data:function(){return{taskId:Number(this.$route.params.id),taskService:M,task:P,relationKinds:cs,dueDate:null,taskColor:"",showDeleteModal:!1,taskTitle:"",descriptionChanged:!1,listViewName:"list.list",priorities:q,flatPickerConfig:{altFormat:"j M Y H:i",altInput:!0,dateFormat:"Y-m-d H:i",enableTime:!0,time_24hr:!0},activeFields:{assignees:!1,priority:!1,dueDate:!1,percentDone:!1,startDate:!1,endDate:!1,reminders:!1,repeatAfter:!1,labels:!1,attachments:!1,relatedTasks:!1,moveList:!1,color:!1}}},watch:{$route:"loadTask"},created:function(){this.taskService=new M,this.task=new P},mounted:function(){var t=this.$route.name.split(".");t.length>2&&"detail"===t[2]&&(this.listViewName="list.".concat(t[1])),this.loadTask()},computed:{parent:function(){return this.task.listId?this.$store.getters["namespaces/getListAndNamespaceById"]?this.$store.getters["namespaces/getListAndNamespaceById"](this.task.listId):null:{namespace:null,list:null}}},methods:{loadTask:function(){var t=this;this.taskId=Number(this.$route.params.id),this.taskService.get({id:this.taskId}).then((function(e){t.$set(t,"task",e),t.taskTitle=t.task.title,t.taskColor=t.task.hexColor,t.setActiveFields()})).catch((function(e){t.error(e,t)}))},setActiveFields:function(){this.dueDate=this.task.dueDate?this.task.dueDate:null,this.task.startDate=this.task.startDate?this.task.startDate:null,this.task.endDate=this.task.endDate?this.task.endDate:null,this.activeFields.assignees=this.task.assignees.length>0,this.activeFields.priority=this.task.priority!==q.UNSET,this.activeFields.dueDate=null!==this.task.dueDate,this.activeFields.percentDone=this.task.percentDone>0,this.activeFields.startDate=null!==this.task.startDate,this.activeFields.endDate=null!==this.task.endDate,this.activeFields.reminders=this.task.reminderDates.length>1||window.innerWidth<769&&this.task.reminderDates.length>0,this.activeFields.repeatAfter=this.task.repeatAfter.amount>0,this.activeFields.labels=this.task.labels.length>0,this.activeFields.attachments=this.task.attachments.length>0,this.activeFields.relatedTasks=Object.keys(this.task.relatedTasks).length>0},saveTaskOnChange:function(){this.$refs.taskTitle.spellcheck=!1;var t=this.$refs.taskTitle.textContent;this.task.title=t,this.task.title!==this.taskTitle&&(this.saveTask(),this.taskTitle=t)},saveTask:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.task.dueDate=this.dueDate,this.task.hexColor=this.taskColor,null===this.task.endDate&&null!==this.task.startDate&&null!==this.task.dueDate&&(this.task.endDate=this.task.dueDate),this.$store.dispatch("tasks/update",this.task).then((function(a){t.$set(t,"task",a);var s=[];null!==e&&(s=[{title:"Undo",callback:e}],t.success({message:"The task was saved successfully."},t,s)),t.dueDate=t.task.dueDate,t.setActiveFields()})).catch((function(e){t.error(e,t)}))},setFieldActive:function(t){var e=this;this.activeFields[t]=!0,this.$nextTick((function(){return e.$refs[t].$el.focus()}))},deleteTask:function(){var t=this;this.$store.dispatch("tasks/delete",this.task).then((function(){t.success({message:"The task been deleted successfully."},t),ro.back()})).catch((function(e){t.error(e,t)}))},toggleTaskDone:function(){var t=this;this.task.done=!this.task.done,this.saveTask((function(){return t.toggleTaskDone()}))},setDescriptionChanged:function(t){"Enter"!==t.key&&"Control"!==t.key&&(this.descriptionChanged=!0)},saveTaskIfDescriptionChanged:function(){this.descriptionChanged&&(this.descriptionChanged=!1,this.saveTask())},changeList:function(t){this.task.listId=t.id,this.saveTask()}}},Ii=xi,Si=Object(z["a"])(Ii,rs,os,!1,null,null,null),Oi=Si.exports,ji={name:"TaskDetailViewModal",components:{TaskDetailView:Oi},methods:{close:function(){ro.back()}}},Ai=ji,Ei=Object(z["a"])(Ai,is,ns,!1,null,null,null),$i=Ei.exports,Pi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fullpage"},[a("a",{staticClass:"close",on:{click:function(e){return t.back()}}},[a("icon",{attrs:{icon:["far","times-circle"]}})],1),a("h3",[t._v("Create a new namespace")]),a("div",{staticClass:"field is-grouped"},[a("p",{staticClass:"control is-expanded",class:{"is-loading":t.namespaceService.loading}},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.namespace.title,expression:"namespace.title"}],staticClass:"input",class:{disabled:t.namespaceService.loading},attrs:{type:"text",placeholder:"The namespace's name goes here..."},domProps:{value:t.namespace.title},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.newNamespace()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.back()}],input:function(e){e.target.composing||t.$set(t.namespace,"title",e.target.value)}}})]),a("p",{staticClass:"control"},[a("button",{staticClass:"button is-success noshadow",attrs:{disabled:""===t.namespace.title},on:{click:function(e){return t.newNamespace()}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"plus"}})],1),t._v(" Add ")])])]),t.showError&&""===t.namespace.title?a("p",{staticClass:"help is-danger"},[t._v(" Please specify a title. ")]):t._e(),a("p",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"A namespace is a collection of lists you can share and use to organize your lists with.<br/>In fact, every list belongs to a namepace.",expression:"'A namespace is a collection of lists you can share and use to organize your lists with.<br/>In fact, every list belongs to a namepace.'",modifiers:{bottom:!0}}],staticClass:"small"},[t._v(" What's a namespace?")])])},Ni=[],Li={name:"NewNamespace",data:function(){return{showError:!1,namespace:Pa,namespaceService:Na}},created:function(){this.namespace=new Pa,this.namespaceService=new Na,this.$store.commit(Ct,!0)},methods:{newNamespace:function(){var t=this;""!==this.namespace.title?(this.showError=!1,this.namespaceService.create(this.namespace).then((function(e){t.$store.commit("namespaces/addNamespace",e),t.success({message:"The namespace was successfully created."},t),ro.back()})).catch((function(e){t.error(e,t)}))):this.showError=!0},back:function(){ro.go(-1)}}},Ri=Li,Mi=Object(z["a"])(Ri,Pi,Ni,!1,null,null,null),Bi=Mi.exports,Ui=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loader-container",class:{"is-loading":t.namespaceService.loading}},[t.namespace.isArchived?a("div",{staticClass:"notification is-warning"},[t._v(" This namespace is archived. It is not possible to create new lists or edit it. ")]):t._e(),a("div",{staticClass:"card"},[t._m(0),a("div",{staticClass:"card-content"},[a("div",{staticClass:"content"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.submit()}}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"namespacetext"}},[t._v("Namespace Name")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.namespace.title,expression:"namespace.title"}],staticClass:"input",class:{disabled:t.namespaceService.loading},attrs:{disabled:t.namespaceService.loading,type:"text",id:"namespacetext",placeholder:"The namespace text is here..."},domProps:{value:t.namespace.title},on:{input:function(e){e.target.composing||t.$set(t.namespace,"title",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"namespacedescription"}},[t._v("Description")]),a("div",{staticClass:"control"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.namespace.description,expression:"namespace.description"}],staticClass:"textarea",class:{disabled:t.namespaceService.loading},attrs:{disabled:t.namespaceService.loading,placeholder:"The namespaces description goes here...",id:"namespacedescription"},domProps:{value:t.namespace.description},on:{input:function(e){e.target.composing||t.$set(t.namespace,"description",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"isArchivedCheck"}},[t._v("Is Archived")]),a("div",{staticClass:"control"},[a("fancycheckbox",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"If a namespace is archived, you cannot create new lists or edit it.",expression:"'If a namespace is archived, you cannot create new lists or edit it.'"}],model:{value:t.namespace.isArchived,callback:function(e){t.$set(t.namespace,"isArchived",e)},expression:"namespace.isArchived"}},[t._v(" This namespace is archived ")])],1)]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Color")]),a("div",{staticClass:"control"},[a("color-picker",{model:{value:t.namespace.hexColor,callback:function(e){t.$set(t.namespace,"hexColor",e)},expression:"namespace.hexColor"}})],1)])]),a("div",{staticClass:"columns bigbuttons"},[a("div",{staticClass:"column"},[a("button",{staticClass:"button is-primary is-fullwidth",class:{"is-loading":t.namespaceService.loading},on:{click:function(e){return t.submit()}}},[t._v(" Save ")])]),a("div",{staticClass:"column is-1"},[a("button",{staticClass:"button is-danger is-fullwidth",class:{"is-loading":t.namespaceService.loading},on:{click:function(e){t.showDeleteModal=!0}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"trash-alt"}})],1)])])])])])]),a(t.manageUsersComponent,{tag:"component",attrs:{id:t.namespace.id,type:"namespace",shareType:"user",userIsAdmin:t.userIsAdmin}}),a(t.manageTeamsComponent,{tag:"component",attrs:{id:t.namespace.id,type:"namespace",shareType:"team",userIsAdmin:t.userIsAdmin}}),t.showDeleteModal?a("modal",{on:{close:function(e){t.showDeleteModal=!1},submit:function(e){return t.deleteNamespace()}}},[a("span",{attrs:{slot:"header"},slot:"header"},[t._v("Delete the namespace")]),a("p",{attrs:{slot:"text"},slot:"text"},[t._v("Are you sure you want to delete this namespace and all of its contents? "),a("br"),t._v("This includes lists & tasks and "),a("b",[t._v("CANNOT BE UNDONE!")])])]):t._e()],1)},Fi=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v(" Edit Namespace ")])])}],Wi={name:"EditNamespace",data:function(){return{namespaceService:Na,manageUsersComponent:"",manageTeamsComponent:"",namespace:Pa,showDeleteModal:!1}},components:{ColorPicker:Aa,Fancycheckbox:ht,manageSharing:ia},beforeMount:function(){this.namespace.id=this.$route.params.id},created:function(){this.namespaceService=new Na,this.namespace=new Pa,this.loadNamespace()},watch:{$route:"loadNamespace"},computed:{userIsAdmin:function(){return this.namespace.owner&&this.namespace.owner.id===this.$store.state.auth.info.id}},methods:{loadNamespace:function(){var t=this,e=new Pa({id:this.$route.params.id});this.namespaceService.get(e).then((function(e){t.$set(t,"namespace",e),t.manageTeamsComponent="manageSharing",t.manageUsersComponent="manageSharing"})).catch((function(e){t.error(e,t)}))},submit:function(){var t=this;this.namespaceService.update(this.namespace).then((function(e){t.$store.commit("namespaces/setNamespaceById",e),t.success({message:"The namespace was successfully updated."},t)})).catch((function(e){t.error(e,t)}))},deleteNamespace:function(){var t=this;this.namespaceService.delete(this.namespace).then((function(){t.success({message:"The namespace was successfully deleted."},t),ro.push({name:"home"})})).catch((function(e){t.error(e,t)}))}}},qi=Wi,Gi=Object(z["a"])(qi,Ui,Fi,!1,null,null,null),Hi=Gi.exports,zi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content namespaces-list"},[a("router-link",{staticClass:"button is-success new-namespace",attrs:{to:{name:"namespace.create"}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"plus"}})],1),t._v(" Create new namespace ")]),a("fancycheckbox",{staticClass:"show-archived-check",model:{value:t.showArchived,callback:function(e){t.showArchived=e},expression:"showArchived"}},[t._v(" Show Archived ")]),t._l(t.namespaces,(function(e){return a("div",{key:"n"+e.id,staticClass:"namespace"},[a("h1",[a("span",[t._v(t._s(e.title))]),e.isArchived?a("span",{staticClass:"is-archived"},[t._v(" Archived ")]):t._e()]),a("div",{staticClass:"lists"},[t._l(e.lists,(function(e){return[t.showArchived||!e.isArchived?a("router-link",{key:"l"+e.id,staticClass:"list",class:{"has-light-text":!t.colorIsDark(e.hexColor),"has-background":"undefined"!==typeof t.backgrounds[e.id]},style:{"background-color":e.hexColor,"background-image":"undefined"!==typeof t.backgrounds[e.id]&&"url("+t.backgrounds[e.id]+")"},attrs:{to:{name:"list.index",params:{listId:e.id}}}},[a("div",{staticClass:"is-archived-container"},[e.isArchived?a("span",{staticClass:"is-archived"},[t._v(" Archived ")]):t._e()]),a("div",{staticClass:"title"},[t._v(t._s(e.title))])]):t._e()]}))],2)])}))],2)},Yi=[],Ki={name:"ListNamespaces",components:{Fancycheckbox:ht},data:function(){return{showArchived:!1,backgrounds:{}}},computed:Object(l["b"])({namespaces:function(t){var e=this;return t.namespaces.namespaces.filter((function(t){return!!e.showArchived||!t.isArchived}))}}),created:function(){this.loadBackgroundsForLists()},methods:{loadBackgroundsForLists:function(){var t=this,e=new Ie;this.namespaces.forEach((function(a){a.lists.forEach((function(a){a.backgroundInformation&&e.background(a).then((function(e){t.$set(t.backgrounds,a.id,e)})).catch((function(e){t.error(e,t)}))}))}))}}},Vi=Ki,Ji=Object(z["a"])(Vi,zi,Yi,!1,null,null,null),Qi=Ji.exports,Xi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content loader-container",class:{"is-loading":t.teamService.loading}},[a("router-link",{staticClass:"button is-success button-right",attrs:{to:{name:"teams.create"}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"plus"}})],1),t._v(" New Team ")]),a("h1",[t._v("Teams")]),a("ul",{staticClass:"teams box"},t._l(t.teams,(function(e){return a("li",{key:e.id},[a("router-link",{attrs:{to:{name:"teams.edit",params:{id:e.id}}}},[t._v(" "+t._s(e.name)+" ")])],1)})),0)],1)},Zi=[],tn={name:"ListTeams",data:function(){return{teamService:Ze,teams:[]}},created:function(){this.teamService=new Ze,this.loadTeams()},methods:{loadTeams:function(){var t=this;this.teamService.getAll().then((function(e){t.$set(t,"teams",e)})).catch((function(e){t.error(e,t)}))}}},en=tn,an=Object(z["a"])(en,Xi,Zi,!1,null,null,null),sn=an.exports,nn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loader-container",class:{"is-loading":t.teamService.loading}},[t.userIsAdmin?a("div",{staticClass:"card is-fullwidth"},[t._m(0),a("div",{staticClass:"card-content"},[a("div",{staticClass:"content"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.submit()}}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"teamtext"}},[t._v("Team Name")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.team.name,expression:"team.name"}],staticClass:"input",class:{disabled:t.teamMemberService.loading},attrs:{disabled:t.teamMemberService.loading,type:"text",id:"teamtext",placeholder:"The team text is here..."},domProps:{value:t.team.name},on:{input:function(e){e.target.composing||t.$set(t.team,"name",e.target.value)}}})])]),t.showError&&""===t.team.name?a("p",{staticClass:"help is-danger"},[t._v(" Please specify a name. ")]):t._e(),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"teamdescription"}},[t._v("Description")]),a("div",{staticClass:"control"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.team.description,expression:"team.description"}],staticClass:"textarea",class:{disabled:t.teamService.loading},attrs:{disabled:t.teamService.loading,placeholder:"The teams description goes here...",id:"teamdescription"},domProps:{value:t.team.description},on:{input:function(e){e.target.composing||t.$set(t.team,"description",e.target.value)}}})])])]),a("div",{staticClass:"columns bigbuttons"},[a("div",{staticClass:"column"},[a("button",{staticClass:"button is-success is-fullwidth",class:{"is-loading":t.teamService.loading},on:{click:function(e){return t.submit()}}},[t._v(" Save ")])]),a("div",{staticClass:"column is-1"},[a("button",{staticClass:"button is-danger is-fullwidth",class:{"is-loading":t.teamService.loading},on:{click:function(e){t.showDeleteModal=!0}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"trash-alt"}})],1)])])])])])]):t._e(),a("div",{staticClass:"card is-fullwidth"},[t._m(1),a("div",{staticClass:"card-content content team-members"},[t.userIsAdmin?a("form",{staticClass:"add-member-form",on:{submit:function(e){return e.preventDefault(),t.addUser()}}},[a("div",{staticClass:"field is-grouped"},[a("p",{staticClass:"control has-icons-left is-expanded",class:{"is-loading":t.teamMemberService.loading}},[a("multiselect",{attrs:{options:t.foundUsers,multiple:!1,searchable:!0,loading:t.userService.loading,"internal-search":!0,placeholder:"Type to search",label:"username","track-by":"id"},on:{"search-change":t.findUser},scopedSlots:t._u([{key:"clear",fn:function(e){return[null!==t.newMember&&0!==t.newMember.id?a("div",{staticClass:"multiselect__clear",on:{mousedown:function(a){return a.preventDefault(),a.stopPropagation(),t.clearAll(e.search)}}}):t._e()]}}],null,!1,2430713682),model:{value:t.newMember,callback:function(e){t.newMember=e},expression:"newMember"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Oops! No user found. Consider changing the search query.")])])],1),a("p",{staticClass:"control"},[a("button",{staticClass:"button is-success",attrs:{type:"submit"}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"plus"}})],1),t._v(" Add ")])])])]):t._e(),a("table",{staticClass:"table is-striped is-hoverable is-fullwidth"},[a("tbody",t._l(t.team.members,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.username))]),a("td",[e.id===t.userInfo.id?[a("b",{staticClass:"is-success"},[t._v("You")])]:t._e()],2),a("td",{staticClass:"type"},[e.admin?[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"lock"}})],1),t._v(" Admin ")]:[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"user"}})],1),t._v(" Member ")]],2),t.userIsAdmin?a("td",{staticClass:"actions"},[e.id!==t.userInfo.id?a("button",{staticClass:"button buttonright is-primary",on:{click:function(a){return t.toggleUserType(e)}}},[t._v(" Make "),e.admin?[t._v(" Member ")]:[t._v(" Admin ")]],2):t._e(),e.id!==t.userInfo.id?a("button",{staticClass:"button is-danger",on:{click:function(){t.member=e,t.showUserDeleteModal=!0}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"trash-alt"}})],1)]):t._e()]):t._e()])})),0)])])]),t.showDeleteModal?a("modal",{on:{close:function(e){t.showDeleteModal=!1},submit:function(e){return t.deleteTeam()}}},[a("span",{attrs:{slot:"header"},slot:"header"},[t._v("Delete the team")]),a("p",{attrs:{slot:"text"},slot:"text"},[t._v("Are you sure you want to delete this team and all of its members?"),a("br"),t._v(" All team members will loose access to lists and namespaces shared with this team."),a("br"),a("b",[t._v("This CANNOT BE UNDONE!")])])]):t._e(),t.showUserDeleteModal?a("modal",{on:{close:function(e){t.showUserDeleteModal=!1},submit:function(e){return t.deleteUser()}}},[a("span",{attrs:{slot:"header"},slot:"header"},[t._v("Remove a user from the team")]),a("p",{attrs:{slot:"text"},slot:"text"},[t._v("Are you sure you want to remove this user from the team?"),a("br"),t._v(" They will loose access to all lists and namespaces this team has access to."),a("br"),a("b",[t._v("This CANNOT BE UNDONE!")])])]):t._e()],1)},rn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v(" Edit Team ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v(" Team Members ")])])}],on=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{create:"/teams/{teamId}/members",delete:"/teams/{teamId}/members/{username}"})}return Object(m["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(N["a"])(t.created),t.updated=Object(N["a"])(t.updated),t}},{key:"modelFactory",value:function(t){return new Ke(t)}},{key:"beforeCreate",value:function(t){return t.userId=t.id,t.admin=null!==t.admin&&t.admin,t}}]),a}(D),cn={name:"EditTeam",data:function(){return{teamService:Ze,teamMemberService:on,team:Ve,teamId:this.$route.params.id,member:Ke,showDeleteModal:!1,showUserDeleteModal:!1,userIsAdmin:!1,newMember:O,foundUsers:[],userService:He,showError:!1}},components:{multiselect:Re.a},created:function(){this.teamService=new Ze,this.teamMemberService=new on,this.userService=new He,this.loadTeam()},watch:{$route:"loadTeam"},computed:Object(l["b"])({userInfo:function(t){return t.auth.info}}),methods:{loadTeam:function(){var t=this;this.team=new Ve({id:this.teamId}),this.teamService.get(this.team).then((function(e){t.$set(t,"team",e);var a=e.members;for(var s in a)a[s].teamId=t.teamId,a[s].id===t.userInfo.id&&a[s].admin&&(t.userIsAdmin=!0)})).catch((function(e){t.error(e,t)}))},submit:function(){var t=this;""!==this.team.name?(this.showError=!1,this.teamService.update(this.team).then((function(e){t.team=e,t.success({message:"The team was successfully updated."},t)})).catch((function(e){t.error(e,t)}))):this.showError=!0},deleteTeam:function(){var t=this;this.teamService.delete(this.team).then((function(){t.success({message:"The team was successfully deleted."},t),ro.push({name:"teams.index"})})).catch((function(e){t.error(e,t)}))},deleteUser:function(){var t=this;this.teamMemberService.delete(this.member).then((function(){t.success({message:"The user was successfully deleted from the team."},t),t.loadTeam()})).catch((function(e){t.error(e,t)})).finally((function(){t.showUserDeleteModal=!1}))},addUser:function(){var t=this,e=new Ke({teamId:this.teamId,username:this.newMember.username});this.teamMemberService.create(e).then((function(){t.loadTeam(),t.success({message:"The team member was successfully added."},t)})).catch((function(e){t.error(e,t)}))},toggleUserType:function(t){var e=this;t.admin=!t.admin,this.teamMemberService.delete(t).then((function(){return e.teamMemberService.create(t)})).then((function(){e.loadTeam(),e.success({message:"The team member was successfully made "+(t.admin?"admin":"member")+"."},e)})).catch((function(t){e.error(t,e)}))},findUser:function(t){var e=this;""!==t?this.userService.getAll({},{s:t}).then((function(t){e.$set(e,"foundUsers",t)})).catch((function(t){e.error(t,e)})):this.$set(this,"foundUsers",[])},clearAll:function(){this.$set(this,"foundUsers",[])}}},ln=cn,dn=(a("4732"),Object(z["a"])(ln,nn,rn,!1,null,"7336a060",null)),un=dn.exports,hn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fullpage"},[a("a",{staticClass:"close",on:{click:function(e){return t.back()}}},[a("icon",{attrs:{icon:["far","times-circle"]}})],1),a("h3",[t._v("Create a new team")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.newTeam(e)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.back()}}},[a("div",{staticClass:"field is-grouped"},[a("p",{staticClass:"control is-expanded",class:{"is-loading":t.teamService.loading}},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.team.name,expression:"team.name"}],staticClass:"input",class:{disabled:t.teamService.loading},attrs:{type:"text",placeholder:"The team's name goes here..."},domProps:{value:t.team.name},on:{input:function(e){e.target.composing||t.$set(t.team,"name",e.target.value)}}})]),a("p",{staticClass:"control"},[a("button",{staticClass:"button is-success noshadow",attrs:{type:"submit"}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"plus"}})],1),t._v(" Add ")])])]),t.showError&&""===t.team.name?a("p",{staticClass:"help is-danger"},[t._v(" Please specify a name. ")]):t._e()])])},mn=[],pn={name:"NewTeam",data:function(){return{teamService:Ze,team:Ve,showError:!1}},created:function(){this.teamService=new Ze,this.team=new Ve,this.$store.commit(Ct,!0)},methods:{newTeam:function(){var t=this;""!==this.team.name?(this.showError=!1,this.teamService.create(this.team).then((function(e){ro.push({name:"teams.edit",params:{id:e.id}}),t.success({message:"The team was successfully created."},t)})).catch((function(e){t.error(e,t)}))):this.showError=!0},back:function(){ro.go(-1)}}},fn=pn,vn=Object(z["a"])(fn,hn,mn,!1,null,null,null),kn=vn.exports,bn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loader-container content",class:{"is-loading":t.labelService.loading}},[a("h1",[t._v("Manage labels")]),a("p",[t._v(" Click on a label to edit it. You can edit all labels you created, you can use all labels which are associated with a task to whose list you have access. ")]),a("div",{staticClass:"columns"},[a("div",{staticClass:"labels-list column"},t._l(t.labels,(function(e){return a("span",{key:e.id,staticClass:"tag",class:{disabled:t.userInfo.id!==e.createdBy.id},style:{background:e.hexColor,color:e.textColor}},[t.userInfo.id!==e.createdBy.id?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"You are not allowed to edit this label because you dont own it.",expression:"'You are not allowed to edit this label because you dont own it.'",modifiers:{bottom:!0}}]},[t._v(" "+t._s(e.title)+" ")]):a("a",{style:{color:e.textColor},on:{click:function(a){return t.editLabel(e)}}},[t._v(" "+t._s(e.title)+" ")]),t.userInfo.id===e.createdBy.id?a("a",{staticClass:"delete is-small",on:{click:function(a){return t.deleteLabel(e)}}}):t._e()])})),0),t.isLabelEdit?a("div",{staticClass:"column is-4"},[a("div",{staticClass:"card"},[a("header",{staticClass:"card-header"},[a("span",{staticClass:"card-header-title"},[t._v(" Edit Label ")]),a("a",{staticClass:"card-header-icon",on:{click:function(e){t.isLabelEdit=!1}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"times"}})],1)])]),a("div",{staticClass:"card-content"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.editLabelSubmit()}}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Title")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.labelEditLabel.title,expression:"labelEditLabel.title"}],staticClass:"input",attrs:{type:"text",placeholder:"Label title"},domProps:{value:t.labelEditLabel.title},on:{input:function(e){e.target.composing||t.$set(t.labelEditLabel,"title",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Description")]),a("div",{staticClass:"control"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.labelEditLabel.description,expression:"labelEditLabel.description"}],staticClass:"textarea",attrs:{placeholder:"Label description"},domProps:{value:t.labelEditLabel.description},on:{input:function(e){e.target.composing||t.$set(t.labelEditLabel,"description",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Color")]),a("div",{staticClass:"control"},[a("color-picker",{model:{value:t.labelEditLabel.hexColor,callback:function(e){t.$set(t.labelEditLabel,"hexColor",e)},expression:"labelEditLabel.hexColor"}})],1)]),a("div",{staticClass:"field has-addons"},[a("div",{staticClass:"control is-expanded"},[a("button",{staticClass:"button is-fullwidth is-success",class:{"is-loading":t.labelService.loading},attrs:{type:"submit"}},[t._v(" Save ")])]),a("div",{staticClass:"control"},[a("a",{staticClass:"button has-icon is-danger",on:{click:function(){t.deleteLabel(t.labelEditLabel),t.isLabelEdit=!1}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"trash-alt"}})],1)])])])])])])]):t._e()])])},gn=[],Cn={name:"ListLabels",components:{ColorPicker:Aa},data:function(){return{labelService:R,labels:[],labelEditLabel:A,isLabelEdit:!1}},created:function(){this.labelService=new R,this.labelEditLabel=new A,this.loadLabels()},computed:Object(l["b"])({userInfo:function(t){return t.auth.info}}),methods:{loadLabels:function(){var t=this,e=function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return t.labelService.getAll({},{},a).then((function(s){return a<t.labelService.totalPages?e(a+1).then((function(t){return s.concat(t)})):s})).catch((function(t){return Promise.reject(t)}))};e().then((function(e){t.$set(t,"labels",e)})).catch((function(e){t.error(e,t)}))},deleteLabel:function(t){var e=this;this.labelService.delete(t).then((function(){for(var a in e.labels)e.labels[a].id===t.id&&e.labels.splice(a,1);e.success({message:"The label was successfully deleted."},e)})).catch((function(t){e.error(t,e)}))},editLabelSubmit:function(){var t=this;this.labelService.update(this.labelEditLabel).then((function(e){for(var a in t.labels)t.labels[a].id===e.id&&t.$set(t.labels,a,e);t.success({message:"The label was successfully updated."},t)})).catch((function(e){t.error(e,t)}))},editLabel:function(t){t.createdBy.id===this.userInfo.id&&(this.labelEditLabel=t,this.isLabelEdit=!0)}}},wn=Cn,yn=Object(z["a"])(wn,bn,gn,!1,null,null,null),_n=yn.exports,Tn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("h1",[t._v("Import your data from other services to Vikunja")]),a("p",[t._v("Click on the logo of one of the third-party services below to get started.")]),a("div",{staticClass:"migration-services-overview"},t._l(t.availableMigrators,(function(e){return a("router-link",{key:e,attrs:{to:{name:"migrate.service",params:{service:e}}}},[a("img",{attrs:{src:"/images/migration/"+e+".png",alt:e}}),t._v(" "+t._s(e)+" ")])})),1)])},Dn=[],xn={name:"migrate.service",computed:{availableMigrators:function(){return this.$store.state.config.availableMigrators}}},In=xn,Sn=Object(z["a"])(In,Tn,Dn,!1,null,null,null),On=Sn.exports,jn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("migration",{attrs:{identifier:t.identifier,name:t.name}})},An=[],En=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("h1",[t._v("Import your data from "+t._s(t.name)+" to Vikunja")]),a("p",[t._v("Vikunja will import all lists, tasks, notes, reminders and files you have access to.")]),!1===t.isMigrating&&""===t.message&&0===t.lastMigrationDate?[a("p",[t._v("To authorize Vikunja to access your "+t._s(t.name)+" Account, click the button below.")]),a("a",{staticClass:"button is-primary",class:{"is-loading":t.migrationService.loading},attrs:{href:t.authUrl,disabled:t.migrationService.loading}},[t._v("Get Started")])]:!0===t.isMigrating&&""===t.message&&0===t.lastMigrationDate?a("div",{staticClass:"migration-in-progress-container"},[a("div",{staticClass:"migration-in-progress"},[a("img",{attrs:{src:"/images/migration/"+t.identifier+".png",alt:t.name}}),t._m(0),a("img",{attrs:{src:"/images/logo.svg",alt:"Vikunja"}})]),a("p",[t._v("Importing in progress, hang tight...")])]):t.lastMigrationDate?a("div",[a("p",[t._v(" It looks like you've already imported your stuff from "+t._s(t.name)+" at "+t._s(t.formatDate(t.lastMigrationDate))+"."),a("br"),t._v(" Importing again is possible, but might create duplicates. Are you sure? ")]),a("div",{staticClass:"buttons"},[a("button",{staticClass:"button is-primary",on:{click:t.migrate}},[t._v("I am sure, please start migrating now!")]),a("router-link",{staticClass:"button is-danger is-outlined",attrs:{to:{name:"home"}}},[t._v("Cancel")])],1)]):a("div",[a("div",{staticClass:"message is-primary"},[a("div",{staticClass:"message-body"},[t._v(" "+t._s(t.message)+" ")])]),a("router-link",{staticClass:"button is-primary",attrs:{to:{name:"home"}}},[t._v("Refresh")])],1)],2)},$n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"progress-dots"},[a("span"),a("span"),a("span"),a("span"),a("span"),a("span"),a("span"),a("span")])}],Pn=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(t){var s;return Object(h["a"])(this,a),s=e.call(this,{update:"/migration/"+t+"/migrate"}),Object(v["a"])(Object(I["a"])(s),"serviceUrlKey",""),s.serviceUrlKey=t,s}return Object(m["a"])(a,[{key:"getAuthUrl",value:function(){return this.getM("/migration/"+this.serviceUrlKey+"/auth")}},{key:"getStatus",value:function(){return this.getM("/migration/"+this.serviceUrlKey+"/status")}},{key:"migrate",value:function(t){return this.update(t)}}]),a}(D),Nn={name:"migration",data:function(){return{authUrl:"",isMigrating:!1,lastMigrationDate:null,message:"",wunderlistCode:""}},props:{name:{type:String,required:!0},identifier:{type:String,required:!0}},created:function(){var t=this;this.migrationService=new Pn(this.identifier),this.getAuthUrl(),this.message="","undefined"!==typeof this.$route.query.code&&(this.wunderlistCode=this.$route.query.code,this.migrationService.getStatus().then((function(e){e.time?t.lastMigrationDate=new Date(e.time):t.migrate()})).catch((function(e){t.error(e,t)})))},methods:{getAuthUrl:function(){var t=this;this.migrationService.getAuthUrl().then((function(e){t.authUrl=e.url})).catch((function(e){t.error(e,t)}))},migrate:function(){var t=this;this.isMigrating=!0,this.lastMigrationDate=0,this.migrationService.migrate({code:this.wunderlistCode}).then((function(e){t.message=e.message})).catch((function(e){t.error(e,t)})).finally((function(){t.isMigrating=!1}))}}},Ln=Nn,Rn=Object(z["a"])(Ln,En,$n,!1,null,null,null),Mn=Rn.exports,Bn={name:"migrateService",components:{Migration:Mn},data:function(){return{name:"",identifier:""}},created:function(){switch(this.$route.params.service){case"wunderlist":this.name="Wunderlist",this.identifier="wunderlist";break;case"todoist":this.name="Todoist",this.identifier="todoist";break;default:ro.push({name:"404"})}}},Un=Bn,Fn=Object(z["a"])(Un,jn,An,!1,null,null,null),Wn=Fn.exports,qn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loader-container",class:{"is-loading":t.listService.loading}},[a("div",{staticClass:"switch-view"},[a("router-link",{class:{"is-active":"list.list"===t.$route.name},attrs:{to:{name:"list.list",params:{listId:t.listId}}}},[t._v(" List ")]),a("router-link",{class:{"is-active":"list.gantt"===t.$route.name},attrs:{to:{name:"list.gantt",params:{listId:t.listId}}}},[t._v(" Gantt ")]),a("router-link",{class:{"is-active":"list.table"===t.$route.name},attrs:{to:{name:"list.table",params:{listId:t.listId}}}},[t._v(" Table ")]),a("router-link",{class:{"is-active":"list.kanban"===t.$route.name},attrs:{to:{name:"list.kanban",params:{listId:t.listId}}}},[t._v(" Kanban ")])],1),t.list.isArchived?a("div",{staticClass:"notification is-warning"},[t._v(" This list is archived. It is not possible to create new or edit tasks or it. ")]):t._e(),a("router-view")],1)},Gn=[],Hn=(a("5319"),function(t,e){var a=localStorage.getItem("listView"),s=!1;null!==a&&(s=JSON.parse(a));var i={};s&&(i=s),i[t]=e,localStorage.setItem("listView",JSON.stringify(i))}),zn=function(t){var e=localStorage.getItem("listView");if(null!==e&&e.startsWith("list.")&&localStorage.removeItem("listView"),!e)return"list.list";var a=JSON.parse(e);return a[t]?a[t]:"list.list"},Yn={data:function(){return{listService:Ie,list:xe,listLoaded:0}},created:function(){this.listService=new Ie,this.list=new xe},mounted:function(){this.loadList()},watch:{"$route.path":"loadList"},computed:{listId:function(){return"undefined"===typeof this.$route.params.listId?0:this.$route.params.listId},background:function(){return this.$store.state.background}},methods:{loadList:function(){var t=this;if("list.list"!==this.$route.name&&"list.gantt"!==this.$route.name||this.$store.commit("kanban/setListId",0),this.$route.params.listId!==this.listLoaded&&"undefined"!==typeof this.$route.params.listId)if("list.list"===this.$route.name||"list.gantt"===this.$route.name||"list.table"===this.$route.name||"list.kanban"===this.$route.name){var e=new xe({id:this.$route.params.listId});this.listService.get(e).then((function(e){t.$set(t,"list",e),t.$store.commit(wt,e)})).catch((function(e){t.error(e,t)})).finally((function(){t.listLoaded=t.$route.params.listId}))}else{var a=zn(this.$route.params.listId);ro.replace({name:a,params:{id:this.$route.params.listId}})}}}},Kn=Yn,Vn=Object(z["a"])(Kn,qn,Gn,!1,null,null,null),Jn=Vn.exports,Qn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"kanban loader-container",class:{"is-loading":t.loading}},[t._l(t.buckets,(function(e){return a("div",{key:"bucket"+e.id,staticClass:"bucket"},[a("div",{staticClass:"bucket-header"},[a("h2",{ref:"bucket"+e.id+"title",refInFor:!0,staticClass:"title input",attrs:{contenteditable:"true"},on:{focusout:function(){return t.saveBucketTitle(e.id)},keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:a.ctrlKey?function(){return t.saveBucketTitle(e.id)}():null}}},[t._v(t._s(e.title))]),a("div",{staticClass:"dropdown is-right options",class:{"is-active":t.bucketOptionsDropDownActive[e.id]}},[a("div",{staticClass:"dropdown-trigger",on:{click:function(a){return a.stopPropagation(),t.toggleBucketDropdown(e.id)}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"ellipsis-v"}})],1)]),a("div",{staticClass:"dropdown-menu",attrs:{role:"menu"}},[a("div",{staticClass:"dropdown-content"},[a("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.buckets.length<=1?"You cannot remove the last bucket.":"",expression:"buckets.length <= 1 ? 'You cannot remove the last bucket.' : ''"}],staticClass:"dropdown-item has-text-danger",class:{"is-disabled":t.buckets.length<=1},on:{click:function(){return t.deleteBucketModal(e.id)}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"trash-alt"}})],1),t._v(" Delete ")])])])])]),a("div",{staticClass:"tasks"},[a("Container",{attrs:{"group-name":"buckets","get-child-payload":t.getTaskPayload(e.id),"drop-placeholder":t.dropPlaceholderOptions,"animation-duration":150,"drag-class":"ghost-task","drag-class-drop":"ghost-task-drop","drag-handle-selector":".task.draggable"},on:{drop:function(a){return t.onDrop(e.id,a)}}},t._l(e.tasks,(function(s){return a("Draggable",{key:"bucket"+e.id+"-task"+s.id},[a("router-link",{staticClass:"task loader-container draggable",class:{"is-loading":t.taskService.loading&&t.taskUpdating[s.id],draggable:!t.taskService.loading||!t.taskUpdating[s.id],"has-light-text":!t.colorIsDark(s.hexColor)&&s.hexColor!=="#"+s.defaultColor},style:{"background-color":"#"!==s.hexColor&&s.hexColor!=="#"+s.defaultColor&&s.hexColor},attrs:{to:{name:"task.kanban.detail",params:{id:s.id}},tag:"div"}},[a("span",{staticClass:"task-id"},[s.done?a("span",{staticClass:"is-done"},[t._v("Done")]):t._e(),""===s.identifier?[t._v(" #"+t._s(s.index)+" ")]:[t._v(" "+t._s(s.identifier)+" ")]],2),s.dueDate>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.formatDate(s.dueDate),expression:"formatDate(task.dueDate)"}],staticClass:"due-date",class:{overdue:s.dueDate<=new Date&&!s.done}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:["far","calendar-alt"]}})],1),a("span",[t._v(" "+t._s(t.formatDateSince(s.dueDate))+" ")])]):t._e(),a("h3",[t._v(t._s(s.title))]),a("labels",{attrs:{labels:s.labels}}),a("div",{staticClass:"footer"},[a("div",{staticClass:"items"},[a("priority-label",{staticClass:"priority-label",attrs:{priority:s.priority}}),s.assignees.length>0?a("div",{staticClass:"assignees"},t._l(s.assignees,(function(t){return a("user",{key:s.id+"assignee"+t.id,attrs:{user:t,"show-username":!1,"avatar-size":24}})})),1):t._e()],1),a("div",[s.attachments.length>0?a("span",{staticClass:"icon"},[a("svg",{attrs:{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("rect",{attrs:{fill:"none",rx:"0",ry:"0"}}),a("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.86 8.29994C19.8823 8.27664 19.9026 8.25201 19.9207 8.22634C20.5666 7.53541 20.93 6.63567 20.93 5.68001C20.93 4.69001 20.55 3.76001 19.85 3.06001C18.45 1.66001 16.02 1.66001 14.62 3.06001L9.88002 7.80001C9.86705 7.81355 9.85481 7.82753 9.8433 7.8419L4.58 13.1C3.6 14.09 3.06 15.39 3.06 16.78C3.06 18.17 3.6 19.48 4.58 20.46C5.6 21.47 6.93 21.98 8.26 21.98C9.59 21.98 10.92 21.47 11.94 20.46L17.74 14.66C17.97 14.42 17.98 14.04 17.74 13.81C17.5 13.58 17.12 13.58 16.89 13.81L11.09 19.61C10.33 20.36 9.33 20.78 8.26 20.78C7.19 20.78 6.19 20.37 5.43 19.61C4.68 18.85 4.26 17.85 4.26 16.78C4.26 15.72 4.68 14.71 5.43 13.96L15.47 3.91996C15.4962 3.89262 15.5195 3.86346 15.54 3.83292C16.4992 2.95103 18.0927 2.98269 19.01 3.90001C19.48 4.37001 19.74 5.00001 19.74 5.67001C19.74 6.34001 19.48 6.97001 19.01 7.44001L14.27 12.18C14.2571 12.1935 14.2448 12.2075 14.2334 12.2218L8.96 17.4899C8.59 17.8699 7.93 17.8699 7.55 17.4899C7.36 17.2999 7.26 17.0399 7.26 16.7799C7.26 16.5199 7.36 16.2699 7.55 16.0699L15.47 8.14994C15.7 7.90994 15.71 7.52994 15.47 7.29994C15.23 7.06994 14.85 7.06994 14.62 7.29994L6.7 15.2199C6.29 15.6399 6.06 16.1899 6.06 16.7799C6.06 17.3699 6.29 17.9199 6.7 18.3399C7.12 18.7499 7.67 18.9799 8.26 18.9799C8.85 18.9799 9.4 18.7599 9.82 18.3399L19.86 8.29994Z"}})])]):t._e()])])],1)],1)})),1)],1),a("div",{staticClass:"bucket-footer"},[t.showNewTaskInput[e.id]?a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.newTaskText,expression:"newTaskText"}],staticClass:"input",class:{"is-loading":t.taskService.loading},attrs:{type:"text",placeholder:"Enter the new task text...",disabled:t.taskService.loading},domProps:{value:t.newTaskText},on:{focusout:function(a){return t.toggleShowNewTaskInput(e.id)},keyup:[function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"esc",27,a.key,["Esc","Escape"])?null:t.toggleShowNewTaskInput(e.id)},function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.addTaskToBucket(e.id)}],input:function(e){e.target.composing||(t.newTaskText=e.target.value)}}})]),t.newTaskError[e.id]&&""===t.newTaskText?a("p",{staticClass:"help is-danger"},[t._v(" Please specify a title. ")]):t._e()]):t._e(),t.showNewTaskInput[e.id]?t._e():a("a",{staticClass:"button noshadow is-transparent is-fullwidth has-text-centered",on:{click:function(a){return t.toggleShowNewTaskInput(e.id)}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"plus"}})],1),0===e.tasks.length?a("span",[t._v(" Add a task ")]):a("span",[t._v(" Add another task ")])])])])})),t.loading?t._e():a("div",{staticClass:"bucket new-bucket"},[t.showNewBucketInput?a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.newBucketTitle,expression:"newBucketTitle"}],staticClass:"input",class:{"is-loading":t.loading},attrs:{type:"text",placeholder:"Enter the new bucket title...",disabled:t.loading},domProps:{value:t.newBucketTitle},on:{focusout:function(){return t.showNewBucketInput=!1},keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:function(){return t.showNewBucketInput=!1}()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createNewBucket(e)}],input:function(e){e.target.composing||(t.newBucketTitle=e.target.value)}}}):t._e(),t.showNewBucketInput?t._e():a("a",{staticClass:"button noshadow is-transparent is-fullwidth has-text-centered",on:{click:function(){return t.showNewBucketInput=!0}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"plus"}})],1),a("span",[t._v(" Create a new bucket ")])])]),a("transition",{attrs:{name:"modal"}},[a("router-view")],1),t.showBucketDeleteModal?a("modal",{on:{close:function(e){t.showBucketDeleteModal=!1},submit:function(e){return t.deleteBucket()}}},[a("span",{attrs:{slot:"header"},slot:"header"},[t._v("Delete the bucket")]),a("p",{attrs:{slot:"text"},slot:"text"},[t._v(" Are you sure you want to delete this bucket?"),a("br"),t._v(" This will not delete any tasks but move them into the default bucket. ")])]):t._e()],2)},Xn=[],Zn=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(t){var s;return Object(h["a"])(this,a),s=e.call(this,t),s.tasks=s.tasks.map((function(t){return new P(t)})),s.createdBy=new O(s.createdBy),s.created=new Date(s.created),s.updated=new Date(s.updated),s}return Object(m["a"])(a,[{key:"defaults",value:function(){return{id:0,title:"",listId:0,tasks:[],createdBy:null,created:null,updated:null}}}]),a}(S),tr=a("3f7d"),er=function(t,e){var a;for(a in t)if(e(t[a]))return a;return null},ar=a("d0ff"),sr=function(t,e){var a=e.removedIndex,s=e.addedIndex,i=e.payload;if(null===a&&null===s)return t;var n=Object(ar["a"])(t),r=i;return null!==a&&(r=n.splice(a,1)[0]),null!==s&&n.splice(s,0,r),n},ir={name:"Kanban",components:{Container:tr["Container"],Draggable:tr["Draggable"],Labels:tt,User:rt,PriorityLabel:K},data:function(){return{taskService:M,dropPlaceholderOptions:{className:"drop-preview",animationDuration:150,showOnTop:!0},bucketOptionsDropDownActive:{},showBucketDeleteModal:!1,bucketToDelete:0,newTaskText:"",showNewTaskInput:{},newBucketTitle:"",showNewBucketInput:!1,newTaskError:{},taskUpdating:{}}},created:function(){var t=this;this.taskService=new M,this.loadBuckets(),setTimeout((function(){return document.addEventListener("click",t.closeBucketDropdowns)}),0),Hn(this.$route.params.listId,this.$route.name)},watch:{"$route.params.listId":"loadBuckets"},computed:Object(l["b"])({buckets:function(t){return t.kanban.buckets},loadedListId:function(t){return t.kanban.listId},loading:kt}),methods:{loadBuckets:function(){var t=this;"list.kanban"===this.$route.name&&this.loadedListId!==this.$route.params.listId&&this.$store.dispatch("kanban/loadBucketsForList",this.$route.params.listId).catch((function(e){t.error(e,t)}))},onDrop:function(t,e){var a=this,s=er(this.buckets,(function(e){return e.id===t}));if(null!==e.removedIndex||null!==e.addedIndex){var i=Object.assign({},this.buckets),n=i[s];n.tasks=sr(n.tasks,e),delete i[s],i[s]=n}if(null!==e.addedIndex){var r=e.addedIndex,o="undefined"===typeof this.buckets[s].tasks[r-1]?null:this.buckets[s].tasks[r-1],c="undefined"===typeof this.buckets[s].tasks[r+1]?null:this.buckets[s].tasks[r+1],l=this.buckets[s].tasks[r];this.$set(this.taskUpdating,l.id,!0),null===o&&null!==c&&(l.position=c.position/2),null!==o&&null===c&&(l.position=o.position+Math.pow(2,16)),null!==c&&null!==o&&(l.position=o.position+(c.position-o.position)/2),l.bucketId=t,this.$store.dispatch("tasks/update",l).catch((function(t){a.error(t,a)})).finally((function(){a.$set(a.taskUpdating,l.id,!1)}))}},getTaskPayload:function(t){var e=this;return function(a){var s=e.buckets[er(e.buckets,(function(e){return e.id===t}))];return s.tasks[a]}},toggleShowNewTaskInput:function(t){this.$set(this.showNewTaskInput,t,!this.showNewTaskInput[t])},toggleBucketDropdown:function(t){this.$set(this.bucketOptionsDropDownActive,t,!this.bucketOptionsDropDownActive[t])},closeBucketDropdowns:function(){for(var t in this.bucketOptionsDropDownActive)this.bucketOptionsDropDownActive[t]=!1},addTaskToBucket:function(t){var e=this;if(""!==this.newTaskText){this.$set(this.newTaskError,t,!1);var a=function(){for(var a in e.buckets)if(e.buckets[a].id===t)return a},s=a(),i=new P({title:this.newTaskText,bucketId:this.buckets[s].id,listId:this.$route.params.listId});this.taskService.create(i).then((function(t){e.newTaskText="",e.$store.commit("kanban/addTaskToBucket",t)})).catch((function(t){e.error(t,e)}))}else this.$set(this.newTaskError,t,!0)},createNewBucket:function(){var t=this;if(""!==this.newBucketTitle){var e=new Zn({title:this.newBucketTitle,listId:parseInt(this.$route.params.listId)});this.$store.dispatch("kanban/createBucket",e).then((function(){t.newBucketTitle="",t.showNewBucketInput=!1})).catch((function(e){t.error(e,t)}))}},deleteBucketModal:function(t){this.buckets.length<=1||(this.bucketToDelete=t,this.showBucketDeleteModal=!0)},deleteBucket:function(){var t=this,e=new Zn({id:this.bucketToDelete,listId:this.$route.params.listId});this.$store.dispatch("kanban/deleteBucket",e).catch((function(e){t.error(e,t)})).finally((function(){t.showBucketDeleteModal=!1}))},saveBucketTitle:function(t){var e=this,a=this.$refs["bucket".concat(t,"title")][0].textContent,s=new Zn({id:t,title:a,listId:Number(this.$route.params.listId)}),i=this.buckets[er(this.buckets,(function(e){return e.id===t}))];i.title!==a&&this.$store.dispatch("kanban/updateBucket",s).then((function(t){i.title=t.title})).catch((function(t){e.error(t,e)}))}}},nr=ir,rr=Object(z["a"])(nr,Qn,Xn,!1,null,null,null),or=rr.exports,cr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loader-container",class:{"is-loading":t.taskCollectionService.loading}},[a("div",{staticClass:"filter-container"},[a("div",{staticClass:"items"},[a("div",{staticClass:"search"},[a("div",{staticClass:"field has-addons",class:{hidden:!t.showTaskSearch}},[a("div",{staticClass:"control has-icons-left has-icons-right"},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],staticClass:"input",attrs:{type:"text",placeholder:"Search"},domProps:{value:t.searchTerm},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchTasks(e)},blur:function(e){return t.hideSearchBar()},input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}}),a("span",{staticClass:"icon is-left"},[a("icon",{attrs:{icon:"search"}})],1)]),a("div",{staticClass:"control"},[a("button",{staticClass:"button noshadow is-primary",class:{"is-loading":t.taskCollectionService.loading},on:{click:t.searchTasks}},[t._v(" Search ")])])]),t.showTaskSearch?t._e():a("button",{staticClass:"button",on:{click:function(e){t.showTaskSearch=!t.showTaskSearch}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"search"}})],1)])]),a("button",{staticClass:"button",on:{click:function(e){t.showTaskFilter=!t.showTaskFilter}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"filter"}})],1),t._v(" Filters ")])]),a("transition",{attrs:{name:"fade"}},[t.showTaskFilter?a("filters",{on:{change:function(e){return t.loadTasks(1)}},model:{value:t.params,callback:function(e){t.params=e},expression:"params"}}):t._e()],1)],1),t.list.isArchived?t._e():a("div",{staticClass:"field task-add"},[a("div",{staticClass:"field is-grouped"},[a("p",{staticClass:"control has-icons-left is-expanded",class:{"is-loading":t.taskService.loading}},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.newTaskText,expression:"newTaskText"}],staticClass:"input",class:{disabled:t.taskService.loading},attrs:{type:"text",placeholder:"Add a new task..."},domProps:{value:t.newTaskText},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addTask()},input:function(e){e.target.composing||(t.newTaskText=e.target.value)}}}),a("span",{staticClass:"icon is-small is-left"},[a("icon",{attrs:{icon:"tasks"}})],1)]),a("p",{staticClass:"control"},[a("button",{staticClass:"button is-success",attrs:{disabled:0===t.newTaskText.length},on:{click:function(e){return t.addTask()}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"plus"}})],1),t._v(" Add ")])])]),t.showError&&""===t.newTaskText?a("p",{staticClass:"help is-danger"},[t._v(" Please specify a list title. ")]):t._e()]),a("div",{staticClass:"columns"},[a("div",{staticClass:"column"},[t.tasks&&t.tasks.length>0?a("div",{staticClass:"tasks",class:{short:t.isTaskEdit}},t._l(t.tasks,(function(e){return a("div",{key:e.id,staticClass:"task"},[a("single-task-in-list",{attrs:{"the-task":e,"task-detail-route":"task.detail"},on:{taskUpdated:t.updateTasks}}),t.list.isArchived?t._e():a("div",{staticClass:"icon settings",on:{click:function(a){return t.editTask(e.id)}}},[a("icon",{attrs:{icon:"pencil-alt"}})],1)],1)})),0):t._e()]),t.isTaskEdit?a("div",{staticClass:"column is-4"},[a("div",{staticClass:"card taskedit"},[a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v(" Edit Task ")]),a("a",{staticClass:"card-header-icon",on:{click:function(e){t.isTaskEdit=!1}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"angle-right"}})],1)])]),a("div",{staticClass:"card-content"},[a("div",{staticClass:"content"},[a("edit-task",{attrs:{task:t.taskEditTask}})],1)])])]):t._e()]),t.taskCollectionService.totalPages>1?a("nav",{staticClass:"pagination is-centered",attrs:{role:"navigation","aria-label":"pagination"}},[a("router-link",{staticClass:"pagination-previous",attrs:{to:t.getRouteForPagination(t.currentPage-1),tag:"button",disabled:1===t.currentPage}},[t._v(" Previous ")]),a("router-link",{staticClass:"pagination-next",attrs:{to:t.getRouteForPagination(t.currentPage+1),tag:"button",disabled:t.currentPage===t.taskCollectionService.totalPages}},[t._v(" Next page ")]),a("ul",{staticClass:"pagination-list"},[t._l(t.pages,(function(e,s){return[e.isEllipsis?a("li",{key:"page"+s},[a("span",{staticClass:"pagination-ellipsis"},[t._v("…")])]):a("li",{key:"page"+s},[a("router-link",{staticClass:"pagination-link",class:{"is-current":e.number===t.currentPage},attrs:{to:t.getRouteForPagination(e.number),"aria-label":"Goto page "+e.number}},[t._v(" "+t._s(e.number)+" ")])],1)]}))],2)],1):t._e(),a("transition",{attrs:{name:"modal"}},[a("router-view")],1)],1)},lr=[],dr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{on:{submit:function(e){return e.preventDefault(),t.editTaskSubmit()}}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"tasktext"}},[t._v("Task Text")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.taskEditTask.title,expression:"taskEditTask.title"}],staticClass:"input",class:{disabled:t.taskService.loading},attrs:{disabled:t.taskService.loading,type:"text",id:"tasktext",placeholder:"The task text is here..."},domProps:{value:t.taskEditTask.title},on:{change:function(e){return t.editTaskSubmit()},input:function(e){e.target.composing||t.$set(t.taskEditTask,"title",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"taskdescription"}},[t._v("Description")]),a("div",{staticClass:"control"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.taskEditTask.description,expression:"taskEditTask.description"}],staticClass:"textarea",class:{disabled:t.taskService.loading},attrs:{disabled:t.taskService.loading,placeholder:"The tasks description goes here...",id:"taskdescription"},domProps:{value:t.taskEditTask.description},on:{change:function(e){return t.editTaskSubmit()},input:function(e){e.target.composing||t.$set(t.taskEditTask,"description",e.target.value)}}})])]),a("b",[t._v("Reminder Dates")]),a("reminders",{on:{change:function(e){return t.editTaskSubmit()}},model:{value:t.taskEditTask.reminderDates,callback:function(e){t.$set(t.taskEditTask,"reminderDates",e)},expression:"taskEditTask.reminderDates"}}),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"taskduedate"}},[t._v("Due Date")]),a("div",{staticClass:"control"},[a("flat-pickr",{staticClass:"input",class:{disabled:t.taskService.loading},attrs:{disabled:t.taskService.loading,config:t.flatPickerConfig,id:"taskduedate",placeholder:"The tasks due date is here..."},on:{"on-close":function(e){return t.editTaskSubmit()}},model:{value:t.taskEditTask.dueDate,callback:function(e){t.$set(t.taskEditTask,"dueDate",e)},expression:"taskEditTask.dueDate"}})],1)]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:""}},[t._v("Duration")]),a("div",{staticClass:"control columns"},[a("div",{staticClass:"column"},[a("flat-pickr",{staticClass:"input",class:{disabled:t.taskService.loading},attrs:{disabled:t.taskService.loading,config:t.flatPickerConfig,id:"taskduedate",placeholder:"Start date"},on:{"on-close":function(e){return t.editTaskSubmit()}},model:{value:t.taskEditTask.startDate,callback:function(e){t.$set(t.taskEditTask,"startDate",e)},expression:"taskEditTask.startDate"}})],1),a("div",{staticClass:"column"},[a("flat-pickr",{staticClass:"input",class:{disabled:t.taskService.loading},attrs:{disabled:t.taskService.loading,config:t.flatPickerConfig,id:"taskduedate",placeholder:"End date"},on:{"on-close":function(e){return t.editTaskSubmit()}},model:{value:t.taskEditTask.endDate,callback:function(e){t.$set(t.taskEditTask,"endDate",e)},expression:"taskEditTask.endDate"}})],1)])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:""}},[t._v("Repeat after")]),a("repeat-after",{on:{change:function(e){return t.editTaskSubmit()}},model:{value:t.taskEditTask.repeatAfter,callback:function(e){t.$set(t.taskEditTask,"repeatAfter",e)},expression:"taskEditTask.repeatAfter"}})],1),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:""}},[t._v("Priority")]),a("div",{staticClass:"control priority-select"},[a("priority-select",{on:{change:function(e){return t.editTaskSubmit()}},model:{value:t.taskEditTask.priority,callback:function(e){t.$set(t.taskEditTask,"priority",e)},expression:"taskEditTask.priority"}})],1)]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Percent Done")]),a("div",{staticClass:"control"},[a("percent-done-select",{on:{change:function(e){return t.editTaskSubmit()}},model:{value:t.taskEditTask.percentDone,callback:function(e){t.$set(t.taskEditTask,"percentDone",e)},expression:"taskEditTask.percentDone"}})],1)]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Color")]),a("div",{staticClass:"control"},[a("color-picker",{model:{value:t.taskEditTask.hexColor,callback:function(e){t.$set(t.taskEditTask,"hexColor",e)},expression:"taskEditTask.hexColor"}})],1)]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:""}},[t._v("Assignees")]),a("ul",{staticClass:"assingees"},t._l(t.taskEditTask.assignees,(function(e,s){return a("li",{key:e.id},[t._v(" "+t._s(e.username)+" "),a("a",{on:{click:function(e){return t.deleteAssigneeByIndex(s)}}},[a("icon",{attrs:{icon:"times"}})],1)])})),0)]),a("div",{staticClass:"field has-addons"},[a("div",{staticClass:"control is-expanded"},[a("edit-assignees",{attrs:{"task-id":t.taskEditTask.id,"list-id":t.taskEditTask.listId,"initial-assignees":t.taskEditTask.assignees}})],1)]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Labels")]),a("div",{staticClass:"control"},[a("edit-labels",{attrs:{"task-id":t.taskEditTask.id},model:{value:t.taskEditTask.labels,callback:function(e){t.$set(t.taskEditTask,"labels",e)},expression:"taskEditTask.labels"}})],1)]),a("related-tasks",{staticClass:"is-narrow",attrs:{"task-id":t.task.id,"list-id":t.task.listId,"initial-related-tasks":t.task.relatedTasks}}),a("button",{staticClass:"button is-success is-fullwidth",class:{"is-loading":t.taskService.loading},attrs:{type:"submit"}},[t._v(" Save ")])],1)},ur=[],hr={name:"edit-task",data:function(){return{listId:this.$route.params.id,listService:Ie,taskService:M,priorities:q,list:{},newTask:P,isTaskEdit:!1,taskEditTask:P,flatPickerConfig:{altFormat:"j M Y H:i",altInput:!0,dateFormat:"Y-m-d H:i",enableTime:!0,onOpen:this.updateLastReminderDate,onClose:this.addReminderDate}}},components:{ColorPicker:Aa,Reminders:ui,RepeatAfter:ni,RelatedTasks:Zs,EditAssignees:Bs,EditLabels:js,PercentDoneSelect:ys,PrioritySelect:vs,flatPickr:ds.a},props:{task:{type:P,required:!0}},watch:{task:function(){this.taskEditTask=this.task,this.initTaskFields()}},created:function(){this.listService=new Ie,this.taskService=new M,this.newTask=new P,this.taskEditTask=this.task,this.initTaskFields()},methods:{initTaskFields:function(){this.taskEditTask.dueDate=0===+new Date(this.task.dueDate)?null:this.task.dueDate,this.taskEditTask.startDate=0===+new Date(this.task.startDate)?null:this.task.startDate,this.taskEditTask.endDate=0===+new Date(this.task.endDate)?null:this.task.endDate},editTaskSubmit:function(){var t=this;this.taskService.update(this.taskEditTask).then((function(e){t.$set(t,"taskEditTask",e),t.initTaskFields()})).catch((function(e){t.error(e,t)}))}}},mr=hr,pr=(a("63e7"),Object(z["a"])(mr,dr,ur,!1,null,"59c3c9ce",null)),fr=pr.exports,vr=(a("841c"),function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{getAll:"/lists/{listId}/tasks"})}return Object(m["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(N["a"])(t.created),t.updated=Object(N["a"])(t.updated),t}},{key:"modelFactory",value:function(t){return new P(t)}}]),a}(D)),kr={data:function(){return{taskCollectionService:vr,tasks:[],pages:[],currentPage:0,showTaskSearch:!1,searchTerm:"",showTaskFilter:!1,params:{sort_by:["done","id"],order_by:["asc","desc"],filter_by:["done"],filter_value:["false"],filter_comparator:["equals"],filter_concat:"and"}}},watch:{"$route.query":"loadTasksForPage"},beforeMount:function(){this.loadTasksForPage(this.$route.query)},created:function(){this.taskCollectionService=new vr},methods:{loadTasks:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;"list.list"!==this.$route.name&&"list.table"!==this.$route.name||(this.$set(this,"tasks",[]),null===s&&(s=this.params),""!==a&&(s.s=a),this.taskCollectionService.getAll({listId:this.$route.params.listId},s,t).then((function(a){e.$set(e,"tasks",a),e.$set(e,"pages",[]),e.currentPage=t;for(var s=0;s<e.taskCollectionService.totalPages;s++)s>0&&s+1<e.taskCollectionService.totalPages&&(s+1>e.currentPage+1||s+1<e.currentPage-1)?e.pages[s-1]&&!e.pages[s-1].isEllipsis&&e.pages.push({number:0,isEllipsis:!0}):e.pages.push({number:s+1,isEllipsis:!1})})).catch((function(t){e.error(t,e)})))},loadTasksForPage:function(t){var e=Number(t.page);"undefined"===typeof t.page&&(e=1);var a=t.search;"undefined"===typeof t.search&&(a=""),this.initTasks(e,a)},sortTasks:function(){if(null!==this.tasks&&this.tasks!==[])return this.tasks.sort((function(t,e){return t.done<e.done?-1:t.done>e.done?1:t.id>e.id?-1:t.id<e.id?1:0}))},searchTasks:function(){this.$route.query!==this.searchTerm&&this.$router.push({name:"list.list",query:{search:this.searchTerm}})},hideSearchBar:function(){var t=this;setTimeout((function(){t.showTaskSearch=!1}),200)},getRouteForPagination:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"list";return{name:"list."+e,params:{type:e},query:{page:t}}}}},br=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card filters"},[a("div",{staticClass:"card-content"},[a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Show Done Tasks")]),a("div",{staticClass:"control"},[a("fancycheckbox",{on:{change:t.setDoneFilter},model:{value:t.filters.done,callback:function(e){t.$set(t.filters,"done",e)},expression:"filters.done"}},[t._v(" Show Done Tasks ")])],1)]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Due Date")]),a("div",{staticClass:"control"},[a("flat-pickr",{staticClass:"input",attrs:{config:t.flatPickerConfig,placeholder:"Due Date Range"},on:{"on-close":t.setDueDateFilter},model:{value:t.filters.dueDate,callback:function(e){t.$set(t.filters,"dueDate",e)},expression:"filters.dueDate"}})],1)])])])},gr=[],Cr={name:"filters",components:{Fancycheckbox:ht,flatPickr:ds.a},data:function(){return{params:{sort_by:[],order_by:[],filter_by:[],filter_value:[],filter_comparator:[]},filters:{done:!1,dueDate:""},flatPickerConfig:{altFormat:"j M Y H:i",altInput:!0,dateFormat:"Y-m-d H:i",enableTime:!0,time_24hr:!0,mode:"range"}}},mounted:function(){this.params=this.value,this.prepareDone()},props:{value:{required:!0}},watch:{value:function(t){this.$set(this,"params",t),this.prepareDone()}},methods:{change:function(){this.$emit("input",this.params),this.$emit("change",this.params)},prepareDone:function(){if("undefined"!==typeof this.params.filter_by){var t=!1;this.params.filter_by.forEach((function(e,a){"done"===e&&(t=a)})),!1===t&&(this.filters.done=!0)}},setDoneFilter:function(){if(this.filters.done){for(var t in this.params.filter_by)if("done"===this.params.filter_by[t]){this.params.filter_by.splice(t,1),this.params.filter_comparator.splice(t,1),this.params.filter_value.splice(t,1);break}}else this.params.filter_by.push("done"),this.params.filter_comparator.push("equals"),this.params.filter_value.push("false");this.change()},setDueDateFilter:function(){var t=this;if(""!==this.filters.dueDate){var e=this.filters.dueDate.split(" to ");if(e.length<2)return;var a=!1,s=!1;this.params.filter_by.forEach((function(i,n){"due_date"===i&&"greater_equals"===t.params.filter_comparator[n]&&(a=!0,t.params.filter_value[n]=+new Date(e[0])/1e3),"due_date"===i&&"less_equals"===t.params.filter_comparator[n]&&(s=!0,t.params.filter_value[n]=+new Date(e[1])/1e3)})),a||(this.params.filter_by.push("due_date"),this.params.filter_comparator.push("greater_equals"),this.params.filter_value.push(+new Date(e[0])/1e3)),s||(this.params.filter_by.push("due_date"),this.params.filter_comparator.push("less_equals"),this.params.filter_value.push(+new Date(e[1])/1e3)),this.change()}}}},wr=Cr,yr=Object(z["a"])(wr,br,gr,!1,null,null,null),_r=yr.exports,Tr={name:"List",data:function(){return{taskService:M,list:{},isTaskEdit:!1,taskEditTask:P,newTaskText:"",showError:!1}},mixins:[kr],components:{Filters:_r,SingleTaskInList:vt,EditTask:fr},created:function(){this.taskService=new M,Hn(this.$route.params.listId,this.$route.name)},methods:{initTasks:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.taskEditTask=null,this.isTaskEdit=!1,this.loadTasks(t,e)},addTask:function(){var t=this;if(""!==this.newTaskText){this.showError=!1;var e=new P({title:this.newTaskText,listId:this.$route.params.listId});this.taskService.create(e).then((function(e){t.tasks.push(e),t.sortTasks(),t.newTaskText=""})).catch((function(e){t.error(e,t)}))}else this.showError=!0},editTask:function(t){var e=this.getTaskById(t);this.taskEditTask=e,this.isTaskEdit=!0},getTaskById:function(t){for(var e in this.tasks)if(this.tasks[e].id===parseInt(t))return this.tasks[e];return{}},updateTasks:function(t){for(var e in this.tasks)if(this.tasks[e].id===t.id){this.$set(this.tasks,e,t);break}this.sortTasks()}}},Dr=Tr,xr=Object(z["a"])(Dr,cr,lr,!1,null,null,null),Ir=xr.exports,Sr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gantt-chart-container"},[a("div",{staticClass:"gantt-options"},[a("fancycheckbox",{staticClass:"is-block",model:{value:t.showTaskswithoutDates,callback:function(e){t.showTaskswithoutDates=e},expression:"showTaskswithoutDates"}},[t._v(" Show tasks which don't have dates set ")]),a("div",{staticClass:"range-picker"},[a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"dayWidth"}},[t._v("Size")]),a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model.number",value:t.dayWidth,expression:"dayWidth",modifiers:{number:!0}}],attrs:{id:"dayWidth"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var a="_value"in e?e._value:e.value;return t._n(a)}));t.dayWidth=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"35"}},[t._v("Default")]),a("option",{attrs:{value:"10"}},[t._v("Month")]),a("option",{attrs:{value:"80"}},[t._v("Day")])])])])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"fromDate"}},[t._v("From")]),a("div",{staticClass:"control"},[a("flat-pickr",{staticClass:"input",attrs:{config:t.flatPickerConfig,id:"fromDate",placeholder:"From"},model:{value:t.dateFrom,callback:function(e){t.dateFrom=e},expression:"dateFrom"}})],1)]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"toDate"}},[t._v("To")]),a("div",{staticClass:"control"},[a("flat-pickr",{staticClass:"input",attrs:{config:t.flatPickerConfig,id:"toDate",placeholder:"To"},model:{value:t.dateTo,callback:function(e){t.dateTo=e},expression:"dateTo"}})],1)])])],1),a("gantt-chart",{attrs:{"list-id":Number(t.$route.params.listId),"show-taskswithout-dates":t.showTaskswithoutDates,"date-from":t.dateFrom,"date-to":t.dateTo,"day-width":t.dayWidth}}),a("transition",{attrs:{name:"modal"}},[a("router-view")],1)],1)},Or=[],jr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gantt-chart box"},[a("div",{staticClass:"dates"},[t._l(t.days,(function(e,s){return[a("div",{key:s+"year",staticClass:"months"},t._l(t.days[s],(function(e,i){return a("div",{key:i+"month",staticClass:"month"},[t._v(" "+t._s(new Date(new Date(s).setMonth(i)).toLocaleString("en-us",{month:"long"}))+", "+t._s(new Date(s).getFullYear())+" "),a("div",{staticClass:"days"},t._l(t.days[s][i],(function(e,s){return a("div",{key:s+"day",staticClass:"day",class:{today:e.toDateString()===t.now.toDateString()},style:{width:t.dayWidth+"px"}},[t.dayWidth>25?a("span",{staticClass:"theday"},[t._v(" "+t._s(e.getDate())+" ")]):t._e(),t.dayWidth>25?a("span",{staticClass:"weekday"},[t._v(" "+t._s(e.toLocaleString("en-us",{weekday:"short"}))+" ")]):t._e()])})),0)])})),0)]}))],2),a("div",{staticClass:"tasks",style:{width:t.fullWidth+"px"}},[t._l(t.theTasks,(function(e,s){return a("div",{key:e.id,staticClass:"row",style:{background:"repeating-linear-gradient(90deg, #ededed, #ededed 1px, "+(s%2===0?"#fafafa 1px, #fafafa ":"#fff 1px, #fff ")+t.dayWidth+"px)"}},[a("VueDragResize",{staticClass:"task",class:{done:e.done,"is-current-edit":null!==t.taskToEdit&&t.taskToEdit.id===e.id,"has-light-text":!t.colorIsDark(e.hexColor),"has-dark-text":t.colorIsDark(e.hexColor)},style:{"border-color":e.hexColor,"background-color":e.hexColor},attrs:{isActive:!0,x:e.offsetDays*t.dayWidth-6,y:0,w:e.durationDays*t.dayWidth,h:31,minw:t.dayWidth,snapToGrid:!0,gridX:t.dayWidth,sticks:["mr","ml"],axis:"x",parentLimitation:!0,parentW:t.fullWidth},on:{resizestop:t.resizeTask,dragstop:t.resizeTask,clicked:function(a){return t.setTaskDragged(e)}}},[a("span",{class:{"has-high-priority":e.priority>=t.priorities.HIGH,"has-not-so-high-priority":e.priority===t.priorities.HIGH,"has-super-high-priority":e.priority===t.priorities.DO_NOW}},[t._v(t._s(e.title))]),a("priority-label",{attrs:{priority:e.priority}}),a("a",{staticClass:"edit-toggle",on:{click:function(e){return t.editTask(t.theTasks[s])}}},[a("icon",{attrs:{icon:"pen"}})],1)],1)],1)})),t.showTaskswithoutDates?t._l(t.tasksWithoutDates,(function(e,s){return a("div",{key:e.id,staticClass:"row",style:{background:"repeating-linear-gradient(90deg, #ededed, #ededed 1px, "+(s%2===0?"#fafafa 1px, #fafafa ":"#fff 1px, #fff ")+t.dayWidth+"px)"}},[a("VueDragResize",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"This task has no dates set.",expression:"'This task has no dates set.'"}],staticClass:"task nodate",attrs:{isActive:!0,x:t.dayOffsetUntilToday*t.dayWidth-6,y:0,h:31,minw:t.dayWidth,snapToGrid:!0,gridX:t.dayWidth,sticks:["mr","ml"],axis:"x",parentLimitation:!0,parentW:t.fullWidth},on:{resizestop:t.resizeTask,dragstop:t.resizeTask,clicked:function(a){return t.setTaskDragged(e)}}},[a("span",[t._v(t._s(e.title))])])],1)})):t._e()],2),a("form",{staticClass:"add-new-task",on:{submit:function(e){return e.preventDefault(),t.addNewTask()}}},[a("transition",{attrs:{name:"width"}},[t.newTaskFieldActive?a("input",{directives:[{name:"model",rawName:"v-model",value:t.newTaskTitle,expression:"newTaskTitle"}],ref:"newTaskTitleField",staticClass:"input",attrs:{type:"text"},domProps:{value:t.newTaskTitle},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.newTaskFieldActive=!1},blur:t.hideCrateNewTask,input:function(e){e.target.composing||(t.newTaskTitle=e.target.value)}}}):t._e()]),a("button",{staticClass:"button is-primary noshadow",on:{click:t.showCreateNewTask}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"plus"}})],1),t._v(" Add a new task ")])],1),a("transition",{attrs:{name:"fade"}},[t.isTaskEdit?a("div",{staticClass:"card taskedit"},[a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v(" Edit Task ")]),a("a",{staticClass:"card-header-icon",on:{click:function(){t.isTaskEdit=!1,t.taskToEdit=null}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"times"}})],1)])]),a("div",{staticClass:"card-content"},[a("div",{staticClass:"content"},[a("edit-task",{attrs:{task:t.taskToEdit}})],1)])]):t._e()])],1)},Ar=[],Er=a("3b58"),$r=a.n(Er),Pr={name:"GanttChart",components:{PriorityLabel:K,EditTask:fr,VueDragResize:$r.a},props:{listId:{type:Number,required:!0},showTaskswithoutDates:{type:Boolean,default:!1},dateFrom:{default:new Date((new Date).setDate((new Date).getDate()-15))},dateTo:{default:new Date((new Date).setDate((new Date).getDate()+30))},dayWidth:{type:Number,default:35}},data:function(){return{days:[],startDate:null,endDate:null,theTasks:[],tasksWithoutDates:[],taskService:M,taskDragged:null,fullWidth:0,now:null,dayOffsetUntilToday:0,isTaskEdit:!1,taskToEdit:null,newTaskTitle:"",newTaskFieldActive:!1,priorities:{},taskCollectionService:vr}},watch:{dateFrom:"buildTheGanttChart",dateTo:"buildTheGanttChart",listId:"parseTasks"},created:function(){this.now=new Date,this.taskCollectionService=new vr,this.taskService=new M,this.priorities=q},mounted:function(){this.buildTheGanttChart()},methods:{buildTheGanttChart:function(){this.setDates(),this.prepareGanttDays(),this.parseTasks()},setDates:function(){this.startDate=new Date(this.dateFrom),this.endDate=new Date(this.dateTo),this.dayOffsetUntilToday=Math.floor((this.now-this.startDate)/1e3/60/60/24)+1},prepareGanttDays:function(){for(var t={},e=this.startDate;e<=this.endDate;e.setDate(e.getDate()+1)){var a=new Date(e);void 0===t[a.getFullYear()+""]&&(t[a.getFullYear()+""]={}),void 0===t[a.getFullYear()+""][a.getMonth()+""]&&(t[a.getFullYear()+""][a.getMonth()+""]=[]),t[a.getFullYear()+""][a.getMonth()+""].push(a),this.fullWidth+=this.dayWidth}this.$set(this,"days",t)},parseTasks:function(){this.setDates(),this.prepareTasks()},prepareTasks:function(){var t=this,e=function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return t.taskCollectionService.getAll({listId:t.listId},{},a).then((function(s){return a<t.taskCollectionService.totalPages?e(a+1).then((function(t){return s.concat(t)})):s})).catch((function(t){return Promise.reject(t)}))};e().then((function(e){t.theTasks=e.filter((function(e){return null!==e.startDate||e.done||t.tasksWithoutDates.push(e),e.startDate>=t.startDate&&e.endDate<=t.endDate})).map((function(e){return t.addGantAttributes(e)})).sort((function(t,e){return t.startDate<e.startDate?-1:t.startDate>e.startDate?1:0}))})).catch((function(e){t.error(e,t)}))},addGantAttributes:function(t){return null===t.endDate?this.endDate:t.endDate,t.durationDays=Math.floor((t.endDate-t.startDate)/1e3/60/60/24)+1,t.offsetDays=Math.floor((t.startDate-this.startDate)/1e3/60/60/24)+1,t},setTaskDragged:function(t){this.taskDragged=t},resizeTask:function(t){var e=this;setTimeout((function(){if(!e.isTaskEdit){var a=null===e.taskDragged.startDate,s=new Date(e.startDate);s.setDate(s.getDate()+t.left/e.dayWidth),s.setUTCHours(0),s.setUTCMinutes(0),s.setUTCSeconds(0),s.setUTCMilliseconds(0),e.taskDragged.startDate=s;var i=new Date(s);for(var n in i.setDate(s.getDate()+t.width/e.dayWidth),e.taskDragged.startDate=s,e.taskDragged.endDate=i,e.theTasks)if(e.theTasks[n].id===e.taskDragged.id){e.$set(e,"taskDragged",e.theTasks[n]);break}e.taskService.update(e.taskDragged).then((function(t){if(a){for(var s in e.tasksWithoutDates)if(e.tasksWithoutDates[s].id===t.id){e.tasksWithoutDates.splice(s,1);break}e.theTasks.push(e.addGantAttributes(t))}else for(var i in e.theTasks)if(e.theTasks[i].id===t.id){e.$set(e.theTasks,i,e.addGantAttributes(t));break}})).catch((function(t){e.error(t,e)}))}}),100)},editTask:function(t){this.taskToEdit=t,this.isTaskEdit=!0},showCreateNewTask:function(){var t=this;this.newTaskFieldActive||setTimeout((function(){t.newTaskFieldActive=!0,t.$nextTick((function(){return t.$refs.newTaskTitleField.focus()}))}),100)},hideCrateNewTask:function(){var t=this;""===this.newTaskTitle&&this.$nextTick((function(){return t.newTaskFieldActive=!1}))},addNewTask:function(){var t=this;if(this.newTaskFieldActive){var e=new P({title:this.newTaskTitle,listId:this.listId});this.taskService.create(e).then((function(e){t.tasksWithoutDates.push(t.addGantAttributes(e)),t.newTaskTitle="",t.hideCrateNewTask()})).catch((function(e){t.error(e,t)}))}}}},Nr=Pr,Lr=Object(z["a"])(Nr,jr,Ar,!1,null,null,null),Rr=Lr.exports,Mr={name:"Gantt",components:{Fancycheckbox:ht,flatPickr:ds.a,GanttChart:Rr},created:function(){Hn(this.$route.params.listId,this.$route.name)},data:function(){return{showTaskswithoutDates:!1,dayWidth:35,dateFrom:null,dateTo:null,flatPickerConfig:{altFormat:"j M Y",altInput:!0,dateFormat:"Y-m-d",enableTime:!1}}},beforeMount:function(){this.dateFrom=new Date((new Date).setDate((new Date).getDate()-15)),this.dateTo=new Date((new Date).setDate((new Date).getDate()+30))}},Br=Mr,Ur=Object(z["a"])(Br,Sr,Or,!1,null,null,null),Fr=Ur.exports,Wr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-view loader-container",class:{"is-loading":t.taskCollectionService.loading}},[a("div",{staticClass:"filter-container"},[a("div",{staticClass:"items"},[a("button",{staticClass:"button",on:{click:function(){t.showActiveColumnsFilter=!t.showActiveColumnsFilter,t.showTaskFilter=!1}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"th"}})],1),t._v(" Columns ")]),a("button",{staticClass:"button",on:{click:function(){t.showTaskFilter=!t.showTaskFilter,t.showActiveColumnsFilter=!1}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"filter"}})],1),t._v(" Filters ")])]),a("transition",{attrs:{name:"fade"}},[t.showActiveColumnsFilter?a("div",{staticClass:"card"},[a("div",{staticClass:"card-content"},[a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.id,callback:function(e){t.$set(t.activeColumns,"id",e)},expression:"activeColumns.id"}},[t._v("#")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.done,callback:function(e){t.$set(t.activeColumns,"done",e)},expression:"activeColumns.done"}},[t._v("Done")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.title,callback:function(e){t.$set(t.activeColumns,"title",e)},expression:"activeColumns.title"}},[t._v("Title")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.priority,callback:function(e){t.$set(t.activeColumns,"priority",e)},expression:"activeColumns.priority"}},[t._v("Priority")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.labels,callback:function(e){t.$set(t.activeColumns,"labels",e)},expression:"activeColumns.labels"}},[t._v("Labels")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.assignees,callback:function(e){t.$set(t.activeColumns,"assignees",e)},expression:"activeColumns.assignees"}},[t._v("Assignees")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.dueDate,callback:function(e){t.$set(t.activeColumns,"dueDate",e)},expression:"activeColumns.dueDate"}},[t._v("Due Date")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.startDate,callback:function(e){t.$set(t.activeColumns,"startDate",e)},expression:"activeColumns.startDate"}},[t._v("Start Date")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.endDate,callback:function(e){t.$set(t.activeColumns,"endDate",e)},expression:"activeColumns.endDate"}},[t._v("End Date")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.percentDone,callback:function(e){t.$set(t.activeColumns,"percentDone",e)},expression:"activeColumns.percentDone"}},[t._v("% Done")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.created,callback:function(e){t.$set(t.activeColumns,"created",e)},expression:"activeColumns.created"}},[t._v("Created")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.updated,callback:function(e){t.$set(t.activeColumns,"updated",e)},expression:"activeColumns.updated"}},[t._v("Updated")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.createdBy,callback:function(e){t.$set(t.activeColumns,"createdBy",e)},expression:"activeColumns.createdBy"}},[t._v("Created By")])],1)]):t._e(),t.showTaskFilter?a("filters",{on:{change:function(e){return t.loadTasks(1)}},model:{value:t.params,callback:function(e){t.params=e},expression:"params"}}):t._e()],1)],1),a("table",{staticClass:"table is-hoverable is-fullwidth"},[a("thead",[a("tr",[t.activeColumns.id?a("th",[t._v(" # "),a("sort",{attrs:{order:t.sortBy.id},on:{click:function(e){return t.sort("id")}}})],1):t._e(),t.activeColumns.done?a("th",[t._v(" Done "),a("sort",{attrs:{order:t.sortBy.done},on:{click:function(e){return t.sort("done")}}})],1):t._e(),t.activeColumns.title?a("th",[t._v(" Name "),a("sort",{attrs:{order:t.sortBy.title},on:{click:function(e){return t.sort("title")}}})],1):t._e(),t.activeColumns.priority?a("th",[t._v(" Priority "),a("sort",{attrs:{order:t.sortBy.priority},on:{click:function(e){return t.sort("priority")}}})],1):t._e(),t.activeColumns.labels?a("th",[t._v(" Labels ")]):t._e(),t.activeColumns.assignees?a("th",[t._v(" Assignees ")]):t._e(),t.activeColumns.dueDate?a("th",[t._v(" Due Date "),a("sort",{attrs:{order:t.sortBy.due_date},on:{click:function(e){return t.sort("due_date")}}})],1):t._e(),t.activeColumns.startDate?a("th",[t._v(" Start Date "),a("sort",{attrs:{order:t.sortBy.start_date},on:{click:function(e){return t.sort("start_date")}}})],1):t._e(),t.activeColumns.endDate?a("th",[t._v(" End Date "),a("sort",{attrs:{order:t.sortBy.end_date},on:{click:function(e){return t.sort("end_date")}}})],1):t._e(),t.activeColumns.percentDone?a("th",[t._v(" % Done "),a("sort",{attrs:{order:t.sortBy.percent_done},on:{click:function(e){return t.sort("percent_done")}}})],1):t._e(),t.activeColumns.created?a("th",[t._v(" Created "),a("sort",{attrs:{order:t.sortBy.created},on:{click:function(e){return t.sort("created")}}})],1):t._e(),t.activeColumns.updated?a("th",[t._v(" Updated "),a("sort",{attrs:{order:t.sortBy.updated},on:{click:function(e){return t.sort("updated")}}})],1):t._e(),t.activeColumns.createdBy?a("th",[t._v(" Created By ")]):t._e()])]),a("tbody",t._l(t.tasks,(function(e){return a("tr",{key:e.id},[t.activeColumns.id?a("td",[a("router-link",{attrs:{to:{name:"task.detail",params:{id:e.id}}}},[""===e.identifier?[t._v(" #"+t._s(e.index)+" ")]:[t._v(" "+t._s(e.identifier)+" ")]],2)],1):t._e(),t.activeColumns.done?a("td",[e.done?a("div",{staticClass:"is-done"},[t._v("Done")]):t._e()]):t._e(),t.activeColumns.title?a("td",[a("router-link",{attrs:{to:{name:"task.detail",params:{id:e.id}}}},[t._v(t._s(e.title))])],1):t._e(),t.activeColumns.priority?a("td",[a("priority-label",{attrs:{priority:e.priority,"show-all":!0}})],1):t._e(),t.activeColumns.labels?a("td",[a("labels",{attrs:{labels:e.labels}})],1):t._e(),t.activeColumns.assignees?a("td",t._l(e.assignees,(function(t,s){return a("user",{key:e.id+"assignee"+t.id+s,attrs:{user:t,"avatar-size":27,"show-username":!1,"is-inline":!0}})})),1):t._e(),t.activeColumns.dueDate?a("date-table-cell",{attrs:{date:e.dueDate}}):t._e(),t.activeColumns.startDate?a("date-table-cell",{attrs:{date:e.startDate}}):t._e(),t.activeColumns.endDate?a("date-table-cell",{attrs:{date:e.endDate}}):t._e(),t.activeColumns.percentDone?a("td",[t._v(t._s(100*e.percentDone)+"%")]):t._e(),t.activeColumns.created?a("date-table-cell",{attrs:{date:e.created}}):t._e(),t.activeColumns.updated?a("date-table-cell",{attrs:{date:e.updated}}):t._e(),t.activeColumns.createdBy?a("td",[a("user",{attrs:{user:e.createdBy,"show-username":!1,"avatar-size":27}})],1):t._e()],1)})),0)]),t.taskCollectionService.totalPages>1?a("nav",{staticClass:"pagination is-centered",attrs:{role:"navigation","aria-label":"pagination"}},[a("router-link",{staticClass:"pagination-previous",attrs:{to:t.getRouteForPagination(t.currentPage-1,"table"),tag:"button",disabled:1===t.currentPage}},[t._v("Previous")]),a("router-link",{staticClass:"pagination-next",attrs:{to:t.getRouteForPagination(t.currentPage+1,"table"),tag:"button",disabled:t.currentPage===t.taskCollectionService.totalPages}},[t._v("Next page")]),a("ul",{staticClass:"pagination-list"},[t._l(t.pages,(function(e,s){return[e.isEllipsis?a("li",{key:"page"+s},[a("span",{staticClass:"pagination-ellipsis"},[t._v("…")])]):a("li",{key:"page"+s},[a("router-link",{staticClass:"pagination-link",class:{"is-current":e.number===t.currentPage},attrs:{to:t.getRouteForPagination(e.number,"table"),"aria-label":"Goto page "+e.number}},[t._v(t._s(e.number))])],1)]}))],2)],1):t._e(),a("transition",{attrs:{name:"modal"}},[a("router-view")],1)],1)},qr=[],Gr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{directives:[{name:"tooltip",rawName:"v-tooltip",value:0===+t.date?"":t.formatDate(t.date),expression:"+date === 0 ? '' : formatDate(date)"}]},[t._v(" "+t._s(0===+t.date?"-":t.formatDateSince(t.date))+" ")])},Hr=[],zr={name:"date-table-cell",props:{date:{type:Date,default:0}}},Yr=zr,Kr=Object(z["a"])(Yr,Gr,Hr,!1,null,null,null),Vr=Kr.exports,Jr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{on:{click:t.click}},["asc"===t.order?a("icon",{attrs:{icon:"sort-up"}}):"desc"===t.order?a("icon",{attrs:{icon:"sort-up",rotation:"180"}}):a("icon",{attrs:{icon:"sort"}})],1)},Qr=[],Xr={name:"sort",props:{order:{type:String,default:"none"}},methods:{click:function(){this.$emit("click")}}},Zr=Xr,to=Object(z["a"])(Zr,Jr,Qr,!1,null,null,null),eo=to.exports,ao={name:"Table",components:{Filters:_r,Sort:eo,Fancycheckbox:ht,DateTableCell:Vr,Labels:tt,PriorityLabel:K,User:rt},mixins:[kr],data:function(){return{showActiveColumnsFilter:!1,activeColumns:{id:!0,done:!0,title:!0,priority:!1,labels:!0,assignees:!0,dueDate:!0,startDate:!1,endDate:!1,percentDone:!1,created:!1,updated:!1,createdBy:!1},sortBy:{id:"desc"}}},created:function(){var t=localStorage.getItem("tableViewColumns");null!==t&&this.$set(this,"activeColumns",JSON.parse(t));var e=localStorage.getItem("tableViewSortBy");null!==e&&this.$set(this,"sortBy",JSON.parse(e)),this.$set(this.params,"filter_by",[]),this.$set(this.params,"filter_value",[]),this.$set(this.params,"filter_comparator",[]),this.initTasks(1),Hn(this.$route.params.listId,this.$route.name)},methods:{initTasks:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=this.params;s.sort_by=[],s.order_by=[],Object.keys(this.sortBy).map((function(t){s.sort_by.push(t),s.order_by.push(e.sortBy[t])})),this.loadTasks(t,a,s)},sort:function(t){var e=this.sortBy[t];"undefined"===typeof e||"none"===e?this.$set(this.sortBy,t,"desc"):"desc"===e?this.$set(this.sortBy,t,"asc"):this.$delete(this.sortBy,t),this.initTasks(this.currentPage,this.searchTerm),localStorage.setItem("tableViewSortBy",JSON.stringify(this.sortBy))},saveTaskColumns:function(){localStorage.setItem("tableViewColumns",JSON.stringify(this.activeColumns))}}},so=ao,io=Object(z["a"])(so,Wr,qr,!1,null,null,null),no=io.exports;s["default"].use(r["a"]);var ro=new r["a"]({mode:"history",scrollBehavior:function(t,e,a){return a||(t.hash?{selector:t.hash}:{x:0,y:0})},routes:[{path:"/",name:"home",component:At},{path:"*",name:"404",component:Rt},{path:"/login",name:"user.login",component:Ht},{path:"/get-password-reset",name:"user.password-reset.request",component:ue},{path:"/password-reset",name:"user.password-reset.reset",component:ne},{path:"/register",name:"user.register",component:Qt},{path:"/user/settings",name:"user.settings",component:_e},{path:"/share/:share/auth",name:"link-share.auth",component:ss},{path:"/namespaces",name:"namespaces.index",component:Qi},{path:"/namespaces/new",name:"namespace.create",component:Bi},{path:"/namespaces/:id/edit",name:"namespace.edit",component:Hi},{path:"/namespaces/:id/list",name:"list.create",component:Ae},{path:"/lists/:id/edit",name:"list.edit",component:Ha},{path:"/tasks/:id",name:"task.detail",component:Oi},{path:"/tasks/by/:type",name:"tasks.range",component:Qa},{path:"/lists/:listId",name:"list.index",component:Jn,children:[{path:"/lists/:listId/list",name:"list.list",component:Ir,children:[{path:"/tasks/:id",name:"task.list.detail",component:$i}]},{path:"/lists/:listId/gantt",name:"list.gantt",component:Fr,children:[{path:"/tasks/:id",name:"task.gantt.detail",component:$i}]},{path:"/lists/:listId/table",name:"list.table",component:no},{path:"/lists/:listId/kanban",name:"list.kanban",component:or,children:[{path:"/tasks/:id",name:"task.kanban.detail",component:$i}]}]},{path:"/teams",name:"teams.index",component:sn},{path:"/teams/new",name:"teams.create",component:kn},{path:"/teams/:id/edit",name:"teams.edit",component:un},{path:"/labels",name:"labels.index",component:_n},{path:"/migrate",name:"migrate.start",component:On},{path:"/migrate/:service",name:"migrate.service",component:Wn}]}),oo=a("fc6f"),co=a("60c0"),lo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("notifications",{attrs:{position:"bottom left"},scopedSlots:t._u([{key:"body",fn:function(e){return[a("div",{class:["vue-notification-template","vue-notification",e.item.type],on:{click:function(a){return t.close(e)}}},[e.item.title?a("div",{staticClass:"notification-title",domProps:{innerHTML:t._s(e.item.title)}}):t._e(),a("div",{staticClass:"notification-content",domProps:{innerHTML:t._s(e.item.text)}}),e.item.data&&e.item.data.actions&&e.item.data.actions.length>0?a("div",{staticClass:"buttons is-right"},t._l(e.item.data.actions,(function(e,s){return a("button",{key:"action_"+s,staticClass:"button noshadow is-small",on:{click:e.callback}},[t._v(" "+t._s(e.title)+" ")])})),0):t._e()])]}}])})},uo=[],ho={name:"notification",methods:{close:function(t){t.close()}}},mo=ho,po=(a("f339"),Object(z["a"])(mo,lo,uo,!1,null,"ad8ace42",null)),fo=po.exports,vo={name:"app",components:{Notification:fo},data:function(){return{namespaceService:Na,menuActive:!0,currentDate:new Date,userMenuActive:!1,authTypes:oo,updateAvailable:!1,registration:null,refreshing:!1}},beforeMount:function(){var t=this;this.$store.commit(gt,navigator.onLine),window.addEventListener("online",(function(){return t.$store.commit(gt,navigator.onLine)})),window.addEventListener("offline",(function(){return t.$store.commit(gt,navigator.onLine)})),void 0!==this.$route.query.userPasswordReset&&(localStorage.removeItem("passwordResetToken"),localStorage.setItem("passwordResetToken",this.$route.query.userPasswordReset),ro.push({name:"user.password-reset.reset"})),void 0!==this.$route.query.userEmailConfirm&&(localStorage.removeItem("emailConfirmToken"),localStorage.setItem("emailConfirmToken",this.$route.query.userEmailConfirm),ro.push({name:"user.login"}))},beforeCreate:function(){var t=this;this.$store.dispatch("config/update"),this.$store.dispatch("auth/checkAuth").then((function(){t.userAuthenticated||"user.login"===t.$route.name||"user.password-reset.request"===t.$route.name||"user.password-reset.reset"===t.$route.name||"user.register"===t.$route.name||"link-share.auth"===t.$route.name||ro.push({name:"user.login"}),!t.userAuthenticated||t.userInfo.type!==oo.USER||"home"!==t.$route.params.name&&0!==t.namespaces.length||t.loadNamespaces()}))},created:function(){var t=this;document.addEventListener(co.SW_UPDATED,this.showRefreshUI,{once:!0}),navigator&&navigator.serviceWorker&&navigator.serviceWorker.addEventListener("controllerchange",(function(){t.refreshing||(t.refreshing=!0,window.location.reload())})),window.innerWidth<770&&(this.menuActive=!1),this.$store.dispatch("auth/renewToken"),window.addEventListener("focus",(function(){if(t.userAuthenticated){var e=t.userInfo.exp-+new Date/1e3;if(e<0)return t.$store.dispatch("auth/checkAuth"),void ro.push({name:"user.login"});e<216e3&&(t.$store.dispatch("auth/renewToken"),console.log("renewed token"))}}))},watch:{$route:"doStuffAfterRoute"},computed:Object(l["b"])({userInfo:function(t){return t.auth.info},userAuthenticated:function(t){return t.auth.authenticated},motd:function(t){return t.config.motd},online:gt,fullpage:Ct,namespaces:function(t){return t.namespaces.namespaces.filter((function(t){return!t.isArchived}))},currentList:wt,background:"background"}),methods:{logout:function(){this.$store.dispatch("auth/logout"),ro.push({name:"user.login"})},loadNamespaces:function(){this.$store.dispatch("namespaces/loadNamespaces")},loadNamespacesIfNeeded:function(t){this.userAuthenticated&&this.userInfo&&this.userInfo.type===oo.USER&&("home"===t.name||0===this.namespaces.length)&&this.loadNamespaces()},doStuffAfterRoute:function(t){this.$store.state[Ct]&&this.$store.commit(Ct,!1),this.loadNamespacesIfNeeded(t),this.userMenuActive=!1,window.innerWidth<770&&(this.menuActive=!1),"home"!==this.$route.name&&"namespace.edit"!==this.$route.name&&"teams.index"!==this.$route.name&&"teams.edit"!==this.$route.name&&"tasks.range"!==this.$route.name&&"labels.index"!==this.$route.name&&"migrate.start"!==this.$route.name&&"migrate.wunderlist"!==this.$route.name&&"user.settings"!==this.$route.name&&"namespaces.index"!==this.$route.name||this.$store.commit(wt,{})},showRefreshUI:function(t){console.log("recieved refresh event",t),this.registration=t.detail,this.updateAvailable=!0},refreshApp:function(){this.updateExists=!1,this.registration&&this.registration.waiting&&this.registration.waiting.postMessage("skipWaiting")}}},ko=vo,bo=Object(z["a"])(ko,i,n,!1,null,null,null),go=bo.exports,Co=a("5c1b"),wo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-container"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"header"},[t._t("header")],2),a("div",{staticClass:"content"},[t._t("text")],2),a("div",{staticClass:"actions"},[a("button",{staticClass:"button is-danger is-inverted noshadow",on:{click:function(e){return t.$emit("close")}}},[t._v("Cancel")]),a("button",{staticClass:"button is-success noshadow",on:{click:function(e){return t.$emit("submit")}}},[t._v("Do it!")])])])])])])},yo=[],_o={name:"modal",mounted:function(){var t=this;document.addEventListener("keydown",(function(e){27===e.keyCode&&t.$emit("close")}))}},To=_o,Do=Object(z["a"])(To,wo,yo,!1,null,null,null),xo=Do.exports,Io=(a("1e59"),a("ee98")),So=a.n(Io),Oo=a("ecee"),jo=a("c074"),Ao=a("b702"),Eo=a("ad3d"),$o=a("e37d"),Po=a("9483");Object(Po["a"])("".concat("/","sw.js"),{ready:function(){console.log("App is being served from cache by a service worker.")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(t){console.log("New content is available; please refresh."),document.dispatchEvent(new CustomEvent(co.SW_UPDATED,{detail:t}))},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),navigator&&navigator.serviceWorker&&navigator.serviceWorker.addEventListener("message",(function(t){var e=t.data.action,a=t.ports[0];"getBearerToken"===e?(console.debug("Token request from sw"),a.postMessage({authToken:localStorage.getItem("token")})):(console.error("Unknown event",t),a.postMessage({error:"Unknown request"}))}));var No,Lo=a("1556"),Ro=a("b166"),Mo={namespaced:!0,state:function(){return{version:"",frontendUrl:"",motd:"",linkSharingEnabled:!0,maxFileSize:"20MB",registrationEnabled:!0,availableMigrators:[],taskAttachmentsEnabled:!0,totpEnabled:!0,enabledBackgroundProviders:[]}},mutations:Object(v["a"])({},_t,(function(t,e){t.version=e.version,t.frontendUrl=e.frontend_url,t.motd=e.motd,t.linkSharingEnabled=e.link_sharing_enabled,t.maxFileSize=e.max_file_size,t.registrationEnabled=e.registration_enabled,t.availableMigrators=e.available_migrators,t.taskAttachmentsEnabled=e.task_attachments_enabled,t.totpEnabled=e.totp_enabled,t.enabledBackgroundProviders=e.enabled_background_providers})),actions:{update:function(t){Ut.get("info").then((function(e){t.commit(_t,e.data)}))}}},Bo={namespaced:!0,state:function(){return{authenticated:!1,isLinkShareAuth:!1,info:{},needsTotpPasscode:!1}},mutations:{info:function(t,e){t.info=e},authenticated:function(t,e){t.authenticated=e},isLinkShareAuth:function(t,e){t.isLinkShareAuth=e},needsTotpPasscode:function(t,e){t.needsTotpPasscode=e}},actions:{login:function(t,e){t.commit(kt,!0,{root:!0}),localStorage.removeItem("token");var a={username:e.username,password:e.password};return e.totpPasscode&&(a.totp_passcode=e.totpPasscode),Ut.post("login",a).then((function(e){return localStorage.setItem("token",e.data.token),t.commit("isLinkShareAuth",!1),t.dispatch("checkAuth"),Promise.resolve()})).catch((function(a){if(a.response){if(1017===a.response.data.code&&!e.totpPasscode)return t.commit("needsTotpPasscode",!0),Promise.reject();var s=a.response.data.message;401===a.response.status&&(s="Wrong username or password."),t.commit(bt,s,{root:!0})}return Promise.reject()})).finally((function(){t.commit(kt,!1,{root:!0})}))},register:function(t,e){return Ut.post("register",{username:e.username,email:e.email,password:e.password}).then((function(){return t.dispatch("login",e)})).catch((function(e){return e.response&&t.commit(bt,e.response.data.message,{root:!0}),Promise.reject()})).finally((function(){t.commit(kt,!1,{root:!0})}))},linkShareAuth:function(t,e){return Ut.post("/shares/"+e+"/auth").then((function(e){return localStorage.setItem("token",e.data.token),t.dispatch("checkAuth"),Promise.resolve(e.data)})).catch((function(t){return Promise.reject(t)}))},checkAuth:function(t){var e=localStorage.getItem("token"),a=!1;if(e){var s=e.split(".")[1].replace("-","+").replace("_","/"),i=new O(JSON.parse(window.atob(s))),n=Math.round((new Date).getTime()/1e3);i.exp>=n&&(a=!0),t.commit("info",i)}return t.commit("authenticated",a),Promise.resolve()},renewToken:function(t){t.state.authenticated&&Ut.post("user/token",null,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){localStorage.setItem("token",e.data.token),t.dispatch("checkAuth")})).catch((function(t){console.log("Error renewing token: ",t)}))},logout:function(t){localStorage.removeItem("token"),t.dispatch("checkAuth")}}},Uo={namespaced:!0,state:function(){return{namespaces:[]}},mutations:{namespaces:function(t,e){t.namespaces=e},setNamespaceById:function(t,e){for(var a in t.namespaces)if(t.namespaces[a].id===e.id)return e.lists=t.namespaces[a].lists,void s["default"].set(t.namespaces,a,e)},setListInNamespaceById:function(t,e){for(var a in t.namespaces)for(var i in t.namespaces[a].lists)if(t.namespaces[a].lists[i].id===e.id){var n=t.namespaces[a];return n.lists[i]=e,void s["default"].set(t.namespaces,a,n)}},addNamespace:function(t,e){t.namespaces.push(e)},addListToNamespace:function(t,e){for(var a in t.namespaces)if(t.namespaces[a].id===e.namespaceId)return void t.namespaces[a].lists.push(e)}},getters:{getListAndNamespaceById:function(t){return function(e){for(var a in t.namespaces)for(var s in t.namespaces[a].lists)if(t.namespaces[a].lists[s].id===e)return{list:t.namespaces[a].lists[s],namespace:t.namespaces[a]};return null}},getNamespaceById:function(t){return function(e){for(var a in t.namespaces)if(t.namespaces[a].id===e)return t.namespaces[a];return null}}},actions:{loadNamespaces:function(t){var e=new Na;return e.getAll({},{is_archived:!0}).then((function(e){t.commit("namespaces",e);var a=[];return e.forEach((function(t){t.lists.forEach((function(t){a.push(t)}))})),t.commit("lists/addLists",a,{root:!0}),Promise.resolve()})).catch((function(t){return Promise.reject(t)}))}}},Fo=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){return Object(h["a"])(this,a),e.call(this,{getAll:"/lists/{listId}/buckets",create:"/lists/{listId}/buckets",update:"/lists/{listId}/buckets/{id}",delete:"/lists/{listId}/buckets/{id}"})}return Object(m["a"])(a,[{key:"modelFactory",value:function(t){return new Zn(t)}}]),a}(D),Wo=function(t){var e=setTimeout((function(){t.commit(kt,!0,{root:!0})}),100);return function(){clearTimeout(e),t.commit(kt,!1,{root:!0})}},qo={namespaced:!0,state:function(){return{buckets:[],listId:0}},mutations:{setListId:function(t,e){t.listId=e},setBuckets:function(t,e){t.buckets=e},addBucket:function(t,e){t.buckets.push(e)},removeBucket:function(t,e){for(var a in t.buckets)t.buckets[a].id===e.id&&t.buckets.splice(a,1)},setBucketById:function(t,e){for(var a in t.buckets)if(t.buckets[a].id===e.id)return void s["default"].set(t.buckets,a,e)},setBucketByIndex:function(t,e){var a=e.bucketIndex,i=e.bucket;s["default"].set(t.buckets,a,i)},setTaskInBucketByIndex:function(t,e){var a=e.bucketIndex,i=e.taskIndex,n=e.task,r=t.buckets[a];r.tasks[i]=n,s["default"].set(t.buckets,a,r)},setTaskInBucket:function(t,e){if(0!==t.buckets.length)for(var a in t.buckets)if(t.buckets[a].id===e.bucketId){for(var i in t.buckets[a].tasks)if(t.buckets[a].tasks[i].id===e.id){var n=t.buckets[a];return n.tasks[i]=e,void s["default"].set(t.buckets,a,n)}return}},addTaskToBucket:function(t,e){var a=er(t.buckets,(function(t){return t.id===e.bucketId}));t.buckets[a].tasks.push(e)},removeTaskInBucket:function(t,e){if(0!==t.buckets.length)for(var a in t.buckets)if(t.buckets[a].id===e.bucketId){for(var i in t.buckets[a].tasks)if(t.buckets[a].tasks[i].id===e.id){var n=t.buckets[a];return n.tasks.splice(i,1),void s["default"].set(t.buckets,a,n)}return}}},getters:{getTaskById:function(t){return function(e){for(var a in t.buckets)for(var s in t.buckets[a].tasks)if(t.buckets[a].tasks[s].id===e)return{bucketIndex:a,taskIndex:s,task:t.buckets[a].tasks[s]};return{bucketIndex:null,taskIndex:null,task:null}}}},actions:{loadBucketsForList:function(t,e){var a=Wo(t);t.commit("setBuckets",[]);var s=new Fo;return s.getAll({listId:e}).then((function(a){return t.commit("setBuckets",a),t.commit("setListId",e),Promise.resolve()})).catch((function(t){return Promise.reject(t)})).finally((function(){a()}))},createBucket:function(t,e){var a=Wo(t),s=new Fo;return s.create(e).then((function(e){return t.commit("addBucket",e),Promise.resolve(e)})).catch((function(t){return Promise.reject(t)})).finally((function(){a()}))},deleteBucket:function(t,e){var a=Wo(t),s=new Fo;return s.delete(e).then((function(a){return t.commit("removeBucket",e),t.dispatch("loadBucketsForList",e.listId),Promise.resolve(a)})).catch((function(t){return Promise.reject(t)})).finally((function(){a()}))},updateBucket:function(t,e){var a=Wo(t),s=new Fo;return s.update(e).then((function(e){var a=er(t.state.buckets,(function(t){return t.id===e.id})),s=e;return s.tasks=t.state.buckets[a].tasks,t.commit("setBucketByIndex",{bucketIndex:a,bucket:s}),Promise.resolve(e)})).catch((function(t){return Promise.reject(t)})).finally((function(){a()}))}}},Go={namespaced:!0,state:function(){return{}},actions:{update:function(t,e){var a=new M;return a.update(e).then((function(e){return t.commit("kanban/setTaskInBucket",e,{root:!0}),Promise.resolve(e)})).catch((function(t){return Promise.reject(t)}))},delete:function(t,e){var a=new M;return a.delete(e).then((function(a){return t.commit("kanban/removeTaskInBucket",e,{root:!0}),Promise.resolve(a)})).catch((function(t){return Promise.reject(t)}))},addTaskAttachment:function(t,e){var a=e.taskId,s=e.attachment,i=t.rootGetters["kanban/getTaskById"](a);null!==i.task&&(i.task.attachments.push(s),t.commit("kanban/setTaskInBucketByIndex",i,{root:!0}))},addAssignee:function(t,e){var a=e.user,s=e.taskId,i=new Ps({userId:a.id,taskId:s}),n=new Ns;return n.create(i).then((function(e){var i=t.rootGetters["kanban/getTaskById"](s);return null===i.task?(console.debug("Could not add assignee to task in kanban, task not found",i),Promise.resolve(e)):(i.task.assignees.push(a),t.commit("kanban/setTaskInBucketByIndex",i,{root:!0}),Promise.resolve(e))})).catch((function(t){return Promise.reject(t)}))},removeAssignee:function(t,e){var a=e.user,s=e.taskId,i=new Ps({userId:a.id,taskId:s}),n=new Ns;return n.delete(i).then((function(e){var i=t.rootGetters["kanban/getTaskById"](s);if(null===i.task)return console.debug("Could not remove assignee from task in kanban, task not found",i),Promise.resolve(e);for(var n in i.task.assignees)if(i.task.assignees[n].id===a.id){i.task.assignees.splice(n,1);break}return t.commit("kanban/setTaskInBucketByIndex",i,{root:!0}),Promise.resolve(e)})).catch((function(t){return Promise.reject(t)}))},addLabel:function(t,e){var a=e.label,s=e.taskId,i=new xs,n=new Ds({taskId:s,labelId:a.id});return i.create(n).then((function(e){var i=t.rootGetters["kanban/getTaskById"](s);return null===i.task?(console.debug("Could not add label to task in kanban, task not found",i),Promise.resolve(e)):(i.task.labels.push(a),t.commit("kanban/setTaskInBucketByIndex",i,{root:!0}),Promise.resolve(e))})).catch((function(t){return Promise.reject(t)}))},removeLabel:function(t,e){var a=e.label,s=e.taskId,i=new xs,n=new Ds({taskId:s,labelId:a.id});return i.delete(n).then((function(e){var i=t.rootGetters["kanban/getTaskById"](s);if(null===i.task)return console.debug("Could not remove label from task in kanban, task not found",i),Promise.resolve(e);for(var n in i.task.labels)if(i.task.labels[n].id===a.id){i.task.labels.splice(n,1);break}return t.commit("kanban/setTaskInBucketByIndex",i,{root:!0}),Promise.resolve(e)})).catch((function(t){return Promise.reject(t)}))}}},Ho={namespaced:!0,state:function(){return{}},mutations:{addList:function(t,e){s["default"].set(t,e.id,e)},addLists:function(t,e){e.forEach((function(e){s["default"].set(t,e.id,e)}))}},getters:{getListById:function(t){return function(e){return"undefined"!==typeof t[e]?t[e]:null}}}};s["default"].use(l["a"]);var zo=new l["a"].Store({modules:{config:Mo,auth:Bo,namespaces:Uo,kanban:qo,tasks:Go,lists:Ho},state:{loading:!1,errorMessage:"",online:!0,isFullpage:!1,currentList:{id:0},background:"",hasTasks:!1},mutations:(No={},Object(v["a"])(No,kt,(function(t,e){t.loading=e})),Object(v["a"])(No,bt,(function(t,e){t.errorMessage=e})),Object(v["a"])(No,gt,(function(t,e){t.online=e})),Object(v["a"])(No,Ct,(function(t,e){t.isFullpage=e})),Object(v["a"])(No,wt,(function(t,e){if(e.id!==t.currentList.id||e.backgroundInformation&&!t.currentList.backgroundInformation||e.backgroundInformation&&e.backgroundInformation.unsplashId&&t.currentList&&t.currentList.backgroundInformation&&t.currentList.backgroundInformation.unsplashId&&e.backgroundInformation.unsplashId!==t.currentList.backgroundInformation.unsplashId||e.backgroundInformation&&e.backgroundInformation.type&&t.currentList&&t.currentList.backgroundInformation&&t.currentList.backgroundInformation.type)if(e.backgroundInformation){var a=new Ie;a.background(e).then((function(e){t.background=e})).catch((function(t){console.error("Error getting background image for list",e.id,t)}))}else t.background=null;t.currentList=e})),Object(v["a"])(No,yt,(function(t,e){t.hasTasks=e})),No)});console.info("Vikunja frontend version ".concat(Co["a"])),"/"===window.API_URL.substr(window.API_URL.length-1,window.API_URL.length)&&(window.API_URL=window.API_URL.substr(0,window.API_URL.length-1)),s["default"].component("modal",xo),s["default"].config.productionTip=!1,s["default"].use(So.a),Oo["c"].add(jo["C"]),Oo["c"].add(jo["z"]),Oo["c"].add(jo["s"]),Oo["c"].add(jo["H"]),Oo["c"].add(jo["k"]),Oo["c"].add(jo["b"]),Oo["c"].add(jo["q"]),Oo["c"].add(jo["K"]),Oo["c"].add(jo["M"]),Oo["c"].add(jo["L"]),Oo["c"].add(jo["t"]),Oo["c"].add(jo["w"]),Oo["c"].add(jo["J"]),Oo["c"].add(jo["F"]),Oo["c"].add(jo["d"]),Oo["c"].add(Ao["e"]),Oo["c"].add(jo["c"]),Oo["c"].add(jo["A"]),Oo["c"].add(jo["e"]),Oo["c"].add(Ao["a"]),Oo["c"].add(jo["m"]),Oo["c"].add(jo["G"]),Oo["c"].add(jo["h"]),Oo["c"].add(jo["f"]),Oo["c"].add(jo["v"]),Oo["c"].add(jo["x"]),Oo["c"].add(jo["i"]),Oo["c"].add(jo["j"]),Oo["c"].add(jo["y"]),Oo["c"].add(Ao["d"]),Oo["c"].add(jo["a"]),Oo["c"].add(jo["u"]),Oo["c"].add(Ao["b"]),Oo["c"].add(jo["p"]),Oo["c"].add(jo["B"]),Oo["c"].add(jo["g"]),Oo["c"].add(Ao["c"]),Oo["c"].add(jo["I"]),Oo["c"].add(jo["D"]),Oo["c"].add(jo["E"]),Oo["c"].add(jo["r"]),Oo["c"].add(jo["l"]),Oo["c"].add(jo["o"]),Oo["c"].add(jo["n"]),s["default"].component("icon",Eo["a"]),s["default"].use($o["a"],{defaultHtml:!1}),s["default"].directive("focus",{inserted:function(t){window.innerWidth>769&&t.focus()}}),s["default"].mixin({methods:{formatDateSince:function(t){var e=new Date,a="";return t>e&&(a+="in "),a+=Object(Lo["a"])(t,e),t<e&&(a+=" ago"),a},formatDate:function(t){return Object(Ro["a"])(t,"PPPPpppp")},error:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Ft.error(t,e,a)},success:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Ft.success(t,e,a)},colorIsDark:j}}),new s["default"]({router:ro,store:zo,render:function(t){return t(go)}}).$mount("#app")},"5c1b":function(t){t.exports=JSON.parse('{"a":"0.12"}')},"60c0":function(t){t.exports=JSON.parse('{"SW_UPDATED":"swUpdated"}')},"63e7":function(t,e,a){"use strict";var s=a("d0af"),i=a.n(s);i.a},6613:function(t,e,a){},8968:function(t,e,a){"use strict";var s=a("d7c4"),i=a.n(s);i.a},"97df":function(t,e,a){},"9f07":function(t){t.exports=JSON.parse('{"UNSET":0,"LOW":1,"MEDIUM":2,"HIGH":3,"URGENT":4,"DO_NOW":5}')},a1b4:function(t){t.exports=JSON.parse('{"READ":0,"READ_WRITE":1,"ADMIN":2}')},b8e5:function(t){t.exports=JSON.parse('{"subtask":["Subtask","Subtasks"],"parenttask":["Parent Task","Parent Tasks"],"related":["Related Task","Related Tasks"],"duplicateof":["Duplicate Of","Duplicates Of"],"duplicates":["Duplicates","Duplicates"],"blocking":["Blocking","Blocking"],"blocked":["Blocked By","Blocked By"],"precedes":["Preceds","Preceds"],"follows":["Follows","Follows"],"copiedfrom":["Copied From","Copied From"],"copiedto":["Copied To","Copied To"]}')},bb12:function(t,e,a){},cff0:function(t,e,a){},d0af:function(t,e,a){},d7c4:function(t,e,a){},dfcd:function(t,e,a){},e011:function(t,e,a){"use strict";var s=a("0ea7"),i=a.n(s);i.a},e256:function(t,e,a){},e3aa:function(t,e,a){},f339:function(t,e,a){"use strict";var s=a("e256"),i=a.n(s);i.a},fc6f:function(t){t.exports=JSON.parse('{"UNKNOWN":0,"USER":1,"LINK_SHARE":2}')},fe6e:function(t,e,a){"use strict";var s=a("cff0"),i=a.n(s);i.a}});