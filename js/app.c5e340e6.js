(function(t){function e(e){for(var s,n,c=e[0],l=e[1],u=e[2],d=e[3]||[],h=0,m=[];h<c.length;h++)n=c[h],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&m.push(i[n][0]),i[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);f&&f(e),o.push.apply(o,d);while(m.length)m.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,n=1;n<a.length;n++){var u=a[n];0!==i[u]&&(s=!1)}s&&(r.splice(e--,1),t=l(l.s=a[0]))}return 0===r.length&&(o.forEach((function(t){if(void 0===i[t]){i[t]=null;var e=document.createElement("link");l.nc&&e.setAttribute("nonce",l.nc),e.rel="prefetch",e.as="script",e.href=c(t),document.head.appendChild(e)}})),o.length=0),t}var s={},n={app:0},i={app:0},r=[],o=[];function c(t){return l.p+"js/"+({editor:"editor",multiselect:"multiselect",settings:"settings","user-settings":"user-settings"}[t]||t)+"."+{editor:"dc1d073e",multiselect:"b5f49f60",settings:"8e2d2394","user-settings":"0a08dca5"}[t]+".js"}function l(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(t){var e=[],a={editor:1,settings:1,"user-settings":1};n[t]?e.push(n[t]):0!==n[t]&&a[t]&&e.push(n[t]=new Promise((function(e,a){for(var s="css/"+({editor:"editor",multiselect:"multiselect",settings:"settings","user-settings":"user-settings"}[t]||t)+"."+{editor:"42cd64b7",multiselect:"31d6cfe0",settings:"6655d893","user-settings":"16cf3421"}[t]+".css",i=l.p+s,r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var c=r[o],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===s||u===i))return e()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){c=d[o],u=c.getAttribute("data-href");if(u===s||u===i)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var s=e&&e.target&&e.target.src||i,r=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=s,delete n[t],h.parentNode.removeChild(h),a(r)},h.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){n[t]=0})));var s=i[t];if(0!==s)if(s)e.push(s[2]);else{var r=new Promise((function(e,a){s=i[t]=[e,a]}));e.push(s[2]=r);var o,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=c(t);var d=new Error;o=function(e){u.onerror=u.onload=null,clearTimeout(h);var a=i[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+s+": "+n+")",d.name="ChunkLoadError",d.type=s,d.request=n,a[1](d)}i[t]=void 0}};var h=setTimeout((function(){o({type:"timeout",target:u})}),12e4);u.onerror=u.onload=o,document.head.appendChild(u)}return Promise.all(e)},l.m=t,l.c=s,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)l.d(a,s,function(e){return t[e]}.bind(null,s));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/",l.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=e,u=u.slice();for(var h=0;h<u.length;h++)e(u[h]);var f=d,m=function(){return r.push([0,"chunk-vendors"]),a()}();e([[],{},0,["editor","multiselect","settings","user-settings"]])})({0:function(t,e,a){t.exports=a("56d7")},"0260":function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));a("d81d");var s=a("276c"),n=a("e954"),i=a("920b"),r=a("92a6"),o=a("b1c6"),c=a("4cef"),l=a("8654"),u=function(t){Object(i["a"])(a,t);var e=Object(r["a"])(a);function a(t){var n;return Object(s["a"])(this,a),n=e.call(this,t),""!==n.hexColor&&"#"!==n.hexColor.substring(0,1)&&(n.hexColor="#"+n.hexColor),n.lists=n.lists.map((function(t){return new c["a"](t)})),n.owner=new l["a"](n.owner),n.created=new Date(n.created),n.updated=new Date(n.updated),n}return Object(n["a"])(a,[{key:"defaults",value:function(){return{id:0,title:"",description:"",owner:l["a"],lists:[],isArchived:!1,hexColor:"",created:null,updated:null}}}]),a}(o["a"])},"0402":function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));a("d81d"),a("b0c0"),a("a9e3"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0");var s=a("276c"),n=a("e954"),i=a("fc11"),r=a("bc3a"),o=a.n(r),c=a("2ef0"),l=a("cf2a"),u=function(){function t(e){var a=this;Object(s["a"])(this,t),Object(i["a"])(this,"http",null),Object(i["a"])(this,"loading",!1),Object(i["a"])(this,"uploadProgress",0),Object(i["a"])(this,"paths",{create:"",get:"",getAll:"",update:"",delete:""}),Object(i["a"])(this,"totalPages",0),Object(i["a"])(this,"resultCount",0),this.http=o.a.create({baseURL:window.API_URL,headers:{"Content-Type":"application/json"}});var n=this;this.http.interceptors.request.use((function(t){switch(t.method){case"post":a.useUpdateInterceptor()&&(t.data=n.beforeUpdate(t.data),t.data=JSON.stringify(Object(l["b"])(t.data)));break;case"put":a.useCreateInterceptor()&&(t.data=n.beforeCreate(t.data),t.data=JSON.stringify(Object(l["b"])(t.data)));break;case"delete":a.useDeleteInterceptor()&&(t.data=n.beforeDelete(t.data),t.data=JSON.stringify(Object(l["b"])(t.data)));break}return t})),""!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&(this.http.defaults.headers.common["Authorization"]="Bearer "+localStorage.getItem("token")),this.paths={create:void 0!==e.create?e.create:"",get:void 0!==e.get?e.get:"",getAll:void 0!==e.getAll?e.getAll:"",update:void 0!==e.update?e.update:"",delete:void 0!==e.delete?e.delete:""}}return Object(n["a"])(t,[{key:"useCreateInterceptor",value:function(){return!0}},{key:"useUpdateInterceptor",value:function(){return!0}},{key:"useDeleteInterceptor",value:function(){return!0}},{key:"errorHandler",value:function(t){return Promise.reject(t)}},{key:"getRouteReplacements",value:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={},n=this.getRouteParameterPattern();for(n=new RegExp(n instanceof RegExp?n.source:n,"g");null!==(e=n.exec(t));)s[e[0]]=a[e[1]];return s}},{key:"getRouteParameterPattern",value:function(){return/{([^}]+)}/}},{key:"getReplacedRoute",value:function(t,e){var a=this.getRouteReplacements(t,e);return Object(c["reduce"])(a,(function(t,e,a){return Object(c["replace"])(t,a,e)}),t)}},{key:"setLoading",value:function(){var t=this,e=setTimeout((function(){t.loading=!0}),100);return function(){clearTimeout(e),t.loading=!1}}},{key:"modelFactory",value:function(t){return t}},{key:"modelGetFactory",value:function(t){return this.modelFactory(t)}},{key:"modelGetAllFactory",value:function(t){return this.modelFactory(t)}},{key:"modelCreateFactory",value:function(t){return this.modelFactory(t)}},{key:"modelUpdateFactory",value:function(t){return this.modelFactory(t)}},{key:"beforeGet",value:function(t){return t}},{key:"beforeCreate",value:function(t){return t}},{key:"beforeUpdate",value:function(t){return t}},{key:"beforeDelete",value:function(t){return t}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return""===this.paths.get?Promise.reject({message:"This model is not able to get data."}):this.getM(this.paths.get,t,e)}},{key:"getM",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.setLoading();a=this.beforeGet(a);var i=this.getReplacedRoute(t,a);return this.http.get(i,{params:s}).catch((function(t){return e.errorHandler(t)})).then((function(t){var a=e.modelGetFactory(t.data);return a.maxRight=Number(t.headers["x-max-right"]),Promise.resolve(a)})).finally((function(){n()}))}},{key:"getAll",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(""===this.paths.getAll)return Promise.reject({message:"This model is not able to get data."});a.page=s;var n=this.setLoading();e=this.beforeGet(e);var i=this.getReplacedRoute(this.paths.getAll,e);return this.http.get(i,{params:a}).catch((function(e){return t.errorHandler(e)})).then((function(e){return t.resultCount=Number(e.headers["x-pagination-result-count"]),t.totalPages=Number(e.headers["x-pagination-total-pages"]),Array.isArray(e.data)?Promise.resolve(e.data.map((function(e){return t.modelGetAllFactory(e)}))):null===e.data?Promise.resolve([]):Promise.resolve(t.modelGetAllFactory(e.data))})).finally((function(){n()}))}},{key:"create",value:function(t){var e=this;if(""===this.paths.create)return Promise.reject({message:"This model is not able to create data."});var a=this.setLoading(),s=this.getReplacedRoute(this.paths.create,t);return this.http.put(s,t).catch((function(t){return e.errorHandler(t)})).then((function(a){var s=e.modelCreateFactory(a.data);return"undefined"!==typeof t.maxRight&&(s.maxRight=t.maxRight),Promise.resolve(s)})).finally((function(){a()}))}},{key:"post",value:function(t,e){var a=this,s=this.setLoading();return this.http.post(t,e).catch((function(t){return a.errorHandler(t)})).then((function(t){var s=a.modelUpdateFactory(t.data);return"undefined"!==typeof e.maxRight&&(s.maxRight=e.maxRight),Promise.resolve(s)})).finally((function(){s()}))}},{key:"update",value:function(t){if(""===this.paths.update)return Promise.reject({message:"This model is not able to update data."});var e=this.getReplacedRoute(this.paths.update,t);return this.post(e,t)}},{key:"delete",value:function(t){var e=this;if(""===this.paths.delete)return Promise.reject({message:"This model is not able to delete data."});var a=this.setLoading(),s=this.getReplacedRoute(this.paths.delete,t);return this.http.delete(s,t).catch((function(t){return e.errorHandler(t)})).then((function(t){return Promise.resolve(t.data)})).finally((function(){a()}))}},{key:"uploadFile",value:function(t,e,a){return this.uploadBlob(t,new Blob([e]),a,e.name)}},{key:"uploadBlob",value:function(t,e,a,s){var n=new FormData;return n.append(a,e,s),this.uploadFormData(t,n)}},{key:"uploadFormData",value:function(t,e){var a=this,s=this.setLoading();return this.http.put(t,e,{headers:{"Content-Type":"multipart/form-data; boundary="+e._boundary},onUploadProgress:function(t){a.uploadProgress=Math.round(100*t.loaded/t.total)}}).catch((function(t){return a.errorHandler(t)})).then((function(t){return Promise.resolve(a.modelCreateFactory(t.data))})).finally((function(){a.uploadProgress=0,s()}))}}]),t}()},"0ea7":function(t,e,a){},"0eb6":function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));var s=a("276c"),n=a("e954"),i=a("920b"),r=a("92a6"),o=a("0402"),c=a("6399"),l=a("737d"),u=function(t){Object(i["a"])(a,t);var e=Object(r["a"])(a);function a(){return Object(s["a"])(this,a),e.call(this,{create:"/teams",get:"/teams/{id}",getAll:"/teams",update:"/teams/{id}",delete:"/teams/{id}"})}return Object(n["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(l["a"])(t.created),t.updated=Object(l["a"])(t.updated),t}},{key:"modelFactory",value:function(t){return new c["a"](t)}}]),a}(o["a"])},"105d":function(t,e,a){},"1e59":function(t,e,a){},2505:function(t,e,a){"use strict";a.d(e,"a",(function(){return d}));var s=a("276c"),n=a("e954"),i=a("fbf1"),r=a("f20d"),o=a("920b"),c=a("92a6"),l=a("8654"),u=a("2ef0"),d=function(t){Object(o["a"])(a,t);var e=Object(c["a"])(a);function a(){return Object(s["a"])(this,a),e.apply(this,arguments)}return Object(n["a"])(a,[{key:"defaults",value:function(){return Object(u["merge"])(Object(i["a"])(Object(r["a"])(a.prototype),"defaults",this).call(this),{admin:!1,teamId:0})}}]),a}(l["a"])},"261b":function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));var s=a("276c"),n=a("e954"),i=a("920b"),r=a("92a6"),o=a("0402"),c=a("fbe6"),l=a("737d"),u=function(t){Object(i["a"])(a,t);var e=Object(r["a"])(a);function a(){return Object(s["a"])(this,a),e.call(this,{create:"/tasks/{taskId}/assignees",delete:"/tasks/{taskId}/assignees/{userId}"})}return Object(n["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(l["a"])(t.created),t}},{key:"modelFactory",value:function(t){return new c["a"](t)}}]),a}(o["a"])},2885:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notification is-danger"},[t._v(" Loading failed, please "),a("a",{on:{click:function(){return t.location.reload()}}},[t._v("try again")]),t._v(". If the error persists, please "),a("a",{attrs:{href:"https://vikunja.io/contact/"}},[t._v("contact us")]),t._v(". ")])},n=[],i={name:"error"},r=i,o=a("2877"),c=Object(o["a"])(r,s,n,!1,null,null,null);e["a"]=c.exports},"2f75":function(t,e,a){"use strict";var s=a("5bf2"),n=a.n(s);n.a},"37ef":function(t,e,a){},4565:function(t,e,a){"use strict";var s=a("e3aa"),n=a.n(s);n.a},"45d2":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"legal-links"},[t.imprintUrl?a("a",{attrs:{href:t.imprintUrl,target:"_blank"}},[t._v("Imprint")]):t._e(),t.imprintUrl&&t.privacyPolicyUrl?a("span",[t._v(" | ")]):t._e(),t.privacyPolicyUrl?a("a",{attrs:{href:t.privacyPolicyUrl,target:"_blank"}},[t._v("Privacy policy")]):t._e()])},n=[],i=a("2f62"),r={name:"legal",computed:Object(i["b"])({imprintUrl:function(t){return t.config.legal.imprintUrl},privacyPolicyUrl:function(t){return t.config.legal.privacyPolicyUrl}})},o=r,c=a("2877"),l=Object(c["a"])(o,s,n,!1,null,null,null);e["a"]=l.exports},4928:function(t,e,a){},"4ab6":function(t,e,a){"use strict";var s=a("dfcd"),n=a.n(s);n.a},"4b81":function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var s=a("276c"),n=a("e954"),i=a("920b"),r=a("92a6"),o=a("b1c6"),c=function(t){Object(i["a"])(a,t);var e=Object(r["a"])(a);function a(){return Object(s["a"])(this,a),e.apply(this,arguments)}return Object(n["a"])(a,[{key:"defaults",value:function(){return{id:0,taskId:0,labelId:0}}}]),a}(o["a"])},"4cef":function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));a("d81d");var s=a("276c"),n=a("e954"),i=a("920b"),r=a("92a6"),o=a("b1c6"),c=a("f1a4"),l=a("8654"),u=function(t){Object(i["a"])(a,t);var e=Object(r["a"])(a);function a(t){var n;return Object(s["a"])(this,a),n=e.call(this,t),""!==n.hexColor&&"#"!==n.hexColor.substring(0,1)&&(n.hexColor="#"+n.hexColor),n.tasks=n.tasks.map((function(t){return new c["a"](t)})),n.owner=new l["a"](n.owner),n.created=new Date(n.created),n.updated=new Date(n.updated),n}return Object(n["a"])(a,[{key:"defaults",value:function(){return{id:0,title:"",description:"",owner:l["a"],tasks:[],namespaceId:0,isArchived:!1,hexColor:"",identifier:"",backgroundInformation:null,created:null,updated:null}}}]),a}(o["a"])},"50cf":function(t,e,a){"use strict";var s=a("276c"),n=a("e954"),i=a("920b"),r=a("92a6"),o=a("b1c6"),c=a("8654"),l=(a("a9e3"),function(t){Object(i["a"])(a,t);var e=Object(r["a"])(a);function a(t){var n;return Object(s["a"])(this,a),n=e.call(this,t),n.created=new Date(n.created),n}return Object(n["a"])(a,[{key:"defaults",value:function(){return{id:0,mime:"",name:"",size:"",created:null}}},{key:"getHumanSize",value:function(){var t={0:"B",1:"KB",2:"MB",3:"GB",4:"TB"},e=0,a=this.size;while(a>1024)a/=1024,e++;return Number(Math.round(a+"e2")+"e-2")+" "+t[e]}}]),a}(o["a"]));a.d(e,"a",(function(){return u}));var u=function(t){Object(i["a"])(a,t);var e=Object(r["a"])(a);function a(t){var n;return Object(s["a"])(this,a),n=e.call(this,t),n.createdBy=new c["a"](n.createdBy),n.file=new l(n.file),n.created=new Date(n.created),n}return Object(n["a"])(a,[{key:"defaults",value:function(){return{id:0,taskId:0,file:l,createdBy:c["a"],created:null}}}]),a}(o["a"])},5560:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var s=a("bc3a"),n=a.n(s),i=n.a.create({baseURL:window.API_URL})},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.online?a("div",[a("div",{staticClass:"offline",staticStyle:{height:"0",width:"0"}}),t.userAuthenticated&&t.userInfo&&t.userInfo.type===t.authTypes.USER?a("nav",{staticClass:"navbar main-theme is-fixed-top",class:{"has-background":t.background},attrs:{role:"navigation","aria-label":"main navigation"}},[a("div",{staticClass:"navbar-brand"},[a("router-link",{staticClass:"navbar-item logo",attrs:{to:{name:"home"}}},[5===(new Date).getMonth()?a("img",{attrs:{src:"/images/logo-full-pride.svg",alt:"Vikunja"}}):a("img",{attrs:{src:"/images/logo-full.svg",alt:"Vikunja"}})]),a("a",{staticClass:"menu-show-button",class:{"is-visible":!t.menuActive},on:{click:function(e){t.menuActive=!0}}},[a("icon",{attrs:{icon:"bars"}})],1)],1),a("a",{staticClass:"menu-show-button",on:{click:function(e){t.menuActive=!0}}},[a("icon",{attrs:{icon:"bars"}})],1),t.currentList.id?a("div",{staticClass:"list-title"},[a("h1",{staticClass:"title",style:{opacity:""===t.currentList.title?"0":"1"}},[t._v(" "+t._s(""===t.currentList.title?"Loading...":t.currentList.title)+" ")]),t.canWriteCurrentList?a("router-link",{staticClass:"icon",attrs:{to:{name:"list.edit",params:{id:t.currentList.id}}}},[a("icon",{attrs:{icon:"cog",size:"2x"}})],1):t._e()],1):t._e(),a("div",{staticClass:"navbar-end"},[t.updateAvailable?a("div",{staticClass:"update-notification"},[a("p",[t._v("There is an update for Vikunja available!")]),a("a",{staticClass:"button is-primary noshadow",on:{click:function(e){return t.refreshApp()}}},[t._v("Update Now")])]):t._e(),a("div",{staticClass:"user"},[a("img",{staticClass:"avatar",attrs:{src:t.userAvatar,alt:""}}),a("div",{staticClass:"dropdown is-right is-active"},[a("div",{staticClass:"dropdown-trigger"},[a("button",{staticClass:"button noshadow",on:{click:function(e){e.stopPropagation(),t.userMenuActive=!t.userMenuActive}}},[a("span",{staticClass:"username"},[t._v(t._s(t.userInfo.username))]),a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"chevron-down"}})],1)])]),a("transition",{attrs:{name:"fade"}},[t.userMenuActive?a("div",{staticClass:"dropdown-menu"},[a("div",{staticClass:"dropdown-content"},[a("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"user.settings"}}},[t._v(" Settings ")]),t.imprintUrl?a("a",{staticClass:"dropdown-item",attrs:{href:t.imprintUrl,target:"_blank"}},[t._v("Imprint")]):t._e(),t.privacyPolicyUrl?a("a",{staticClass:"dropdown-item",attrs:{href:t.privacyPolicyUrl,target:"_blank"}},[t._v("Privacy policy")]):t._e(),a("a",{staticClass:"dropdown-item",on:{click:function(e){t.keyboardShortcutsActive=!0}}},[t._v("Keyboard Shortcuts")]),a("a",{staticClass:"dropdown-item",on:{click:function(e){return t.logout()}}},[t._v(" Logout ")])],1)]):t._e()])],1)])])]):t._e(),t.userAuthenticated&&t.userInfo&&t.userInfo.type===t.authTypes.USER?a("div",[t.menuActive?a("a",{staticClass:"menu-hide-button",on:{click:function(e){t.menuActive=!1}}},[a("icon",{attrs:{icon:"times"}})],1):t._e(),a("div",{staticClass:"app-container",class:{"has-background":t.background},style:{"background-image":"url("+t.background+")"}},[a("div",{staticClass:"namespace-container",class:{"is-active":t.menuActive}},[a("div",{staticClass:"menu top-menu"},[a("router-link",{staticClass:"logo",attrs:{to:{name:"home"}}},[a("img",{attrs:{src:"/images/logo-full.svg",alt:"Vikunja"}})]),a("ul",{staticClass:"menu-list"},[a("li",[a("router-link",{attrs:{to:{name:"home"}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"calendar"}})],1),t._v(" Overview ")])],1),a("li",[a("router-link",{attrs:{to:{name:"tasks.range",params:{type:"week"}}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"calendar-week"}})],1),t._v(" Next Week ")])],1),a("li",[a("router-link",{attrs:{to:{name:"tasks.range",params:{type:"month"}}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:["far","calendar-alt"]}})],1),t._v(" Next Month ")])],1),a("li",[a("router-link",{attrs:{to:{name:"teams.index"}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"users"}})],1),t._v(" Teams ")])],1),a("li",[a("router-link",{attrs:{to:{name:"namespaces.index"}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"layer-group"}})],1),t._v(" Namespaces & Lists ")])],1),a("li",[a("router-link",{attrs:{to:{name:"labels.index"}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"tags"}})],1),t._v(" Labels ")])],1)])],1),a("a",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","e"],expression:"['ctrl', 'e']"}],staticClass:"collapse-menu-button",on:{click:function(e){t.menuActive=!1},shortkey:function(){return t.menuActive=!t.menuActive}}},[t._v(" Collapse Menu ")]),a("aside",{staticClass:"menu namespaces-lists"},[a("div",{staticClass:"spinner",class:{"is-loading":t.namespaceService.loading}}),t._l(t.namespaces,(function(e){return[a("div",{key:e.id},[e.id>0?a("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:"Settings",expression:"'Settings'",modifiers:{right:!0}}],staticClass:"nsettings",attrs:{to:{name:"namespace.edit",params:{id:e.id}}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"cog"}})],1)]):t._e(),e.id>0?a("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Add a new list in the "+e.title+" namespace",expression:"'Add a new list in the ' + n.title + ' namespace'"}],key:e.id+"list.create",staticClass:"nsettings",attrs:{to:{name:"list.create",params:{id:e.id}}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"plus"}})],1)]):t._e(),a("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.title+" ("+e.lists.length+")",expression:"n.title + ' (' + n.lists.length + ')'"}],staticClass:"menu-label",attrs:{for:e.id+"checker"}},[a("span",{staticClass:"name"},[""!==e.hexColor?a("span",{staticClass:"color-bubble",style:{backgroundColor:e.hexColor}}):t._e(),t._v(" "+t._s(e.title)+" ("+t._s(e.lists.length)+") ")])])],1),a("input",{key:e.id+"checker",staticClass:"checkinput",attrs:{type:"checkbox",checked:"checked",id:e.id+"checker"}}),a("div",{key:e.id+"child",staticClass:"more-container"},[a("ul",{staticClass:"menu-list can-be-hidden"},[t._l(e.lists,(function(e){return[e.isArchived?t._e():a("li",{key:e.id},[a("router-link",{class:{"router-link-exact-active":t.currentList.id===e.id},attrs:{to:{name:"list.index",params:{listId:e.id}}}},[a("span",{staticClass:"name"},[""!==e.hexColor?a("span",{staticClass:"color-bubble",style:{backgroundColor:e.hexColor}}):t._e(),t._v(" "+t._s(e.title)+" ")])])],1)]}))],2),a("label",{staticClass:"hidden-hint",attrs:{for:e.id+"checker"}},[t._v(" Show hidden lists ("+t._s(e.lists.length)+")... ")])])]}))],2),a("a",{staticClass:"menu-bottom-link",attrs:{target:"_blank",href:"https://vikunja.io"}},[t._v("Powered by Vikunja")])]),a("div",{staticClass:"app-content",class:[{"fullpage-overlay":t.fullpage,"is-menu-enabled":t.menuActive},t.$route.name]},[t.menuActive?a("a",{staticClass:"mobile-overlay",on:{click:function(e){t.menuActive=!1}}}):t._e(),a("transition",{attrs:{name:"fade"}},[a("router-view")],1),a("a",{staticClass:"keyboard-shortcuts-button",on:{click:function(e){t.keyboardShortcutsActive=!0}}},[a("icon",{attrs:{icon:"keyboard"}})],1)],1)])]):t.userAuthenticated&&t.userInfo&&t.userInfo.type===t.authTypes.LINK_SHARE?a("div",{staticClass:"link-share-container",class:{"has-background":t.background},style:{"background-image":"url("+t.background+")"}},[a("div",{staticClass:"container has-text-centered link-share-view"},[a("div",{staticClass:"column is-10 is-offset-1"},[a("img",{staticClass:"logo",attrs:{src:"/images/logo-full.svg",alt:"Vikunja"}}),a("h1",{staticClass:"title",style:{opacity:""===t.currentList.title?"0":"1"}},[t._v(" "+t._s(""===t.currentList.title?"Loading...":t.currentList.title)+" ")]),a("div",{staticClass:"box has-text-left view"},[a("div",{staticClass:"logout"},[a("a",{staticClass:"button",on:{click:function(e){return t.logout()}}},[a("span",[t._v("Logout")]),a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"sign-out-alt"}})],1)])]),a("router-view")],1)])])]):a("div",[a("div",{staticClass:"noauth-container"},[a("img",{attrs:{src:"/images/logo-full.svg",alt:"Vikunja"}}),""!==t.motd?a("div",{staticClass:"message is-info"},[t._m(0),a("div",{staticClass:"message-body"},[t._v(" "+t._s(t.motd)+" ")])]):t._e(),a("router-view")],1)]),a("notification")],1):a("div",{staticClass:"app offline"},[t._m(1)]),a("transition",{attrs:{name:"fade"}},[t.keyboardShortcutsActive?a("keyboard-shortcuts",{on:{close:function(e){t.keyboardShortcutsActive=!1}}}):t._e()],1)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-header"},[a("p",[t._v("Info")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"offline-message"},[a("h1",[t._v("You are offline.")]),a("p",[t._v("Please check your network connection and try again.")])])}],r=(a("4de4"),a("b0c0"),a("a18c")),o=a("2f62"),c=a("886e"),l=a("fc6f"),u=a("a1b4"),d=a("60c0"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("notifications",{attrs:{position:"bottom left"},scopedSlots:t._u([{key:"body",fn:function(e){return[a("div",{class:["vue-notification-template","vue-notification",e.item.type],on:{click:function(a){return t.close(e)}}},[e.item.title?a("div",{staticClass:"notification-title",domProps:{innerHTML:t._s(e.item.title)}}):t._e(),a("div",{staticClass:"notification-content",domProps:{innerHTML:t._s(e.item.text)}}),e.item.data&&e.item.data.actions&&e.item.data.actions.length>0?a("div",{staticClass:"buttons is-right"},t._l(e.item.data.actions,(function(e,s){return a("button",{key:"action_"+s,staticClass:"button noshadow is-small",on:{click:e.callback}},[t._v(" "+t._s(e.title)+" ")])})),0):t._e()])]}}])})},f=[],m={name:"notification",methods:{close:function(t){t.close()}}},p=m,v=(a("f339"),a("2877")),k=Object(v["a"])(p,h,f,!1,null,"ad8ace42",null),b=k.exports,g=a("9fb0"),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-mask keyboard-shortcuts-modal"},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.target!==e.currentTarget?null:t.close()}}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"card has-background-white has-no-shadow"},[t._m(0),a("div",{staticClass:"card-content content"},[a("p",{staticClass:"info"},[t._v(" The available keyboard shortcuts depend on the current page. Not all shortcuts are available everywhere. ")]),t._m(1),"list.kanban"===t.$route.name?a("p",[a("strong",[t._v("Mark a task as done")]),t._m(2)]):t._e(),"task.detail"===t.$route.name||"task.list.detail"===t.$route.name||"task.gantt.detail"===t.$route.name||"task.kanban.detail"===t.$route.name||"task.detail"===t.$route.name?[t._m(3),t._m(4),t._m(5),t._m(6),t._m(7)]:t._e()],2)])])])])},_=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v("Available Keyboard Shortcuts")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("strong",[t._v("Toggle The Menu")]),a("span",{staticClass:"shortcuts"},[a("span",[t._v("ctrl")]),a("i",[t._v("+")]),a("span",[t._v("e")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"shortcuts"},[a("span",[t._v("ctrl")]),a("i",[t._v("+")]),a("span",[t._v("click")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("strong",[t._v("Assign this task to a user")]),a("span",{staticClass:"shortcuts"},[a("span",[t._v("ctrl")]),a("i",[t._v("+")]),a("span",[t._v("shift")]),a("i",[t._v("+")]),a("span",[t._v("a")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("strong",[t._v("Add labels to this task")]),a("span",{staticClass:"shortcuts"},[a("span",[t._v("ctrl")]),a("i",[t._v("+")]),a("span",[t._v("shift")]),a("i",[t._v("+")]),a("span",[t._v("l")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("strong",[t._v("Change the due date of this task")]),a("span",{staticClass:"shortcuts"},[a("span",[t._v("ctrl")]),a("i",[t._v("+")]),a("span",[t._v("shift")]),a("i",[t._v("+")]),a("span",[t._v("d")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("strong",[t._v("Add an attachment to this task")]),a("span",{staticClass:"shortcuts"},[a("span",[t._v("ctrl")]),a("i",[t._v("+")]),a("span",[t._v("shift")]),a("i",[t._v("+")]),a("span",[t._v("f")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("strong",[t._v("Modify related tasks of this task")]),a("span",{staticClass:"shortcuts"},[a("span",[t._v("ctrl")]),a("i",[t._v("+")]),a("span",[t._v("shift")]),a("i",[t._v("+")]),a("span",[t._v("r")])])])}],y={name:"keyboard-shortcuts",methods:{close:function(){this.$emit("close")}}},w=y,D=Object(v["a"])(w,C,_,!1,null,null,null),T=D.exports,x={name:"app",components:{KeyboardShortcuts:T,Notification:b},data:function(){return{namespaceService:c["a"],menuActive:!0,currentDate:new Date,userMenuActive:!1,authTypes:l,keyboardShortcutsActive:!1,updateAvailable:!1,registration:null,refreshing:!1}},beforeMount:function(){var t=this;this.$store.commit(g["g"],navigator.onLine),window.addEventListener("online",(function(){return t.$store.commit(g["g"],navigator.onLine)})),window.addEventListener("offline",(function(){return t.$store.commit(g["g"],navigator.onLine)})),void 0!==this.$route.query.userPasswordReset&&(localStorage.removeItem("passwordResetToken"),localStorage.setItem("passwordResetToken",this.$route.query.userPasswordReset),r["a"].push({name:"user.password-reset.reset"})),void 0!==this.$route.query.userEmailConfirm&&(localStorage.removeItem("emailConfirmToken"),localStorage.setItem("emailConfirmToken",this.$route.query.userEmailConfirm),r["a"].push({name:"user.login"}))},beforeCreate:function(){var t=this;this.$store.dispatch("config/update"),this.$store.dispatch("auth/checkAuth").then((function(){t.userAuthenticated||"user.login"===t.$route.name||"user.password-reset.request"===t.$route.name||"user.password-reset.reset"===t.$route.name||"user.register"===t.$route.name||"link-share.auth"===t.$route.name||r["a"].push({name:"user.login"}),!t.userAuthenticated||t.userInfo.type!==l.USER||"home"!==t.$route.params.name&&0!==t.namespaces.length||t.loadNamespaces()}))},created:function(){var t=this;document.addEventListener(d.SW_UPDATED,this.showRefreshUI,{once:!0}),navigator&&navigator.serviceWorker&&navigator.serviceWorker.addEventListener("controllerchange",(function(){t.refreshing||(t.refreshing=!0,window.location.reload())})),window.innerWidth<770&&(this.menuActive=!1),this.$store.dispatch("auth/renewToken"),window.addEventListener("focus",(function(){if(t.userAuthenticated){var e=t.userInfo.exp-+new Date/1e3;if(e<0)return t.$store.dispatch("auth/checkAuth"),void r["a"].push({name:"user.login"});e<216e3&&(t.$store.dispatch("auth/renewToken"),console.log("renewed token"))}})),this.$nextTick((function(){return document.addEventListener("click",(function(){return t.userMenuActive=!1}))}))},watch:{$route:"doStuffAfterRoute"},computed:Object(o["b"])({userInfo:function(t){return t.auth.info},userAvatar:function(t){return t.auth.avatarUrl},userAuthenticated:function(t){return t.auth.authenticated},motd:function(t){return t.config.motd},online:g["g"],fullpage:g["e"],namespaces:function(t){return t.namespaces.namespaces.filter((function(t){return!t.isArchived}))},currentList:g["b"],background:"background",imprintUrl:function(t){return t.config.legal.imprintUrl},privacyPolicyUrl:function(t){return t.config.legal.privacyPolicyUrl},canWriteCurrentList:function(t){return t.currentList.maxRight>u.READ}}),methods:{logout:function(){this.$store.dispatch("auth/logout"),r["a"].push({name:"user.login"})},loadNamespaces:function(){this.$store.dispatch("namespaces/loadNamespaces")},loadNamespacesIfNeeded:function(t){this.userAuthenticated&&this.userInfo&&this.userInfo.type===l.USER&&("home"===t.name||0===this.namespaces.length)&&this.loadNamespaces()},doStuffAfterRoute:function(t){this.$store.state[g["e"]]&&this.$store.commit(g["e"],!1),this.loadNamespacesIfNeeded(t),this.userMenuActive=!1,window.innerWidth<770&&(this.menuActive=!1),"home"!==this.$route.name&&"namespace.edit"!==this.$route.name&&"teams.index"!==this.$route.name&&"teams.edit"!==this.$route.name&&"tasks.range"!==this.$route.name&&"labels.index"!==this.$route.name&&"migrate.start"!==this.$route.name&&"migrate.wunderlist"!==this.$route.name&&"user.settings"!==this.$route.name&&"namespaces.index"!==this.$route.name||this.$store.commit(g["b"],{})},showRefreshUI:function(t){console.log("recieved refresh event",t),this.registration=t.detail,this.updateAvailable=!0},refreshApp:function(){this.updateExists=!1,this.registration&&this.registration.waiting&&this.registration.waiting.postMessage("skipWaiting")}}},I=x,A=Object(v["a"])(I,n,i,!1,null,null,null),S=A.exports,$=a("5c1b"),O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-container"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"header"},[t._t("header")],2),a("div",{staticClass:"content"},[t._t("text")],2),a("div",{staticClass:"actions"},[a("button",{staticClass:"button is-danger is-inverted noshadow",on:{click:function(e){return t.$emit("close")}}},[t._v("Cancel")]),a("button",{staticClass:"button is-success noshadow",on:{click:function(e){return t.$emit("submit")}}},[t._v("Do it!")])])])])])])},j=[],E={name:"modal",mounted:function(){var t=this;document.addEventListener("keydown",(function(e){27===e.keyCode&&t.$emit("close")}))}},L=E,P=Object(v["a"])(L,O,j,!1,null,null,null),N=P.exports,B=(a("1e59"),a("ee98")),F=a.n(B),R=a("ecee"),U=a("c074"),M=a("b702"),W=a("ad3d"),q=a("e37d"),H=a("9483");Object(H["a"])("".concat("/","sw.js"),{ready:function(){console.log("App is being served from cache by a service worker.")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(t){console.log("New content is available; please refresh."),document.dispatchEvent(new CustomEvent(d.SW_UPDATED,{detail:t}))},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),navigator&&navigator.serviceWorker&&navigator.serviceWorker.addEventListener("message",(function(t){var e=t.data.action,a=t.ports[0];"getBearerToken"===e?(console.debug("Token request from sw"),a.postMessage({authToken:localStorage.getItem("token")})):(console.error("Unknown event",t),a.postMessage({error:"Unknown request"}))}));var G,V=a("3717"),K=a.n(V),z=a("f16e"),Y=a("1556"),J=a("b166"),Q=a("feb3"),X=function(t){document.title="undefined"!==typeof t&&""!==t?"".concat(t," | Vikunja"):"Vikunja"},Z=a("fc11"),tt=a("5560"),et={namespaced:!0,state:function(){return{version:"",frontendUrl:"",motd:"",linkSharingEnabled:!0,maxFileSize:"20MB",registrationEnabled:!0,availableMigrators:[],taskAttachmentsEnabled:!0,totpEnabled:!0,enabledBackgroundProviders:[],legal:{imprintUrl:"",privacyPolicyUrl:""}}},mutations:Object(Z["a"])({},g["a"],(function(t,e){t.version=e.version,t.frontendUrl=e.frontend_url,t.motd=e.motd,t.linkSharingEnabled=e.link_sharing_enabled,t.maxFileSize=e.max_file_size,t.registrationEnabled=e.registration_enabled,t.availableMigrators=e.available_migrators,t.taskAttachmentsEnabled=e.task_attachments_enabled,t.totpEnabled=e.totp_enabled,t.enabledBackgroundProviders=e.enabled_background_providers,t.legal.imprintUrl=e.legal.imprint_url,t.legal.privacyPolicyUrl=e.legal.privacy_policy_url})),actions:{update:function(t){tt["a"].get("info").then((function(e){t.commit(g["a"],e.data)}))}}},at=(a("99af"),a("d3b7"),a("ac1f"),a("5319"),a("1276"),a("8654")),st={namespaced:!0,state:function(){return{authenticated:!1,isLinkShareAuth:!1,info:{},needsTotpPasscode:!1,avatarUrl:""}},mutations:{info:function(t,e){t.info=e,t.avatarUrl=e.getAvatarUrl()},authenticated:function(t,e){t.authenticated=e},isLinkShareAuth:function(t,e){t.isLinkShareAuth=e},needsTotpPasscode:function(t,e){t.needsTotpPasscode=e},reloadAvatar:function(t){t.avatarUrl="".concat(t.info.getAvatarUrl(),"&=").concat(+new Date)}},actions:{login:function(t,e){t.commit(g["f"],!0,{root:!0}),localStorage.removeItem("token");var a={username:e.username,password:e.password};return e.totpPasscode&&(a.totp_passcode=e.totpPasscode),tt["a"].post("login",a).then((function(e){return localStorage.setItem("token",e.data.token),t.commit("isLinkShareAuth",!1),t.dispatch("checkAuth"),Promise.resolve()})).catch((function(a){if(a.response){if(1017===a.response.data.code&&!e.totpPasscode)return t.commit("needsTotpPasscode",!0),Promise.reject();var s=a.response.data.message;401===a.response.status&&(s="Wrong username or password."),t.commit(g["c"],s,{root:!0})}return Promise.reject()})).finally((function(){t.commit(g["f"],!1,{root:!0})}))},register:function(t,e){return tt["a"].post("register",{username:e.username,email:e.email,password:e.password}).then((function(){return t.dispatch("login",e)})).catch((function(e){return e.response&&t.commit(g["c"],e.response.data.message,{root:!0}),Promise.reject()})).finally((function(){t.commit(g["f"],!1,{root:!0})}))},linkShareAuth:function(t,e){return tt["a"].post("/shares/"+e+"/auth").then((function(e){return localStorage.setItem("token",e.data.token),t.dispatch("checkAuth"),Promise.resolve(e.data)})).catch((function(t){return Promise.reject(t)}))},checkAuth:function(t){var e=localStorage.getItem("token"),a=!1;if(e){var s=e.split(".")[1].replace("-","+").replace("_","/"),n=new at["a"](JSON.parse(window.atob(s))),i=Math.round((new Date).getTime()/1e3);n.exp>=i&&(a=!0),t.commit("info",n)}return t.commit("authenticated",a),Promise.resolve()},renewToken:function(t){t.state.authenticated&&tt["a"].post("user/token",null,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){localStorage.setItem("token",e.data.token),t.dispatch("checkAuth")})).catch((function(t){console.log("Error renewing token: ",t)}))},logout:function(t){localStorage.removeItem("token"),t.dispatch("checkAuth")}}},nt=(a("4160"),a("159b"),{namespaced:!0,state:function(){return{namespaces:[]}},mutations:{namespaces:function(t,e){t.namespaces=e},setNamespaceById:function(t,e){for(var a in t.namespaces)if(t.namespaces[a].id===e.id)return e.lists=t.namespaces[a].lists,void s["default"].set(t.namespaces,a,e)},setListInNamespaceById:function(t,e){for(var a in t.namespaces)for(var n in t.namespaces[a].lists)if(t.namespaces[a].lists[n].id===e.id){var i=t.namespaces[a];return i.lists[n]=e,void s["default"].set(t.namespaces,a,i)}},addNamespace:function(t,e){t.namespaces.push(e)},addListToNamespace:function(t,e){for(var a in t.namespaces)if(t.namespaces[a].id===e.namespaceId)return void t.namespaces[a].lists.push(e)}},getters:{getListAndNamespaceById:function(t){return function(e){for(var a in t.namespaces)for(var s in t.namespaces[a].lists)if(t.namespaces[a].lists[s].id===e)return{list:t.namespaces[a].lists[s],namespace:t.namespaces[a]};return null}},getNamespaceById:function(t){return function(e){for(var a in t.namespaces)if(t.namespaces[a].id===e)return t.namespaces[a];return null}}},actions:{loadNamespaces:function(t){var e=new c["a"];return e.getAll({},{is_archived:!0}).then((function(e){t.commit("namespaces",e);var a=[];return e.forEach((function(t){t.lists.forEach((function(t){a.push(t)}))})),t.commit("lists/addLists",a,{root:!0}),Promise.resolve()})).catch((function(t){return Promise.reject(t)}))}}}),it=(a("a434"),a("276c")),rt=a("e954"),ot=a("920b"),ct=a("92a6"),lt=a("0402"),ut=a("c4c1"),dt=function(t){Object(ot["a"])(a,t);var e=Object(ct["a"])(a);function a(){return Object(it["a"])(this,a),e.call(this,{getAll:"/lists/{listId}/buckets",create:"/lists/{listId}/buckets",update:"/lists/{listId}/buckets/{id}",delete:"/lists/{listId}/buckets/{id}"})}return Object(rt["a"])(a,[{key:"modelFactory",value:function(t){return new ut["a"](t)}}]),a}(lt["a"]),ht=a("cf42"),ft=function(t){var e=setTimeout((function(){t.commit(g["f"],!0,{root:!0})}),100);return function(){clearTimeout(e),t.commit(g["f"],!1,{root:!0})}},mt={namespaced:!0,state:function(){return{buckets:[],listId:0}},mutations:{setListId:function(t,e){t.listId=parseInt(e)},setBuckets:function(t,e){t.buckets=e},addBucket:function(t,e){t.buckets.push(e)},removeBucket:function(t,e){for(var a in t.buckets)t.buckets[a].id===e.id&&t.buckets.splice(a,1)},setBucketById:function(t,e){for(var a in t.buckets)if(t.buckets[a].id===e.id)return void s["default"].set(t.buckets,a,e)},setBucketByIndex:function(t,e){var a=e.bucketIndex,n=e.bucket;s["default"].set(t.buckets,a,n)},setTaskInBucketByIndex:function(t,e){var a=e.bucketIndex,n=e.taskIndex,i=e.task,r=t.buckets[a];r.tasks[n]=i,s["default"].set(t.buckets,a,r)},setTaskInBucket:function(t,e){if(0!==t.buckets.length)for(var a in t.buckets)if(t.buckets[a].id===e.bucketId){for(var n in t.buckets[a].tasks)if(t.buckets[a].tasks[n].id===e.id){var i=t.buckets[a];return i.tasks[n]=e,void s["default"].set(t.buckets,a,i)}return}},addTaskToBucket:function(t,e){var a=Object(ht["a"])(t.buckets,(function(t){return t.id===e.bucketId}));t.buckets[a].tasks.push(e)},removeTaskInBucket:function(t,e){if(0!==t.buckets.length)for(var a in t.buckets)if(t.buckets[a].id===e.bucketId){for(var n in t.buckets[a].tasks)if(t.buckets[a].tasks[n].id===e.id){var i=t.buckets[a];return i.tasks.splice(n,1),void s["default"].set(t.buckets,a,i)}return}}},getters:{getTaskById:function(t){return function(e){for(var a in t.buckets)for(var s in t.buckets[a].tasks)if(t.buckets[a].tasks[s].id===e)return{bucketIndex:a,taskIndex:s,task:t.buckets[a].tasks[s]};return{bucketIndex:null,taskIndex:null,task:null}}}},actions:{loadBucketsForList:function(t,e){var a=ft(t);t.commit("setBuckets",[]);var s=new dt;return s.getAll({listId:e}).then((function(a){return t.commit("setBuckets",a),t.commit("setListId",e),Promise.resolve()})).catch((function(t){return Promise.reject(t)})).finally((function(){a()}))},createBucket:function(t,e){var a=ft(t),s=new dt;return s.create(e).then((function(e){return t.commit("addBucket",e),Promise.resolve(e)})).catch((function(t){return Promise.reject(t)})).finally((function(){a()}))},deleteBucket:function(t,e){var a=ft(t),s=new dt;return s.delete(e).then((function(a){return t.commit("removeBucket",e),t.dispatch("loadBucketsForList",e.listId),Promise.resolve(a)})).catch((function(t){return Promise.reject(t)})).finally((function(){a()}))},updateBucket:function(t,e){var a=ft(t),s=new dt;return s.update(e).then((function(e){var a=Object(ht["a"])(t.state.buckets,(function(t){return t.id===e.id})),s=e;return s.tasks=t.state.buckets[a].tasks,t.commit("setBucketByIndex",{bucketIndex:a,bucket:s}),Promise.resolve(e)})).catch((function(t){return Promise.reject(t)})).finally((function(){a()}))}}},pt=a("cb78"),vt=a("261b"),kt=a("fbe6"),bt=a("4b81"),gt=a("e02a"),Ct={namespaced:!0,state:function(){return{}},actions:{update:function(t,e){var a=new pt["a"];return a.update(e).then((function(e){return t.commit("kanban/setTaskInBucket",e,{root:!0}),Promise.resolve(e)})).catch((function(t){return Promise.reject(t)}))},delete:function(t,e){var a=new pt["a"];return a.delete(e).then((function(a){return t.commit("kanban/removeTaskInBucket",e,{root:!0}),Promise.resolve(a)})).catch((function(t){return Promise.reject(t)}))},addTaskAttachment:function(t,e){var a=e.taskId,s=e.attachment,n=t.rootGetters["kanban/getTaskById"](a);null!==n.task&&(n.task.attachments.push(s),t.commit("kanban/setTaskInBucketByIndex",n,{root:!0}),t.commit("attachments/add",s,{root:!0}))},addAssignee:function(t,e){var a=e.user,s=e.taskId,n=new kt["a"]({userId:a.id,taskId:s}),i=new vt["a"];return i.create(n).then((function(e){var n=t.rootGetters["kanban/getTaskById"](s);return null===n.task?(console.debug("Could not add assignee to task in kanban, task not found",n),Promise.resolve(e)):(n.task.assignees.push(a),t.commit("kanban/setTaskInBucketByIndex",n,{root:!0}),Promise.resolve(e))})).catch((function(t){return Promise.reject(t)}))},removeAssignee:function(t,e){var a=e.user,s=e.taskId,n=new kt["a"]({userId:a.id,taskId:s}),i=new vt["a"];return i.delete(n).then((function(e){var n=t.rootGetters["kanban/getTaskById"](s);if(null===n.task)return console.debug("Could not remove assignee from task in kanban, task not found",n),Promise.resolve(e);for(var i in n.task.assignees)if(n.task.assignees[i].id===a.id){n.task.assignees.splice(i,1);break}return t.commit("kanban/setTaskInBucketByIndex",n,{root:!0}),Promise.resolve(e)})).catch((function(t){return Promise.reject(t)}))},addLabel:function(t,e){var a=e.label,s=e.taskId,n=new gt["a"],i=new bt["a"]({taskId:s,labelId:a.id});return n.create(i).then((function(e){var n=t.rootGetters["kanban/getTaskById"](s);return null===n.task?(console.debug("Could not add label to task in kanban, task not found",n),Promise.resolve(e)):(n.task.labels.push(a),t.commit("kanban/setTaskInBucketByIndex",n,{root:!0}),Promise.resolve(e))})).catch((function(t){return Promise.reject(t)}))},removeLabel:function(t,e){var a=e.label,s=e.taskId,n=new gt["a"],i=new bt["a"]({taskId:s,labelId:a.id});return n.delete(i).then((function(e){var n=t.rootGetters["kanban/getTaskById"](s);if(null===n.task)return console.debug("Could not remove label from task in kanban, task not found",n),Promise.resolve(e);for(var i in n.task.labels)if(n.task.labels[i].id===a.id){n.task.labels.splice(i,1);break}return t.commit("kanban/setTaskInBucketByIndex",n,{root:!0}),Promise.resolve(e)})).catch((function(t){return Promise.reject(t)}))}}},_t={namespaced:!0,state:function(){return{}},mutations:{addList:function(t,e){s["default"].set(t,e.id,e)},addLists:function(t,e){e.forEach((function(e){s["default"].set(t,e.id,e)}))}},getters:{getListById:function(t){return function(e){return"undefined"!==typeof t[e]?t[e]:null}}}},yt={namespaced:!0,state:function(){return{attachments:[]}},mutations:{set:function(t,e){s["default"].set(t,"attachments",e)},add:function(t,e){t.attachments.push(e)},removeById:function(t,e){for(var a in t.attachments)if(t.attachments[a].id===e){t.attachments.splice(a,1);break}}}},wt=a("8ac1");s["default"].use(o["a"]);var Dt=new o["a"].Store({modules:{config:et,auth:st,namespaces:nt,kanban:mt,tasks:Ct,lists:_t,attachments:yt},state:{loading:!1,errorMessage:"",online:!0,isFullpage:!1,currentList:{id:0},background:"",hasTasks:!1},mutations:(G={},Object(Z["a"])(G,g["f"],(function(t,e){t.loading=e})),Object(Z["a"])(G,g["c"],(function(t,e){t.errorMessage=e})),Object(Z["a"])(G,g["g"],(function(t,e){t.online=e})),Object(Z["a"])(G,g["e"],(function(t,e){t.isFullpage=e})),Object(Z["a"])(G,g["b"],(function(t,e){if(X(e.title),e.id!==t.currentList.id||e.backgroundInformation&&!t.currentList.backgroundInformation||e.backgroundInformation&&e.backgroundInformation.unsplashId&&t.currentList&&t.currentList.backgroundInformation&&t.currentList.backgroundInformation.unsplashId&&e.backgroundInformation.unsplashId!==t.currentList.backgroundInformation.unsplashId||e.backgroundInformation&&e.backgroundInformation.type&&t.currentList&&t.currentList.backgroundInformation&&t.currentList.backgroundInformation.type)if(e.backgroundInformation){var a=new wt["a"];a.background(e).then((function(e){t.background=e})).catch((function(t){console.error("Error getting background image for list",e.id,t)}))}else t.background=null;t.currentList=e})),Object(Z["a"])(G,g["d"],(function(t,e){t.hasTasks=e})),G)});console.info("Vikunja frontend version ".concat($["a"])),"/"===window.API_URL.substr(window.API_URL.length-1,window.API_URL.length)&&(window.API_URL=window.API_URL.substr(0,window.API_URL.length-1)),s["default"].component("modal",N),s["default"].config.productionTip=!1,s["default"].use(F.a),R["c"].add(U["D"]),R["c"].add(U["A"]),R["c"].add(U["t"]),R["c"].add(U["I"]),R["c"].add(U["k"]),R["c"].add(U["b"]),R["c"].add(U["r"]),R["c"].add(U["L"]),R["c"].add(U["N"]),R["c"].add(U["M"]),R["c"].add(U["u"]),R["c"].add(U["x"]),R["c"].add(U["K"]),R["c"].add(U["G"]),R["c"].add(U["d"]),R["c"].add(M["e"]),R["c"].add(U["c"]),R["c"].add(U["B"]),R["c"].add(U["e"]),R["c"].add(M["a"]),R["c"].add(U["m"]),R["c"].add(U["H"]),R["c"].add(U["h"]),R["c"].add(U["f"]),R["c"].add(U["w"]),R["c"].add(U["y"]),R["c"].add(U["i"]),R["c"].add(U["j"]),R["c"].add(U["z"]),R["c"].add(M["d"]),R["c"].add(U["a"]),R["c"].add(U["v"]),R["c"].add(M["b"]),R["c"].add(U["p"]),R["c"].add(U["C"]),R["c"].add(U["g"]),R["c"].add(M["c"]),R["c"].add(U["J"]),R["c"].add(U["E"]),R["c"].add(U["F"]),R["c"].add(U["s"]),R["c"].add(U["l"]),R["c"].add(U["o"]),R["c"].add(U["n"]),R["c"].add(U["q"]),s["default"].component("icon",W["a"]),s["default"].use(q["a"],{defaultHtml:!1}),s["default"].use(K.a),s["default"].directive("focus",{inserted:function(t,e){var a=e.modifiers;(window.innerWidth>769||"undefined"!==typeof a.always&&a.always)&&t.focus()}}),s["default"].mixin({methods:{formatDateSince:function(t){"string"===typeof t&&(t=new Date(t));var e=new Date,a="";return t>e&&(a+="in "),a+=Object(Y["a"])(t,e),t<e&&(a+=" ago"),a},formatDate:function(t){return"string"===typeof t&&(t=new Date(t)),t?Object(J["a"])(t,"PPPPpppp"):""},error:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return z["a"].error(t,e,a)},success:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return z["a"].success(t,e,a)},colorIsDark:Q["a"],setTitle:X}}),new s["default"]({router:r["a"],store:Dt,render:function(t){return t(S)}}).$mount("#app")},"5bf2":function(t,e,a){},"5c1b":function(t){t.exports=JSON.parse('{"a":"0.12"}')},"60c0":function(t){t.exports=JSON.parse('{"SW_UPDATED":"swUpdated"}')},"61be":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loader-container is-loading"})},n=[],i={name:"loading"},r=i,o=(a("2f75"),a("2877")),c=Object(o["a"])(r,s,n,!1,null,"29de2cb4",null);e["a"]=c.exports},6399:function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));a("d81d");var s=a("276c"),n=a("e954"),i=a("920b"),r=a("92a6"),o=a("b1c6"),c=a("8654"),l=a("2505"),u=function(t){Object(i["a"])(a,t);var e=Object(r["a"])(a);function a(t){var n;return Object(s["a"])(this,a),n=e.call(this,t),n.members=n.members.map((function(t){return new l["a"](t)})),n.createdBy=new c["a"](n.createdBy),n.created=new Date(n.created),n.updated=new Date(n.updated),n}return Object(n["a"])(a,[{key:"defaults",value:function(){return{id:0,name:"",description:"",members:[],right:0,createdBy:{},created:null,updated:null}}}]),a}(o["a"])},"68c1":function(t,e,a){"use strict";var s=a("37ef"),n=a.n(s);n.a},7679:function(t,e,a){"use strict";var s=a("4928"),n=a.n(s);n.a},"781a":function(t,e,a){"use strict";var s=a("105d"),n=a.n(s);n.a},"818c":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"color-picker-container"},[a("verte",{attrs:{menuPosition:t.menuPosition,picker:"square",model:"hex",enableAlpha:!1,rgbSliders:!0},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}}),a("a",{staticClass:"reset",on:{click:t.reset}},[t._v(" Reset Color ")])],1)},n=[],i=a("36fc"),r=(a("bbb4"),{name:"colorPicker",data:function(){return{color:"",lastChangeTimeout:null}},components:{verte:i["a"]},props:{value:{required:!0},menuPosition:{type:String,default:"top"}},watch:{value:function(t){this.color=t},color:function(){this.update()}},mounted:function(){this.color=this.value},methods:{update:function(){var t=this;null!==this.lastChangeTimeout&&clearTimeout(this.lastChangeTimeout),this.lastChangeTimeout=setTimeout((function(){t.$emit("input",t.color),t.$emit("change")}),500)},reset:function(){this.color="",this.update()}}}),o=r,c=a("2877"),l=Object(c["a"])(o,s,n,!1,null,null,null);e["a"]=l.exports},"83a4":function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));var s=a("276c"),n=a("e954"),i=a("920b"),r=a("92a6"),o=a("b1c6"),c=a("8654"),l=a("feb3"),u=function(t){Object(i["a"])(a,t);var e=Object(r["a"])(a);function a(t){var n;return Object(s["a"])(this,a),n=e.call(this,t),""===n.hexColor&&(n.hexColor="e8e8e8"),"#"!==n.hexColor.substring(0,1)&&(n.hexColor="#"+n.hexColor),n.textColor=Object(l["a"])(n.hexColor)?"#4a4a4a":"#e5e5e5",n.createdBy=new c["a"](n.createdBy),n.created=new Date(n.created),n.updated=new Date(n.updated),n}return Object(n["a"])(a,[{key:"defaults",value:function(){return{id:0,title:"",hexColor:"",description:"",createdBy:c["a"],listId:0,textColor:"",created:null,updated:null}}}]),a}(o["a"])},8654:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));a("99af");var s=a("276c"),n=a("e954"),i=a("920b"),r=a("92a6"),o=a("b1c6"),c=function(t){Object(i["a"])(a,t);var e=Object(r["a"])(a);function a(t){var n;return Object(s["a"])(this,a),n=e.call(this,t),n.created=new Date(n.created),n.updated=new Date(n.updated),n}return Object(n["a"])(a,[{key:"defaults",value:function(){return{id:0,email:"",username:"",created:null,updated:null}}},{key:"getAvatarUrl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return"".concat(window.API_URL,"/").concat(this.username,"/avatar?size=").concat(t)}}]),a}(o["a"])},8821:function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));var s=a("276c"),n=a("e954"),i=a("920b"),r=a("92a6"),o=a("0402"),c=a("83a4"),l=a("737d"),u=function(t){Object(i["a"])(a,t);var e=Object(r["a"])(a);function a(){return Object(s["a"])(this,a),e.call(this,{create:"/labels",getAll:"/labels",get:"/labels/{id}",update:"/labels/{id}",delete:"/labels/{id}"})}return Object(n["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(l["a"])(t.created),t.updated=Object(l["a"])(t.updated),t.hexColor=t.hexColor.substring(1,7),t}},{key:"modelFactory",value:function(t){return new c["a"](t)}},{key:"beforeUpdate",value:function(t){return this.processModel(t)}},{key:"beforeCreate",value:function(t){return this.processModel(t)}}]),a}(o["a"])},"886e":function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));var s=a("276c"),n=a("e954"),i=a("920b"),r=a("92a6"),o=a("0402"),c=a("0260"),l=a("737d"),u=function(t){Object(i["a"])(a,t);var e=Object(r["a"])(a);function a(){return Object(s["a"])(this,a),e.call(this,{create:"/namespaces",get:"/namespaces/{id}",getAll:"/namespaces",update:"/namespaces/{id}",delete:"/namespaces/{id}"})}return Object(n["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(l["a"])(t.created),t.updated=Object(l["a"])(t.updated),t}},{key:"modelFactory",value:function(t){return new c["a"](t)}},{key:"beforeUpdate",value:function(t){return t.hexColor=t.hexColor.substring(1,7),t}},{key:"beforeCreate",value:function(t){return t.hexColor=t.hexColor.substring(1,7),t}}]),a}(o["a"])},"8ac1":function(t,e,a){"use strict";a.d(e,"a",(function(){return d}));a("d81d"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d");var s=a("276c"),n=a("e954"),i=a("920b"),r=a("92a6"),o=a("0402"),c=a("4cef"),l=a("cb78"),u=a("737d"),d=function(t){Object(i["a"])(a,t);var e=Object(r["a"])(a);function a(){return Object(s["a"])(this,a),e.call(this,{create:"/namespaces/{namespaceId}/lists",get:"/lists/{id}",getAll:"/lists",update:"/lists/{id}",delete:"/lists/{id}"})}return Object(n["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(u["a"])(t.created),t.updated=Object(u["a"])(t.updated),t}},{key:"modelFactory",value:function(t){return new c["a"](t)}},{key:"beforeUpdate",value:function(t){var e=new l["a"];return t.tasks=t.tasks.map((function(t){return e.beforeUpdate(t)})),t.hexColor=t.hexColor.substring(1,7),t}},{key:"beforeCreate",value:function(t){return t.hexColor=t.hexColor.substring(1,7),t}},{key:"background",value:function(t){return null===t.background?Promise.resolve(""):this.http({url:"/lists/".concat(t.id,"/background"),method:"GET",responseType:"blob"}).then((function(t){return window.URL.createObjectURL(new Blob([t.data]))})).catch((function(t){return t}))}}]),a}(o["a"])},"9d11":function(t,e,a){"use strict";var s=a("cc5d"),n=a.n(s);n.a},"9f07":function(t){t.exports=JSON.parse('{"UNSET":0,"LOW":1,"MEDIUM":2,"HIGH":3,"URGENT":4,"DO_NOW":5}')},"9fb0":function(t,e,a){"use strict";a.d(e,"f",(function(){return s})),a.d(e,"c",(function(){return n})),a.d(e,"g",(function(){return i})),a.d(e,"e",(function(){return r})),a.d(e,"b",(function(){return o})),a.d(e,"d",(function(){return c})),a.d(e,"a",(function(){return l}));var s="loading",n="errorMessage",i="online",r="isFullpage",o="currentList",c="hasTasks",l="config"},a18c:function(t,e,a){"use strict";a("d3b7");var s=a("2b0e"),n=a("8c4f"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content has-text-centered"},[a("h2",[t._v("Hi "+t._s(t.userInfo.username)+"!")]),t.hasTasks?t._e():[a("p",[t._v("Click on a list or namespace on the left to get started.")]),t.migratorsEnabled?a("router-link",{staticClass:"button is-primary is-right noshadow is-outlined",attrs:{to:{name:"migrate.start"}}},[t._v(" Import your data into Vikunja ")]):t._e()],a("ShowTasks",{attrs:{"show-all":!0}})],2)},r=[],o=a("2f62"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"is-max-width-desktop show-tasks"},[t.showAll?t._e():a("fancycheckbox",{staticClass:"is-pulled-right",on:{change:t.loadPendingTasks},model:{value:t.showNulls,callback:function(e){t.showNulls=e},expression:"showNulls"}},[t._v(" Show tasks without dates ")]),t.showAll?a("h3",[t._v("Current tasks")]):a("h3",[t._v(" Tasks from "),a("flat-pickr",{staticClass:"input",class:{disabled:t.taskService.loading},attrs:{disabled:t.taskService.loading,config:t.flatPickerConfig},on:{"on-close":t.loadPendingTasks},model:{value:t.cStartDate,callback:function(e){t.cStartDate=e},expression:"cStartDate"}}),t._v(" until "),a("flat-pickr",{staticClass:"input",class:{disabled:t.taskService.loading},attrs:{disabled:t.taskService.loading,config:t.flatPickerConfig},on:{"on-close":t.loadPendingTasks},model:{value:t.cEndDate,callback:function(e){t.cEndDate=e},expression:"cEndDate"}})],1),t.taskService.loading||t.hasUndoneTasks&&t.tasks&&0!==t.tasks.length?t._e():[a("h3",{staticClass:"nothing"},[t._v("Nothing to do - Have a nice day!")]),a("img",{attrs:{src:"/images/cool.svg",alt:""}})],a("div",{staticClass:"spinner",class:{"is-loading":t.taskService.loading}}),t.tasks&&t.tasks.length>0?a("div",{staticClass:"tasks"},t._l(t.tasks,(function(e){return a("div",{key:e.id,staticClass:"task"},[a("single-task-in-list",{attrs:{"the-task":e,"show-list":!0},on:{taskUpdated:t.updateTasks}})],1)})),0):t._e()],2)},l=[],u=(a("99af"),a("4de4"),a("cb78")),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("fancycheckbox",{attrs:{disabled:t.isArchived||t.disabled},on:{change:t.markAsDone},model:{value:t.task.done,callback:function(e){t.$set(t.task,"done",e)},expression:"task.done"}}),a("span",{staticClass:"tasktext",class:{done:t.task.done}},[a("router-link",{attrs:{to:{name:t.taskDetailRoute,params:{id:t.task.id}}}},[t.showList&&null!==t.$store.getters["lists/getListById"](t.task.listId)?a("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"This task belongs to list '"+t.$store.getters["lists/getListById"](t.task.listId).title+"'",expression:"`This task belongs to list '${$store.getters['lists/getListById'](task.listId).title}'`"}],staticClass:"task-list",attrs:{to:{name:"list.list",params:{listId:t.task.listId}}}},[t._v(" "+t._s(t.$store.getters["lists/getListById"](t.task.listId).title)+" ")]):t._e(),"undefined"!==typeof t.task.relatedTasks.parenttask?a("span",{staticClass:"parent-tasks"},[t._l(t.task.relatedTasks.parenttask,(function(e,a){return[t._v(" "+t._s(e.title)),a+1<t.task.relatedTasks.parenttask.length?[t._v(", ")]:t._e()]})),t._v(" > ")],2):t._e(),t._v(" "+t._s(t.task.title)+" ")],1),a("labels",{attrs:{labels:t.task.labels}}),t._l(t.task.assignees,(function(e,s){return a("user",{key:t.task.id+"assignee"+e.id+s,attrs:{user:e,"avatar-size":27,"show-username":!1,"is-inline":!0}})})),+new Date(t.task.dueDate)>0?a("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.formatDate(t.task.dueDate),expression:"formatDate(task.dueDate)"}],class:{overdue:t.task.dueDate<=new Date&&!t.task.done},on:{click:function(e){e.stopPropagation(),t.showDefer=!t.showDefer}}},[t._v(" - Due "+t._s(t.formatDateSince(t.task.dueDate))+" ")]):t._e(),a("transition",{attrs:{name:"fade"}},[+new Date(t.task.dueDate)>0&&t.showDefer?a("defer-task",{model:{value:t.task,callback:function(e){t.task=e},expression:"task"}}):t._e()],1),a("priority-label",{attrs:{priority:t.task.priority}})],2)],1)},h=[],f=a("f1a4"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showAll||t.priority>=t.priorities.HIGH?a("span",{class:{"not-so-high":t.priority===t.priorities.HIGH,"high-priority":t.priority>=t.priorities.HIGH}},[t.priority>=t.priorities.HIGH?a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"exclamation"}})],1):t._e(),t.priority===t.priorities.UNSET?[t._v("Unset")]:t._e(),t.priority===t.priorities.LOW?[t._v("Low")]:t._e(),t.priority===t.priorities.MEDIUM?[t._v("Medium")]:t._e(),t.priority===t.priorities.HIGH?[t._v("High")]:t._e(),t.priority===t.priorities.URGENT?[t._v("Urgent")]:t._e(),t.priority===t.priorities.DO_NOW?[t._v("DO NOW")]:t._e(),t.priority===t.priorities.DO_NOW?a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"exclamation"}})],1):t._e()],2):t._e()},p=[],v=(a("a9e3"),a("9f07")),k={name:"priorityLabel",data:function(){return{priorities:v}},props:{priority:{default:0,type:Number},showAll:{type:Boolean,default:!1}}},b=k,g=(a("4ab6"),a("2877")),C=Object(g["a"])(b,m,p,!1,null,null,null),_=C.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-wrapper"},t._l(t.labels,(function(e){return a("span",{key:e.id,staticClass:"tag",style:{background:e.hexColor,color:e.textColor}},[a("span",[t._v(t._s(e.title))])])})),0)},w=[],D={name:"labels",props:{labels:{required:!0}}},T=D,x=(a("e011"),Object(g["a"])(T,y,w,!1,null,"6ad66d40",null)),I=x.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user",class:{"is-inline":t.isInline}},[a("img",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.user.username,expression:"user.username"}],staticClass:"avatar",attrs:{src:t.user.getAvatarUrl(t.avatarSize),alt:"",width:t.avatarSize,height:t.avatarSize}}),t.showUsername?a("span",{staticClass:"username"},[t._v(t._s(t.user.username))]):t._e()])},S=[],$={name:"user",props:{user:{required:!0,type:Object},showUsername:{required:!1,type:Boolean,default:!0},avatarSize:{required:!1,type:Number,default:50},isInline:{required:!1,type:Boolean,default:!1}}},O=$,j=(a("4565"),Object(g["a"])(O,A,S,!1,null,"7e2731ba",null)),E=j.exports,L=a("f792"),P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"defer-task loading-container",class:{"is-loading":t.taskService.loading}},[a("label",{staticClass:"label"},[t._v("Defer due date")]),a("div",{staticClass:"defer-days"},[a("button",{staticClass:"button is-outlined is-primary has-no-shadow",on:{click:function(){return t.deferDays(1)}}},[t._v("1 day")]),a("button",{staticClass:"button is-outlined is-primary has-no-shadow",on:{click:function(){return t.deferDays(3)}}},[t._v("3 days")]),a("button",{staticClass:"button is-outlined is-primary has-no-shadow",on:{click:function(){return t.deferDays(7)}}},[t._v("1 week")])]),a("flat-pickr",{staticClass:"input",class:{disabled:t.taskService.loading},attrs:{disabled:t.taskService.loading,config:t.flatPickerConfig},model:{value:t.dueDate,callback:function(e){t.dueDate=e},expression:"dueDate"}})],1)},N=[],B=a("c38f"),F=a.n(B),R={name:"defer-task",data:function(){return{taskService:u["a"],task:null,dueDate:null,lastValue:null,changeInterval:null,flatPickerConfig:{altFormat:"j M Y H:i",altInput:!0,dateFormat:"Y-m-d H:i",enableTime:!0,time_24hr:!0,inline:!0}}},components:{flatPickr:F.a},props:{value:{required:!0}},created:function(){this.taskService=new u["a"]},mounted:function(){this.task=this.value,this.dueDate=this.task.dueDate,this.lastValue=this.dueDate,this.changeInterval&&clearInterval(this.changeInterval),this.changeInterval=setInterval(this.updateDueDate,1e3)},beforeDestroy:function(){this.changeInterval&&clearInterval(this.changeInterval),this.updateDueDate()},watch:{value:function(t){this.task=t,this.dueDate=this.task.dueDate,this.lastValue=this.dueDate}},methods:{deferDays:function(t){this.dueDate=new Date(this.dueDate),this.dueDate=this.dueDate.setDate(this.dueDate.getDate()+t),this.updateDueDate()},updateDueDate:function(){var t=this;this.dueDate&&+new Date(this.dueDate)!==+this.lastValue&&(this.task.dueDate=new Date(this.dueDate),this.taskService.update(this.task).then((function(e){t.lastValue=e.dueDate,t.task=e,t.$emit("input",e)})).catch((function(e){t.error(e,t)})))}}},U=R,M=Object(g["a"])(U,P,N,!1,null,null,null),W=M.exports,q={name:"singleTaskInList",data:function(){return{taskService:u["a"],task:f["a"],showDefer:!1}},components:{DeferTask:W,Fancycheckbox:L["a"],User:E,Labels:I,PriorityLabel:_},props:{theTask:{type:f["a"],required:!0},isArchived:{type:Boolean,default:!1},taskDetailRoute:{type:String,default:"task.list.detail"},showList:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},watch:{theTask:function(t){this.task=t}},mounted:function(){this.task=this.theTask},created:function(){this.task=new f["a"],this.taskService=new u["a"]},methods:{markAsDone:function(t){var e=this,a=function(){e.taskService.update(e.task).then((function(a){e.task=a,e.$emit("taskUpdated",a),e.success({message:"The task was successfully "+(e.task.done?"":"un-")+"marked as done."},e,[{title:"Undo",callback:function(){return e.markAsDone({target:{checked:!t}})}}])})).catch((function(t){e.error(t,e)}))};t?setTimeout(a,300):a()}}},H=q,G=Object(g["a"])(H,d,h,!1,null,null,null),V=G.exports,K=a("9fb0"),z=(a("0952"),{name:"ShowTasks",components:{Fancycheckbox:L["a"],SingleTaskInList:V,flatPickr:F.a},data:function(){return{tasks:[],hasUndoneTasks:!1,taskService:u["a"],showNulls:!0,cStartDate:null,cEndDate:null,flatPickerConfig:{altFormat:"j M Y H:i",altInput:!0,dateFormat:"Y-m-d H:i",enableTime:!0,time_24hr:!0}}},props:{startDate:Date,endDate:Date,showAll:Boolean},created:function(){this.taskService=new u["a"],this.cStartDate=this.startDate,this.cEndDate=this.endDate,this.loadPendingTasks()},watch:{$route:"loadPendingTasks",startDate:function(t){this.cStartDate=t},endDate:function(t){this.cEndDate=t}},computed:Object(o["b"])({userAuthenticated:function(t){return t.auth.authenticated}}),methods:{loadPendingTasks:function(){var t=this;if(this.userAuthenticated){this.cStartDate=new Date(this.cStartDate),this.cEndDate=new Date(this.cEndDate),this.showAll?this.setTitle("Current Tasks"):this.setTitle("Tasks from ".concat(this.cStartDate.toLocaleDateString()," until ").concat(this.cEndDate.toLocaleDateString()));var e={sort_by:["due_date","id"],order_by:["desc","desc"],filter_by:["done"],filter_value:[!1],filter_comparator:["equals"],filter_concat:"and",filter_include_nulls:this.showNulls};this.showAll||(this.showNulls&&(e.filter_by.push("start_date"),e.filter_value.push(this.cStartDate),e.filter_comparator.push("greater"),e.filter_by.push("end_date"),e.filter_value.push(this.cEndDate),e.filter_comparator.push("less")),e.filter_by.push("due_date"),e.filter_value.push(this.cEndDate),e.filter_comparator.push("less"),e.filter_by.push("due_date"),e.filter_value.push(this.cStartDate),e.filter_comparator.push("greater")),this.taskService.getAll({},e).then((function(e){if(e.length>0)for(var a in e)!0!==e[a].done&&(t.hasUndoneTasks=!0);t.$set(t,"tasks",e.filter((function(t){return!t.done}))),t.$store.commit(K["d"],e.length>0)})).catch((function(e){t.error(e,t)}))}},sortTasks:function(){if(null!==this.tasks&&this.tasks!==[])return this.tasks.sort((function(t,e){return t.done<e.done?-1:t.done>e.done?1:t.id>e.id?-1:t.id<e.id?1:0}))},updateTasks:function(t){for(var e in this.tasks)if(this.tasks[e].id===t.id){this.$set(this.tasks,e,t);break}this.sortTasks()}}}),Y=z,J=Object(g["a"])(Y,c,l,!1,null,null,null),Q=J.exports,X={name:"Home",components:{ShowTasks:Q},data:function(){return{loading:!1,currentDate:new Date,tasks:[]}},computed:Object(o["b"])({migratorsEnabled:function(t){return null!==t.config.availableMigrators&&t.config.availableMigrators.length>0},authenticated:function(t){return t.auth.authenticated},userInfo:function(t){return t.auth.info},hasTasks:function(t){return t.hasTasks}})},Z=X,tt=Object(g["a"])(Z,i,r,!1,null,null,null),et=tt.exports,at=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},st=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content has-text-centered"},[a("h1",[t._v("Not found")]),a("p",[t._v("The page you requested does not exist.")])])}],nt={name:"404",mounted:function(){this.setTitle("404")}},it=nt,rt=Object(g["a"])(it,at,st,!1,null,null,null),ot=rt.exports,ct=a("61be"),lt=a("2885"),ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"title has-text-centered"},[t._v("Login")]),a("div",{staticClass:"box"},[t.confirmedEmailSuccess?a("div",{staticClass:"notification is-success has-text-centered"},[t._v(" You successfully confirmed your email! You can log in now. ")]):t._e(),a("form",{attrs:{id:"loginform"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"username"}},[t._v("Username")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"focus",rawName:"v-focus"}],ref:"username",staticClass:"input",attrs:{type:"text",id:"username",name:"username",placeholder:"e.g. frederick",required:""}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"password"}},[t._v("Password")]),a("div",{staticClass:"control"},[a("input",{ref:"password",staticClass:"input",attrs:{type:"password",id:"password",name:"password",placeholder:"e.g. ••••••••••••",required:""}})])]),t.needsTotpPasscode?a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"totpPasscode"}},[t._v("Two Factor Authentication Code")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"focus",rawName:"v-focus"}],ref:"totpPasscode",staticClass:"input",attrs:{type:"text",id:"totpPasscode",placeholder:"e.g. 123456",required:""}})])]):t._e(),a("div",{staticClass:"field is-grouped login-buttons"},[a("div",{staticClass:"control is-expanded"},[a("button",{staticClass:"button is-primary",class:{"is-loading":t.loading},attrs:{type:"submit"}},[t._v("Login ")]),t.registrationEnabled?a("router-link",{staticClass:"button",attrs:{to:{name:"user.register"}}},[t._v("Register ")]):t._e()],1),a("div",{staticClass:"control"},[a("router-link",{staticClass:"reset-password-link",attrs:{to:{name:"user.password-reset.request"}}},[t._v("Reset your password ")])],1)]),t.errorMessage?a("div",{staticClass:"notification is-danger"},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e()]),a("legal")],1)])},dt=[],ht=a("5560"),ft=a("f16e"),mt=a("45d2"),pt={components:{legal:mt["a"]},data:function(){return{confirmedEmailSuccess:!1}},beforeMount:function(){var t=this,e=localStorage.getItem("emailConfirmToken");if(e){var a=ft["a"].setLoading(this);ht["a"].post("user/confirm",{token:e}).then((function(){localStorage.removeItem("emailConfirmToken"),t.confirmedEmailSuccess=!0,a()})).catch((function(e){a(),t.$store.commit(K["c"],e.response.data.message)}))}this.authenticated&&Mn.push({name:"home"})},created:function(){this.setTitle("Login")},computed:Object(o["b"])({registrationEnabled:function(t){return t.config.registrationEnabled},loading:K["f"],errorMessage:K["c"],needsTotpPasscode:function(t){return t.auth.needsTotpPasscode},authenticated:function(t){return t.auth.authenticated}}),methods:{submit:function(){this.$store.commit(K["c"],"");var t={username:this.$refs.username.value,password:this.$refs.password.value};this.needsTotpPasscode&&(t.totpPasscode=this.$refs.totpPasscode.value),this.$store.dispatch("auth/login",t).then((function(){Mn.push({name:"home"})})).catch((function(){}))}}},vt=pt,kt=(a("9d11"),Object(g["a"])(vt,ut,dt,!1,null,"3c312b58",null)),bt=kt.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"title has-text-centered"},[t._v("Register")]),a("div",{staticClass:"box"},[a("form",{attrs:{id:"registerform"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"username"}},[t._v("Username")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.credentials.username,expression:"credentials.username"}],staticClass:"input",attrs:{type:"text",id:"username",name:"username",placeholder:"e.g. frederick",required:""},domProps:{value:t.credentials.username},on:{input:function(e){e.target.composing||t.$set(t.credentials,"username",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"email"}},[t._v("E-mail address")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.email,expression:"credentials.email"}],staticClass:"input",attrs:{type:"email",id:"email",name:"email",placeholder:"e.g. frederic@vikunja.io",required:""},domProps:{value:t.credentials.email},on:{input:function(e){e.target.composing||t.$set(t.credentials,"email",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"password1"}},[t._v("Password")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"}],staticClass:"input",attrs:{type:"password",id:"password1",name:"password1",placeholder:"e.g. ••••••••••••",required:""},domProps:{value:t.credentials.password},on:{input:function(e){e.target.composing||t.$set(t.credentials,"password",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"password2"}},[t._v("Retype your password")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password2,expression:"credentials.password2"}],staticClass:"input",attrs:{type:"password",id:"password2",name:"password2",placeholder:"e.g. ••••••••••••",required:""},domProps:{value:t.credentials.password2},on:{input:function(e){e.target.composing||t.$set(t.credentials,"password2",e.target.value)}}})])]),a("div",{staticClass:"field is-grouped"},[a("div",{staticClass:"control"},[a("button",{staticClass:"button is-primary",class:{"is-loading":t.loading},attrs:{type:"submit"}},[t._v("Register")]),a("router-link",{staticClass:"button",attrs:{to:{name:"user.login"}}},[t._v("Login")])],1)]),t.loading?a("div",{staticClass:"notification is-info"},[t._v(" Loading... ")]):t._e(),""!==t.errorMessage?a("div",{staticClass:"notification is-danger"},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e()]),a("legal")],1)])},Ct=[],_t={components:{Legal:mt["a"]},data:function(){return{credentials:{username:"",email:"",password:"",password2:""}}},beforeMount:function(){this.authenticated&&Mn.push({name:"home"})},mounted:function(){this.setTitle("Register")},computed:Object(o["b"])({authenticated:function(t){return t.auth.authenticated},loading:K["f"],errorMessage:K["c"]}),methods:{submit:function(){if(this.$store.commit(K["f"],!0),this.$store.commit(K["c"],""),this.credentials.password2!==this.credentials.password)return this.$store.commit(K["c"],"Passwords don't match."),void this.$store.commit(K["f"],!1);var t={username:this.credentials.username,email:this.credentials.email,password:this.credentials.password};this.$store.dispatch("auth/register",t)}}},yt=_t,wt=(a("7679"),Object(g["a"])(yt,gt,Ct,!1,null,"8d3a7f6e",null)),Dt=wt.exports,Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content has-text-centered"},[a("ShowTasks",{attrs:{"start-date":t.startDate,"end-date":t.endDate}})],1)},xt=[],It={name:"ShowTasksInRange",components:{ShowTasks:Q},data:function(){return{startDate:new Date(this.$route.params.startDateUnix),endDate:new Date(this.$route.params.endDateUnix)}},watch:{$route:"setDates"},created:function(){this.setDates()},methods:{setDates:function(){switch(this.$route.params.type){case"week":this.startDate=new Date,this.endDate=new Date((new Date).getTime()+6048e5);break;case"month":this.startDate=new Date,this.endDate=new Date((new Date).setMonth((new Date).getMonth()+1));break}}}},At=It,St=Object(g["a"])(At,Tt,xt,!1,null,null,null),$t=St.exports,Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loading?a("div",{staticClass:"message is-centered is-info"},[t._m(0)]):t._e()},jt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-header"},[a("p",{staticClass:"has-text-centered"},[t._v(" Authenticating... ")])])}],Et={name:"LinkSharingAuth",data:function(){return{hash:"",loading:!0}},created:function(){this.auth()},mounted:function(){this.setTitle("Authenticating...")},methods:{auth:function(){var t=this;this.$store.dispatch("auth/linkShareAuth",this.$route.params.share).then((function(e){t.loading=!1,Mn.push({name:"list.list",params:{listId:e.list_id}})})).catch((function(e){t.error(e,t)}))}}},Lt=Et,Pt=Object(g["a"])(Lt,Ot,jt,!1,null,null,null),Nt=Pt.exports,Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.target!==e.currentTarget?null:t.close()}}},[a("div",{staticClass:"scrolling-content"},[a("a",{staticClass:"close",on:{click:function(e){return t.close()}}},[a("icon",{attrs:{icon:"times"}})],1),a("task-detail-view")],1)])])},Ft=[],Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loader-container task-view-container",class:{"is-loading":t.taskService.loading}},[a("div",{staticClass:"task-view"},[a("div",{staticClass:"heading"},[""===t.task.identifier?a("h1",{staticClass:"title task-id"},[t._v(" #"+t._s(t.task.index)+" ")]):a("h1",{staticClass:"title task-id"},[t._v(" "+t._s(t.task.identifier)+" ")]),t.task.done?a("div",{staticClass:"is-done"},[t._v("Done")]):t._e(),a("h1",{ref:"taskTitle",staticClass:"title input",attrs:{contenteditable:"true"},on:{focusout:function(e){return t.saveTaskOnChange()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.saveTaskOnChange():null}}},[t._v(t._s(t.task.title))])]),t.parent&&t.parent.namespace&&t.parent.list?a("h6",{staticClass:"subtitle"},[t._v(" "+t._s(t.parent.namespace.title)+" > "),a("router-link",{attrs:{to:{name:t.listViewName,params:{listId:t.parent.list.id}}}},[t._v(" "+t._s(t.parent.list.title)+" ")])],1):t._e(),a("div",{staticClass:"columns"},[a("div",{staticClass:"column",class:{"is-two-thirds":t.canWrite}},[a("div",{staticClass:"columns details"},[t.activeFields.assignees?a("div",{staticClass:"column assignees"},[a("div",{staticClass:"detail-title"},[a("icon",{attrs:{icon:"users"}}),t._v(" Assignees ")],1),a("edit-assignees",{ref:"assignees",attrs:{"task-id":t.task.id,"list-id":t.task.listId,"initial-assignees":t.task.assignees,disabled:!t.canWrite}})],1):t._e(),t.activeFields.priority?a("div",{staticClass:"column"},[a("div",{staticClass:"detail-title"},[a("icon",{attrs:{icon:["far","star"]}}),t._v(" Priority ")],1),a("priority-select",{ref:"priority",attrs:{disabled:!t.canWrite},on:{change:t.saveTask},model:{value:t.task.priority,callback:function(e){t.$set(t.task,"priority",e)},expression:"task.priority"}})],1):t._e(),t.activeFields.dueDate?a("div",{staticClass:"column"},[a("div",{staticClass:"detail-title"},[a("icon",{attrs:{icon:"calendar"}}),t._v(" Due Date ")],1),a("div",{staticClass:"date-input"},[a("flat-pickr",{ref:"dueDate",staticClass:"input",class:{disabled:t.taskService.loading},attrs:{disabled:t.taskService.loading||!t.canWrite,config:t.flatPickerConfig,placeholder:"Click here to set a due date"},on:{"on-close":t.saveTask},model:{value:t.dueDate,callback:function(e){t.dueDate=e},expression:"dueDate"}}),t.dueDate&&t.canWrite?a("a",{on:{click:function(){t.dueDate=t.task.dueDate=null,t.saveTask()}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"times"}})],1)]):t._e()],1)]):t._e(),t.activeFields.percentDone?a("div",{staticClass:"column"},[a("div",{staticClass:"detail-title"},[a("icon",{attrs:{icon:"percent"}}),t._v(" Percent Done ")],1),a("percent-done-select",{ref:"percentDone",attrs:{disabled:!t.canWrite},on:{change:t.saveTask},model:{value:t.task.percentDone,callback:function(e){t.$set(t.task,"percentDone",e)},expression:"task.percentDone"}})],1):t._e(),t.activeFields.startDate?a("div",{staticClass:"column"},[a("div",{staticClass:"detail-title"},[a("icon",{attrs:{icon:"calendar-week"}}),t._v(" Start Date ")],1),a("div",{staticClass:"date-input"},[a("flat-pickr",{ref:"startDate",staticClass:"input",class:{disabled:t.taskService.loading},attrs:{disabled:t.taskService.loading||!t.canWrite,config:t.flatPickerConfig,placeholder:"Click here to set a start date"},on:{"on-close":t.saveTask},model:{value:t.task.startDate,callback:function(e){t.$set(t.task,"startDate",e)},expression:"task.startDate"}}),t.task.startDate&&t.canWrite?a("a",{on:{click:function(){t.task.startDate=null,t.saveTask()}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"times"}})],1)]):t._e()],1)]):t._e(),t.activeFields.endDate?a("div",{staticClass:"column"},[a("div",{staticClass:"detail-title"},[a("icon",{attrs:{icon:"calendar-week"}}),t._v(" End Date ")],1),a("div",{staticClass:"date-input"},[a("flat-pickr",{ref:"endDate",staticClass:"input",class:{disabled:t.taskService.loading},attrs:{disabled:t.taskService.loading||!t.canWrite,config:t.flatPickerConfig,placeholder:"Click here to set an end date"},on:{"on-close":t.saveTask},model:{value:t.task.endDate,callback:function(e){t.$set(t.task,"endDate",e)},expression:"task.endDate"}}),t.task.endDate&&t.canWrite?a("a",{on:{click:function(){t.task.endDate=null,t.saveTask()}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"times"}})],1)]):t._e()],1)]):t._e(),t.activeFields.reminders?a("div",{staticClass:"column"},[a("div",{staticClass:"detail-title"},[a("icon",{attrs:{icon:"history"}}),t._v(" Reminders ")],1),a("reminders",{ref:"reminders",attrs:{disabled:!t.canWrite},on:{change:t.saveTask},model:{value:t.task.reminderDates,callback:function(e){t.$set(t.task,"reminderDates",e)},expression:"task.reminderDates"}})],1):t._e(),t.activeFields.repeatAfter?a("div",{staticClass:"column"},[a("div",{staticClass:"detail-title"},[a("icon",{attrs:{icon:["far","clock"]}}),t._v(" Repeat ")],1),a("repeat-after",{ref:"repeatAfter",attrs:{disabled:!t.canWrite},on:{change:t.saveTask},model:{value:t.task,callback:function(e){t.task=e},expression:"task"}})],1):t._e(),t.activeFields.color?a("div",{staticClass:"column"},[a("div",{staticClass:"detail-title"},[a("icon",{attrs:{icon:"fill-drip"}}),t._v(" Color ")],1),a("color-picker",{ref:"color",attrs:{"menu-position":"bottom"},on:{change:t.saveTask},model:{value:t.taskColor,callback:function(e){t.taskColor=e},expression:"taskColor"}})],1):t._e()]),t.activeFields.labels?a("div",{staticClass:"labels-list details"},[a("div",{staticClass:"detail-title"},[a("span",{staticClass:"icon is-grey"},[a("icon",{attrs:{icon:"tags"}})],1),t._v(" Labels ")]),a("edit-labels",{ref:"labels",attrs:{"task-id":t.taskId,disabled:!t.canWrite},model:{value:t.task.labels,callback:function(e){t.$set(t.task,"labels",e)},expression:"task.labels"}})],1):t._e(),a("div",{staticClass:"details content description",class:{"has-top-border":t.activeFields.labels}},[a("h3",[a("span",{staticClass:"icon is-grey"},[a("icon",{attrs:{icon:"align-left"}})],1),t._v(" Description ")]),a("editor",{attrs:{"upload-enabled":!0,"upload-callback":t.attachmentUpload,"is-edit-enabled":t.canWrite,placeholder:"Click here to enter a description..."},on:{change:t.saveTask},model:{value:t.task.description,callback:function(e){t.$set(t.task,"description",e)},expression:"task.description"}})],1),t.activeFields.attachments?a("div",{staticClass:"content attachments has-top-border"},[a("attachments",{ref:"attachments",attrs:{"task-id":t.taskId,"edit-enabled":t.canWrite}})],1):t._e(),t.activeFields.relatedTasks?a("div",{staticClass:"content details has-top-border"},[a("h3",[a("span",{staticClass:"icon is-grey"},[a("icon",{attrs:{icon:"tasks"}})],1),t._v(" Related Tasks ")]),a("related-tasks",{ref:"relatedTasks",attrs:{"task-id":t.taskId,"list-id":t.task.listId,"initial-related-tasks":t.task.relatedTasks,"show-no-relations-notice":!0,"edit-enabled":t.canWrite}})],1):t._e(),t.activeFields.moveList?a("div",{staticClass:"content details has-top-border"},[a("h3",[a("span",{staticClass:"icon is-grey"},[a("icon",{attrs:{icon:"list"}})],1),t._v(" Move task to a different list ")]),a("div",{staticClass:"field has-addons"},[a("div",{staticClass:"control is-expanded"},[a("list-search",{ref:"moveList",on:{selected:t.changeList}})],1)])]):t._e(),a("comments",{attrs:{"task-id":t.taskId,"can-write":t.canWrite}})],1),t.canWrite?a("div",{staticClass:"column is-one-third action-buttons"},[a("a",{staticClass:"button is-outlined noshadow has-no-border",class:{"is-success":!t.task.done},on:{click:function(e){return t.toggleTaskDone()}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"check-double"}})],1),t.task.done?[t._v(" Mark as undone ")]:[t._v(" Done! ")]],2),a("a",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","shift","a"],expression:"['ctrl', 'shift', 'a']"}],staticClass:"button",on:{click:function(e){return t.setFieldActive("assignees")},shortkey:function(e){return t.setFieldActive("assignees")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"users"}})],1),t._v(" Assign this task to a user ")]),a("a",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","shift","l"],expression:"['ctrl', 'shift', 'l']"}],staticClass:"button",on:{click:function(e){return t.setFieldActive("labels")},shortkey:function(e){return t.setFieldActive("labels")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"tags"}})],1),t._v(" Add labels ")]),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("reminders")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"history"}})],1),t._v(" Set Reminders ")]),a("a",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","shift","d"],expression:"['ctrl', 'shift', 'd']"}],staticClass:"button",on:{click:function(e){return t.setFieldActive("dueDate")},shortkey:function(e){return t.setFieldActive("dueDate")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"calendar"}})],1),t._v(" Set Due Date ")]),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("startDate")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"calendar-week"}})],1),t._v(" Set a Start Date ")]),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("endDate")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"calendar-week"}})],1),t._v(" Set an End Date ")]),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("repeatAfter")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:["far","clock"]}})],1),t._v(" Set a repeating interval ")]),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("priority")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:["far","star"]}})],1),t._v(" Set Priority ")]),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("percentDone")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"percent"}})],1),t._v(" Set Percent Done ")]),a("a",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","shift","f"],expression:"['ctrl', 'shift', 'f']"}],staticClass:"button",on:{click:function(e){return t.setFieldActive("attachments")},shortkey:function(e){return t.setFieldActive("attachments")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"paperclip"}})],1),t._v(" Add attachments ")]),a("a",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","shift","r"],expression:"['ctrl', 'shift', 'r']"}],staticClass:"button",on:{click:function(e){return t.setFieldActive("relatedTasks")},shortkey:function(e){return t.setFieldActive("relatedTasks")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"tasks"}})],1),t._v(" Add task relations ")]),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("moveList")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"list"}})],1),t._v(" Move task ")]),a("a",{staticClass:"button",on:{click:function(e){return t.setFieldActive("color")}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"fill-drip"}})],1),t._v(" Set task color ")]),a("a",{staticClass:"button is-danger is-outlined noshadow has-no-border",on:{click:function(e){t.showDeleteModal=!0}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"trash-alt"}})],1),t._v(" Delete task ")])]):t._e()])]),t.showDeleteModal?a("modal",{on:{close:function(e){t.showDeleteModal=!1},submit:function(e){return t.deleteTask()}}},[a("span",{attrs:{slot:"header"},slot:"header"},[t._v("Delete this task")]),a("p",{attrs:{slot:"text"},slot:"text"},[t._v(" Are you sure you want to remove this task? "),a("br"),t._v(" This will also remove all attachments, reminders and relations associated with this task and "),a("b",[t._v("cannot be undone!")])])]):t._e()],1)},Ut=[],Mt=(a("b0c0"),a("b64b"),a("ac1f"),a("1276"),a("b8e5")),Wt=a("a1b4"),qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.priority,expression:"priority"}],attrs:{disabled:t.disabled},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.priority=e.target.multiple?a:a[0]},t.updateData]}},[a("option",{domProps:{value:t.priorities.UNSET}},[t._v("Unset")]),a("option",{domProps:{value:t.priorities.LOW}},[t._v("Low")]),a("option",{domProps:{value:t.priorities.MEDIUM}},[t._v("Medium")]),a("option",{domProps:{value:t.priorities.HIGH}},[t._v("High")]),a("option",{domProps:{value:t.priorities.URGENT}},[t._v("Urgent")]),a("option",{domProps:{value:t.priorities.DO_NOW}},[t._v("DO NOW")])])])},Ht=[],Gt={name:"prioritySelect",data:function(){return{priorities:v,priority:0}},props:{value:{default:0,type:Number},disabled:{default:!1}},watch:{value:function(t){this.priority=t}},mounted:function(){this.priority=this.value},methods:{updateData:function(){this.$emit("input",this.priority),this.$emit("change")}}},Vt=Gt,Kt=Object(g["a"])(Vt,qt,Ht,!1,null,null,null),zt=Kt.exports,Yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model.number",value:t.percentDone,expression:"percentDone",modifiers:{number:!0}}],attrs:{disabled:t.disabled},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var a="_value"in e?e._value:e.value;return t._n(a)}));t.percentDone=e.target.multiple?a:a[0]},t.updateData]}},[a("option",{attrs:{value:"0"}},[t._v("0%")]),a("option",{attrs:{value:"0.1"}},[t._v("10%")]),a("option",{attrs:{value:"0.2"}},[t._v("20%")]),a("option",{attrs:{value:"0.3"}},[t._v("30%")]),a("option",{attrs:{value:"0.4"}},[t._v("40%")]),a("option",{attrs:{value:"0.5"}},[t._v("50%")]),a("option",{attrs:{value:"0.6"}},[t._v("60%")]),a("option",{attrs:{value:"0.7"}},[t._v("70%")]),a("option",{attrs:{value:"0.8"}},[t._v("80%")]),a("option",{attrs:{value:"0.9"}},[t._v("90%")]),a("option",{attrs:{value:"1"}},[t._v("100%")])])])},Jt=[],Qt={name:"percentDoneSelect",data:function(){return{percentDone:0}},props:{value:{default:0,type:Number},disabled:{default:!1}},watch:{value:function(t){this.percentDone=t}},mounted:function(){this.percentDone=this.value},methods:{updateData:function(){this.$emit("input",this.percentDone),this.$emit("change")}}},Xt=Qt,Zt=Object(g["a"])(Xt,Yt,Jt,!1,null,null,null),te=Zt.exports,ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{multiple:!0,"close-on-select":!1,"clear-on-select":!0,"options-limit":300,"hide-selected":!0,options:t.foundLabels,searchable:!0,loading:t.labelService.loading||t.labelTaskService.loading,"internal-search":!0,placeholder:"Type to add a new label...",label:"title","track-by":"id",taggable:!0,showNoOptions:!1,"tag-placeholder":"Add this as new label",disabled:t.disabled},on:{"search-change":t.findLabel,select:t.addLabel,tag:t.createAndAddLabel},scopedSlots:t._u([{key:"tag",fn:function(e){var s=e.option;return[a("span",{staticClass:"tag",style:{background:s.hexColor,color:s.textColor}},[a("span",[t._v(t._s(s.title))]),a("a",{staticClass:"delete is-small",on:{click:function(e){return t.removeLabel(s)}}})])]}},{key:"clear",fn:function(e){return[t.labels.length?a("div",{staticClass:"multiselect__clear",on:{mousedown:function(a){return a.preventDefault(),a.stopPropagation(),t.clearAllLabels(e.search)}}}):t._e()]}}]),model:{value:t.labels,callback:function(e){t.labels=e},expression:"labels"}})},ae=[],se=(a("a434"),a("2ef0")),ne=a("8821"),ie=a("83a4"),re=a("e02a"),oe={name:"edit-labels",props:{value:{default:function(){return[]},type:Array},taskId:{type:Number,required:!0},disabled:{default:!1}},data:function(){return{labelService:ne["a"],labelTaskService:re["a"],foundLabels:[],labelTimeout:null,labels:[],searchQuery:""}},components:{multiselect:function(){return{component:a.e("multiselect").then(a.t.bind(null,"8e5f",7)),loading:ct["a"],error:lt["a"],timeout:6e4}}},watch:{value:function(t){this.labels=t}},created:function(){this.labelService=new ne["a"],this.labelTaskService=new re["a"],this.labels=this.value},methods:{findLabel:function(t){var e=this;this.searchQuery=t,""!==t?(null!==this.labelTimeout&&clearTimeout(this.labelTimeout),this.labelTimeout=setTimeout((function(){e.labelService.getAll({},{s:t}).then((function(t){e.$set(e,"foundLabels",Object(se["differenceWith"])(t,e.labels,(function(t,e){return t.id===e.id}))),e.labelTimeout=null})).catch((function(t){e.error(t,e)}))}),300)):this.clearAllLabels()},clearAllLabels:function(){this.$set(this,"foundLabels",[])},addLabel:function(t){var e=this;this.$store.dispatch("tasks/addLabel",{label:t,taskId:this.taskId}).then((function(){e.$emit("input",e.labels)})).catch((function(t){e.error(t,e)}))},removeLabel:function(t){var e=this;this.$store.dispatch("tasks/removeLabel",{label:t,taskId:this.taskId}).then((function(){for(var a in e.labels)e.labels[a].id===t.id&&e.labels.splice(a,1);e.$emit("input",e.labels)})).catch((function(t){e.error(t,e)}))},createAndAddLabel:function(t){var e=this,a=new ie["a"]({title:t});this.labelService.create(a).then((function(t){e.addLabel(t),e.labels.push(t)})).catch((function(t){e.error(t,e)}))}}},ce=oe,le=Object(g["a"])(ce,ee,ae,!1,null,"52f0dbb8",null),ue=le.exports,de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{multiple:!0,"close-on-select":!1,"clear-on-select":!0,"options-limit":300,"hide-selected":!0,options:t.foundUsers,searchable:!0,loading:t.listUserService.loading,"internal-search":!0,placeholder:"Type to assign a user...",label:"username","track-by":"id","select-label":"Assign this user",showNoOptions:!1,disabled:t.disabled},on:{"search-change":t.findUser,select:t.addAssignee},scopedSlots:t._u([{key:"tag",fn:function(e){var s=e.option;return[a("user",{attrs:{user:s,"show-username":!1,"avatar-size":30}}),t.disabled?t._e():a("a",{staticClass:"remove-assignee",on:{click:function(e){return t.removeAssignee(s)}}},[a("icon",{attrs:{icon:"times"}})],1)]}},{key:"clear",fn:function(e){return[null!==t.newAssignee&&0!==t.newAssignee.id?a("div",{staticClass:"multiselect__clear",on:{mousedown:function(a){return a.preventDefault(),a.stopPropagation(),t.clearAllFoundUsers(e.search)}}}):t._e()]}}]),model:{value:t.assignees,callback:function(e){t.assignees=e},expression:"assignees"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("No user found. Consider changing the search query.")])])},he=[],fe=a("8654"),me=a("276c"),pe=a("e954"),ve=a("920b"),ke=a("92a6"),be=a("0402"),ge=a("737d"),Ce=function(t){Object(ve["a"])(a,t);var e=Object(ke["a"])(a);function a(){return Object(me["a"])(this,a),e.call(this,{getAll:"/lists/{listId}/listusers"})}return Object(pe["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(ge["a"])(t.created),t.updated=Object(ge["a"])(t.updated),t}},{key:"modelFactory",value:function(t){return new fe["a"](t)}}]),a}(be["a"]),_e=a("261b"),ye={name:"editAssignees",components:{User:E,multiselect:function(){return{component:a.e("multiselect").then(a.t.bind(null,"8e5f",7)),loading:ct["a"],error:lt["a"],timeout:6e4}}},props:{taskId:{type:Number,required:!0},listId:{type:Number,required:!0},initialAssignees:{type:Array,default:function(){return[]}},disabled:{default:!1}},data:function(){return{newAssignee:fe["a"],listUserService:Ce,foundUsers:[],assignees:[],taskAssigneeService:_e["a"]}},created:function(){this.assignees=this.initialAssignees,this.listUserService=new Ce,this.newAssignee=new fe["a"],this.taskAssigneeService=new _e["a"]},watch:{initialAssignees:function(t){this.assignees=t}},methods:{addAssignee:function(t){var e=this;this.$store.dispatch("tasks/addAssignee",{user:t,taskId:this.taskId}).catch((function(t){e.error(t,e)}))},removeAssignee:function(t){var e=this;this.$store.dispatch("tasks/removeAssignee",{user:t,taskId:this.taskId}).then((function(){for(var a in e.assignees)e.assignees[a].id===t.id&&e.assignees.splice(a,1)})).catch((function(t){e.error(t,e)}))},findUser:function(t){var e=this;""!==t?this.listUserService.getAll({listId:this.listId},{s:t}).then((function(t){e.$set(e,"foundUsers",Object(se["differenceWith"])(t,e.assignees,(function(t,e){return t.id===e.id})))})).catch((function(t){e.error(t,e)})):this.clearAllFoundUsers()},clearAllFoundUsers:function(){this.$set(this,"foundUsers",[])}}},we=ye,De=Object(g["a"])(we,de,he,!1,null,null,null),Te=De.exports,xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"attachments"},[a("h3",[a("span",{staticClass:"icon is-grey"},[a("icon",{attrs:{icon:"paperclip"}})],1),t._v(" Attachments "),t.editEnabled?a("a",{staticClass:"button is-primary is-outlined is-small noshadow",attrs:{disabled:t.attachmentService.loading},on:{click:function(e){return t.$refs.files.click()}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"cloud-upload-alt"}})],1),t._v(" Upload attachment ")]):t._e()]),t.editEnabled?a("input",{ref:"files",attrs:{type:"file",id:"files",multiple:"",disabled:t.attachmentService.loading},on:{change:function(e){return t.uploadNewAttachment()}}}):t._e(),t.attachmentService.uploadProgress>0?a("progress",{staticClass:"progress is-primary",attrs:{max:"100"},domProps:{value:t.attachmentService.uploadProgress}},[t._v(t._s(t.attachmentService.uploadProgress)+"%")]):t._e(),a("table",[t._m(0),t._l(t.attachments,(function(e){return a("tr",{key:e.id,staticClass:"attachment"},[a("td",[t._v(" "+t._s(e.file.name)+" ")]),a("td",[t._v(t._s(e.file.getHumanSize()))]),a("td",[t._v(t._s(e.file.mime))]),a("td",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.formatDate(e.created),expression:"formatDate(a.created)"}]},[t._v(t._s(t.formatDateSince(e.created)))]),a("td",[a("user",{attrs:{user:e.createdBy,"avatar-size":30}})],1),a("td",[a("div",{staticClass:"buttons has-addons"},[a("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Download this attachment",expression:"'Download this attachment'"}],staticClass:"button is-primary noshadow",on:{click:function(a){return t.downloadAttachment(e)}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"cloud-download-alt"}})],1)]),t.editEnabled?a("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete this attachment",expression:"'Delete this attachment'"}],staticClass:"button is-danger noshadow",on:{click:function(){t.attachmentToDelete=e,t.showDeleteModal=!0}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"trash-alt"}})],1)]):t._e()])])])}))],2),t.editEnabled?a("div",{staticClass:"dropzone",class:{hidden:!t.showDropzone}},[a("div",{staticClass:"drop-hint"},[a("div",{staticClass:"icon"},[a("icon",{attrs:{icon:"cloud-upload-alt"}})],1),a("div",{staticClass:"hint"},[t._v(" Drop files here to upload ")])])]):t._e(),t.showDeleteModal?a("modal",{on:{close:function(e){t.showDeleteModal=!1},submit:function(e){return t.deleteAttachment()}}},[a("span",{attrs:{slot:"header"},slot:"header"},[t._v("Delete attachment")]),a("p",{attrs:{slot:"text"},slot:"text"},[t._v("Are you sure you want to delete the attachment "+t._s(t.attachmentToDelete.file.name)+"?"),a("br"),a("b",[t._v("This CANNOT BE UNDONE!")])])]):t._e()],1)},Ie=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("Name")]),a("th",[t._v("Size")]),a("th",[t._v("Type")]),a("th",[t._v("Date")]),a("th",[t._v("Created By")]),a("th",[t._v("Action")])])}],Ae=(a("4160"),a("159b"),a("ffd0")),Se=a("50cf"),$e={name:"attachments",components:{User:E},data:function(){return{attachmentService:Ae["a"],showDropzone:!1,showDeleteModal:!1,attachmentToDelete:Se["a"]}},props:{taskId:{required:!0,type:Number},initialAttachments:{type:Array},editEnabled:{default:!0}},created:function(){this.attachmentService=new Ae["a"]},computed:Object(o["b"])({attachments:function(t){return t.attachments.attachments}}),mounted:function(){var t=this;document.addEventListener("dragenter",(function(e){e.stopPropagation(),e.preventDefault(),t.showDropzone=!0})),window.addEventListener("dragleave",(function(e){e.stopPropagation(),e.preventDefault(),t.showDropzone=!1})),document.addEventListener("dragover",(function(e){e.stopPropagation(),e.preventDefault(),t.showDropzone=!0})),document.addEventListener("drop",(function(e){e.stopPropagation(),e.preventDefault();var a=e.dataTransfer.files;t.uploadFiles(a),t.showDropzone=!1}))},methods:{downloadAttachment:function(t){this.attachmentService.download(t)},uploadNewAttachment:function(){0!==this.$refs.files.files.length&&this.uploadFiles(this.$refs.files.files)},uploadFiles:function(t){var e=this,a=new Se["a"]({taskId:this.taskId});this.attachmentService.create(a,t).then((function(t){null!==t.success&&t.success.forEach((function(t){e.$store.commit("attachments/add",t),e.$store.dispatch("tasks/addTaskAttachment",{taskId:e.taskId,attachment:t})})),null!==t.errors&&t.errors.forEach((function(t){e.error(t)}))})).catch((function(t){e.error(t,e)}))},deleteAttachment:function(){var t=this;this.attachmentService.delete(this.attachmentToDelete).then((function(e){t.$store.commit("attachments/removeById",t.attachmentToDelete.id),t.success(e,t)})).catch((function(e){t.error(e,t)})).finally((function(){t.showDeleteModal=!1}))}}},Oe=$e,je=Object(g["a"])(Oe,xe,Ie,!1,null,null,null),Ee=je.exports,Le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-relations"},[t.editEnabled?[a("label",{staticClass:"label"},[t._v("New Task Relation")]),a("div",{staticClass:"field"},[a("multiselect",{attrs:{options:t.foundTasks,multiple:!1,searchable:!0,loading:t.taskService.loading,"internal-search":!0,placeholder:"Type search for a new task to add as related...",label:"title","track-by":"id",taggable:!0,showNoOptions:!1,"tag-placeholder":"Add this as new related task"},on:{"search-change":t.findTasks,tag:t.createAndRelateTask},scopedSlots:t._u([{key:"clear",fn:function(e){return[null!==t.newTaskRelationTask&&0!==t.newTaskRelationTask.id?a("div",{staticClass:"multiselect__clear",on:{mousedown:function(a){return a.preventDefault(),a.stopPropagation(),t.clearAllFoundTasks(e.search)}}}):t._e()]}}],null,!1,3091522490),model:{value:t.newTaskRelationTask,callback:function(e){t.newTaskRelationTask=e},expression:"newTaskRelationTask"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("No task found. Consider changing the search query.")])])],1),a("div",{staticClass:"field has-addons"},[a("div",{staticClass:"control is-expanded"},[a("div",{staticClass:"select is-fullwidth has-defaults"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.newTaskRelationKind,expression:"newTaskRelationKind"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.newTaskRelationKind=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"unset"}},[t._v("Select a relation kind")]),t._l(t.relationKinds,(function(e,s){return a("option",{key:s,domProps:{value:s}},[t._v(" "+t._s(e[0])+" ")])}))],2)])]),a("div",{staticClass:"control"},[a("a",{staticClass:"button is-primary",on:{click:function(e){return t.addTaskRelation()}}},[t._v("Add task Relation")])])])]:t._e(),t._l(t.relatedTasks,(function(e,s){return a("div",{key:s,staticClass:"related-tasks"},[e.length>0?[a("span",{staticClass:"title"},[t._v(t._s(t.relationKindTitle(s,e.length)))]),a("div",{staticClass:"tasks noborder"},t._l(e,(function(e){return a("div",{key:e.id,staticClass:"task"},[a("router-link",{attrs:{to:{name:t.$route.name,params:{id:e.id}}}},[a("span",{staticClass:"tasktext",class:{done:e.done}},[e.listId!==t.listId?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"This task belongs to a different list.",expression:"'This task belongs to a different list.'"}],staticClass:"different-list"},[t._v(" "+t._s(null===t.$store.getters["lists/getListById"](e.listId)?"":t.$store.getters["lists/getListById"](e.listId).title)+" > ")]):t._e(),t._v(" "+t._s(e.title)+" ")])]),t.editEnabled?a("a",{staticClass:"remove",on:{click:function(){t.showDeleteModal=!0,t.relationToDelete={relationKind:s,otherTaskId:e.id}}}},[a("icon",{attrs:{icon:"trash-alt"}})],1):t._e()],1)})),0)]:t._e()],2)})),t.showNoRelationsNotice&&0===Object.keys(t.relatedTasks).length?a("p",{staticClass:"none"},[t._v(" No task relations yet. ")]):t._e(),t.showDeleteModal?a("modal",{on:{close:function(e){t.showDeleteModal=!1},submit:function(e){return t.removeTaskRelation()}}},[a("span",{attrs:{slot:"header"},slot:"header"},[t._v("Delete Task Relation")]),a("p",{attrs:{slot:"text"},slot:"text"},[t._v("Are you sure you want to delete this task relation?"),a("br"),a("b",[t._v("This CANNOT BE UNDONE!")])])]):t._e()],2)},Pe=[],Ne=a("b1c6"),Be=function(t){Object(ve["a"])(a,t);var e=Object(ke["a"])(a);function a(t){var s;return Object(me["a"])(this,a),s=e.call(this,t),s.createdBy=new fe["a"](s.createdBy),s.created=new Date(s.created),s}return Object(pe["a"])(a,[{key:"defaults",value:function(){return{id:0,otherTaskId:0,taskId:0,relationKind:"",createdBy:fe["a"],created:null}}}]),a}(Ne["a"]),Fe=function(t){Object(ve["a"])(a,t);var e=Object(ke["a"])(a);function a(){return Object(me["a"])(this,a),e.call(this,{create:"/tasks/{taskId}/relations",delete:"/tasks/{taskId}/relations"})}return Object(pe["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(ge["a"])(t.created),t}},{key:"modelFactory",value:function(t){return new Be(t)}}]),a}(be["a"]),Re={name:"relatedTasks",data:function(){return{relatedTasks:{},taskService:u["a"],foundTasks:[],relationKinds:Mt,newTaskRelationTask:f["a"],newTaskRelationKind:"related",taskRelationService:Fe,showDeleteModal:!1,relationToDelete:{}}},components:{multiselect:function(){return{component:a.e("multiselect").then(a.t.bind(null,"8e5f",7)),loading:ct["a"],error:lt["a"],timeout:6e4}}},props:{taskId:{type:Number,required:!0},initialRelatedTasks:{type:Object,default:function(){}},showNoRelationsNotice:{type:Boolean,default:!1},listId:{type:Number,default:0},editEnabled:{default:!0}},created:function(){this.taskService=new u["a"],this.taskRelationService=new Fe,this.newTaskRelationTask=new f["a"]},watch:{initialRelatedTasks:function(t){this.relatedTasks=t}},mounted:function(){this.relatedTasks=this.initialRelatedTasks},methods:{findTasks:function(t){var e=this;""!==t?this.taskService.getAll({},{s:t}).then((function(t){e.$set(e,"foundTasks",t)})).catch((function(t){e.error(t,e)})):this.clearAllFoundTasks()},clearAllFoundTasks:function(){this.$set(this,"foundTasks",[])},addTaskRelation:function(){var t=this,e=new Be({taskId:this.taskId,otherTaskId:this.newTaskRelationTask.id,relationKind:this.newTaskRelationKind});this.taskRelationService.create(e).then((function(){t.relatedTasks[t.newTaskRelationKind]||t.$set(t.relatedTasks,t.newTaskRelationKind,[]),t.relatedTasks[t.newTaskRelationKind].push(t.newTaskRelationTask),t.newTaskRelationKind="unset",t.newTaskRelationTask=new f["a"]})).catch((function(e){t.error(e,t)}))},removeTaskRelation:function(){var t=this,e=new Be({relationKind:this.relationToDelete.relationKind,taskId:this.taskId,otherTaskId:this.relationToDelete.otherTaskId});this.taskRelationService.delete(e).then((function(){Object.keys(t.relatedTasks).forEach((function(e){for(var a in t.relatedTasks[e])t.relatedTasks[e][a].id===t.relationToDelete.otherTaskId&&e===t.relationToDelete.relationKind&&t.relatedTasks[e].splice(a,1)}))})).catch((function(e){t.error(e,t)})).finally((function(){t.showDeleteModal=!1}))},createAndRelateTask:function(t){var e=this,a=new f["a"]({title:t,listId:this.listId});this.taskService.create(a).then((function(t){e.newTaskRelationTask=t,e.addTaskRelation()})).catch((function(t){e.error(t,e)}))},relationKindTitle:function(t,e){return e>1?Mt[t][1]:Mt[t][0]}}},Ue=Re,Me=Object(g["a"])(Ue,Le,Pe,!1,null,null,null),We=Me.exports,qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"control repeat-after-input columns"},[a("p",{staticClass:"column is-1"},[t._v(" Each ")]),a("div",{staticClass:"column is-7 field has-addons"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.repeatAfter.amount,expression:"repeatAfter.amount"}],staticClass:"input",attrs:{disabled:t.disabled,placeholder:"Specify an amount..."},domProps:{value:t.repeatAfter.amount},on:{change:t.updateData,input:function(e){e.target.composing||t.$set(t.repeatAfter,"amount",e.target.value)}}})]),a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.repeatAfter.type,expression:"repeatAfter.type"}],attrs:{disabled:t.disabled},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.repeatAfter,"type",e.target.multiple?a:a[0])},t.updateData]}},[a("option",{attrs:{value:"hours"}},[t._v("Hours")]),a("option",{attrs:{value:"days"}},[t._v("Days")]),a("option",{attrs:{value:"weeks"}},[t._v("Weeks")]),a("option",{attrs:{value:"months"}},[t._v("Months")]),a("option",{attrs:{value:"years"}},[t._v("Years")])])])])]),a("fancycheckbox",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"When marking the task as done, all dates will be set relative to the current date rather than the date they had before.",expression:"'When marking the task as done, all dates will be set relative to the current date rather than the date they had before.'"}],staticClass:"column",attrs:{disabled:t.disabled},on:{change:t.updateData},model:{value:t.task.repeatFromCurrentDate,callback:function(e){t.$set(t.task,"repeatFromCurrentDate",e)},expression:"task.repeatFromCurrentDate"}},[t._v(" Repeat from current date ")])],1)},He=[],Ge={name:"repeatAfter",components:{Fancycheckbox:L["a"]},data:function(){return{task:{},repeatAfter:{amount:0,type:""}}},props:{value:{default:function(){},required:!0},disabled:{default:!1}},watch:{value:function(t){this.task=t,"undefined"!==typeof t.repeatAfter&&(this.repeatAfter=t.repeatAfter)}},mounted:function(){this.task=this.value,"undefined"!==typeof this.value.repeatAfter&&(this.repeatAfter=this.value.repeatAfter)},methods:{updateData:function(){this.task.repeatAfter=this.repeatAfter,this.$emit("input",this.task),this.$emit("change")}}},Ve=Ge,Ke=(a("68c1"),Object(g["a"])(Ve,qe,He,!1,null,"dc70d1a8",null)),ze=Ke.exports,Ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reminders"},t._l(t.reminders,(function(e,s){return a("div",{key:s,staticClass:"reminder-input",class:{overdue:e<t.nowUnix&&s!==t.reminders.length-1}},[a("flat-pickr",{attrs:{"v-model":t.reminders,config:t.flatPickerConfig,id:"taskreminderdate"+s,value:e,"data-index":s,placeholder:"Add a new reminder...",disabled:t.disabled}}),s===t.reminders.length-1||t.disabled?t._e():a("a",{on:{click:function(e){return t.removeReminderByIndex(s)}}},[a("icon",{attrs:{icon:"times"}})],1)],1)})),0)},Je=[],Qe={name:"reminders",data:function(){return{reminders:[],lastReminder:0,nowUnix:new Date,flatPickerConfig:{altFormat:"j M Y H:i",altInput:!0,dateFormat:"Y-m-d H:i",enableTime:!0,onOpen:this.updateLastReminderDate,onClose:this.addReminderDate}}},props:{value:{default:function(){return[]},type:Array},disabled:{default:!1}},components:{flatPickr:F.a},mounted:function(){this.reminders=this.value},watch:{value:function(t){this.reminders=t}},methods:{updateData:function(){this.$emit("input",this.reminders),this.$emit("change")},updateLastReminderDate:function(t){this.lastReminder=+new Date(t[0])},addReminderDate:function(t,e,a){var s=+new Date(t[0]);if(s!==this.lastReminder){var n=parseInt(a.input.dataset.index);this.reminders[n]=s;var i=this.reminders.length-1;i!==n||isNaN(s)||this.reminders.push(null),this.updateData()}},removeReminderByIndex:function(t){this.reminders.splice(t,1),this.reminders[this.reminders.length-1]=null,this.updateData()}}},Xe=Qe,Ze=Object(g["a"])(Xe,Ye,Je,!1,null,null,null),ta=Ze.exports,ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content details",class:{"has-top-border":t.canWrite||t.comments.length>0}},[t.canWrite||t.comments.length>0?a("h1",[a("span",{staticClass:"icon is-grey"},[a("icon",{attrs:{icon:["far","comments"]}})],1),t._v(" Comments ")]):t._e(),a("div",{staticClass:"comments"},[t.taskCommentService.loading?a("progress",{staticClass:"progress is-small is-info",attrs:{max:"100"}},[t._v("Loading comments... ")]):t._e(),t._l(t.comments,(function(e){return a("div",{key:e.id,staticClass:"media comment"},[a("figure",{staticClass:"media-left"},[a("img",{staticClass:"image is-avatar",attrs:{src:e.author.getAvatarUrl(48),alt:"",width:"48",height:"48"}})]),a("div",{staticClass:"media-content"},[a("div",{staticClass:"comment-info",class:{"is-pulled-up":t.canWrite}},[a("strong",[t._v(t._s(e.author.username))]),t._v(" "),a("small",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.formatDate(e.created),expression:"formatDate(c.created)"}]},[t._v(t._s(t.formatDateSince(e.created)))]),+new Date(e.created)!==+new Date(e.updated)?a("small",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.formatDate(e.updated),expression:"formatDate(c.updated)"}]},[t._v(" · edited "+t._s(t.formatDateSince(e.updated)))]):t._e()]),a("editor",{attrs:{"has-preview":!0,"upload-enabled":!0,"upload-callback":t.attachmentUpload,"is-edit-enabled":t.canWrite},on:{change:function(){t.toggleEdit(e),t.editComment()}},model:{value:e.comment,callback:function(a){t.$set(e,"comment",a)},expression:"c.comment"}}),t.canWrite?a("div",{staticClass:"comment-actions"},[a("a",{on:{click:function(a){return t.toggleDelete(e.id)}}},[t._v("Remove")])]):t._e()],1)])})),t.canWrite?a("div",{staticClass:"media comment"},[a("figure",{staticClass:"media-left"},[a("img",{staticClass:"image is-avatar",attrs:{src:t.userAvatar,alt:"",width:"48",height:"48"}})]),a("div",{staticClass:"media-content"},[a("div",{staticClass:"form"},[a("div",{staticClass:"field"},[t.editorActive?a("editor",{class:{"is-loading":t.taskCommentService.loading&&!t.isCommentEdit},attrs:{placeholder:"Add your comment...","has-preview":!1,"upload-enabled":!0,"upload-callback":t.attachmentUpload},model:{value:t.newComment.comment,callback:function(e){t.$set(t.newComment,"comment",e)},expression:"newComment.comment"}}):t._e()],1),a("div",{staticClass:"field"},[a("button",{staticClass:"button is-primary",class:{"is-loading":t.taskCommentService.loading&&!t.isCommentEdit},attrs:{disabled:""===t.newComment.comment},on:{click:function(e){return t.addComment()}}},[t._v("Comment ")])])])])]):t._e()],2),t.showDeleteModal?a("modal",{on:{close:function(e){t.showDeleteModal=!1},submit:function(e){return t.deleteComment()}}},[a("span",{attrs:{slot:"header"},slot:"header"},[t._v("Delete this comment")]),a("p",{attrs:{slot:"text"},slot:"text"},[t._v("Are you sure you want to delete this comment? "),a("br"),t._v("This "),a("b",[t._v("CANNOT BE UNDONE!")])])]):t._e()],1)},aa=[],sa=function(t){Object(ve["a"])(a,t);var e=Object(ke["a"])(a);function a(t){var s;return Object(me["a"])(this,a),s=e.call(this,t),s.author=new fe["a"](s.author),s.created=new Date(s.created),s.updated=new Date(s.updated),s}return Object(pe["a"])(a,[{key:"defaults",value:function(){return{id:0,taskId:0,comment:"",author:fe["a"],created:null,update:null}}}]),a}(Ne["a"]),na=function(t){Object(ve["a"])(a,t);var e=Object(ke["a"])(a);function a(){return Object(me["a"])(this,a),e.call(this,{create:"/tasks/{taskId}/comments",getAll:"/tasks/{taskId}/comments",get:"/tasks/{taskId}/comments/{id}",update:"/tasks/{taskId}/comments/{id}",delete:"/tasks/{taskId}/comments/{id}"})}return Object(pe["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(ge["a"])(t.created),t.updated=Object(ge["a"])(t.updated),t}},{key:"modelFactory",value:function(t){return new sa(t)}}]),a}(be["a"]),ia={methods:{attachmentUpload:function(t,e){var a=this,s=[t],n=new Ae["a"],i=new Se["a"]({taskId:this.taskId});n.create(i,s).then((function(t){null!==t.success&&t.success.forEach((function(t){a.$store.commit("attachments/add",t),a.$store.dispatch("tasks/addTaskAttachment",{taskId:a.taskId,attachment:t}),e("".concat(window.API_URL,"/tasks/").concat(a.taskId,"/attachments/").concat(t.id))})),null!==t.errors&&t.errors.forEach((function(t){a.error(t)}))})).catch((function(t){a.error(t,a)}))}}},ra={name:"comments",components:{editor:function(){return{component:a.e("editor").then(a.bind(null,"d593")),loading:ct["a"],error:lt["a"],timeout:6e4}}},mixins:[ia],props:{taskId:{type:Number,required:!0},canWrite:{default:!0}},data:function(){return{comments:[],showDeleteModal:!1,commentToDelete:sa,isCommentEdit:!1,commentEdit:sa,taskCommentService:na,newComment:sa,editorActive:!0}},created:function(){this.taskCommentService=new na,this.newComment=new sa({taskId:this.taskId}),this.commentEdit=new sa({taskId:this.taskId}),this.commentToDelete=new sa({taskId:this.taskId}),this.comments=[]},mounted:function(){this.loadComments()},watch:{taskId:function(){this.loadComments()}},computed:{userAvatar:function(){return this.$store.state.auth.info.getAvatarUrl(48)}},methods:{loadComments:function(){var t=this;this.taskCommentService.getAll({taskId:this.taskId}).then((function(e){t.$set(t,"comments",e)})).catch((function(e){t.error(e,t)}))},addComment:function(){var t=this;""!==this.newComment.comment&&(this.editorActive=!1,this.$nextTick((function(){return t.editorActive=!0})),this.taskCommentService.create(this.newComment).then((function(e){t.comments.push(e),t.newComment.comment=""})).catch((function(e){t.error(e,t)})))},toggleEdit:function(t){this.isCommentEdit=!this.isCommentEdit,this.commentEdit=t},toggleDelete:function(t){this.showDeleteModal=!this.showDeleteModal,this.commentToDelete.id=t},editComment:function(){var t=this;""!==this.commentEdit.comment&&(this.commentEdit.taskId=this.taskId,this.taskCommentService.update(this.commentEdit).then((function(e){for(var a in t.comments)t.comments[a].id===t.commentEdit.id&&t.$set(t.comments,a,e)})).catch((function(e){t.error(e,t)})).finally((function(){t.isCommentEdit=!1})))},deleteComment:function(){var t=this;this.taskCommentService.delete(this.commentToDelete).then((function(){for(var e in t.comments)t.comments[e].id===t.commentToDelete.id&&t.comments.splice(e,1)})).catch((function(e){t.error(e,t)})).finally((function(){t.showDeleteModal=!1}))}}},oa=ra,ca=Object(g["a"])(oa,ea,aa,!1,null,null,null),la=ca.exports,ua=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"control is-expanded",attrs:{options:t.foundLists,multiple:!1,searchable:!0,loading:t.listSerivce.loading,"internal-search":!0,placeholder:"Type to search for a list...",label:"title","track-by":"id",showNoOptions:!1},on:{"search-change":t.findLists,select:t.select},scopedSlots:t._u([{key:"clear",fn:function(e){return[null!==t.list&&0!==t.list.id?a("div",{staticClass:"multiselect__clear",on:{mousedown:function(a){return a.preventDefault(),a.stopPropagation(),t.clearAll(e.search)}}}):t._e()]}},{key:"option",fn:function(e){return[a("span",{staticClass:"list-namespace-title"},[t._v(t._s(t.namespace(e.option.namespaceId))+" >")]),t._v(" "+t._s(e.option.title)+" ")]}}]),model:{value:t.list,callback:function(e){t.list=e},expression:"list"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("No list found. Consider changing the search query.")])])},da=[],ha=a("8ac1"),fa=a("4cef"),ma={name:"listSearch",data:function(){return{listSerivce:ha["a"],list:fa["a"],foundLists:[]}},components:{multiselect:function(){return{component:a.e("multiselect").then(a.t.bind(null,"8e5f",7)),loading:ct["a"],error:lt["a"],timeout:6e4}}},beforeMount:function(){this.listSerivce=new ha["a"],this.list=new fa["a"]},methods:{findLists:function(t){var e=this;""!==t?this.listSerivce.getAll({},{s:t}).then((function(t){e.$set(e,"foundLists",t)})).catch((function(t){e.error(t,e)})):this.clearAll()},clearAll:function(){this.$set(this,"foundLists",[])},select:function(t){this.$emit("selected",t)},namespace:function(t){var e=this.$store.getters["namespaces/getNamespaceById"](t);return null!==e?e.title:"Shared Lists"}}},pa=ma,va=Object(g["a"])(pa,ua,da,!1,null,null,null),ka=va.exports,ba=a("818c"),ga={name:"TaskDetailView",components:{ColorPicker:ba["a"],ListSearch:ka,Reminders:ta,RepeatAfter:ze,RelatedTasks:We,Attachments:Ee,EditAssignees:Te,EditLabels:ue,PercentDoneSelect:te,PrioritySelect:zt,Comments:la,flatPickr:F.a,editor:function(){return{component:a.e("editor").then(a.bind(null,"d593")),loading:ct["a"],error:lt["a"],timeout:6e4}}},mixins:[ia],data:function(){return{taskId:Number(this.$route.params.id),taskService:u["a"],task:f["a"],relationKinds:Mt,dueDate:null,taskColor:"",showDeleteModal:!1,taskTitle:"",descriptionChanged:!1,listViewName:"list.list",priorities:v,flatPickerConfig:{altFormat:"j M Y H:i",altInput:!0,dateFormat:"Y-m-d H:i",enableTime:!0,time_24hr:!0},activeFields:{assignees:!1,priority:!1,dueDate:!1,percentDone:!1,startDate:!1,endDate:!1,reminders:!1,repeatAfter:!1,labels:!1,attachments:!1,relatedTasks:!1,moveList:!1,color:!1}}},watch:{$route:"loadTask"},created:function(){this.taskService=new u["a"],this.task=new f["a"]},mounted:function(){var t=this.$route.name.split(".");t.length>2&&"detail"===t[2]&&(this.listViewName="list.".concat(t[1])),this.loadTask()},computed:{parent:function(){return this.task.listId?this.$store.getters["namespaces/getListAndNamespaceById"]?this.$store.getters["namespaces/getListAndNamespaceById"](this.task.listId):null:{namespace:null,list:null}},canWrite:function(){return this.task&&this.task.maxRight&&this.task.maxRight>Wt.READ}},methods:{loadTask:function(){var t=this;this.taskId=Number(this.$route.params.id),this.taskService.get({id:this.taskId}).then((function(e){t.$set(t,"task",e),t.$store.commit("attachments/set",e.attachments),t.taskTitle=t.task.title,t.taskColor=t.task.hexColor,t.setActiveFields(),t.setTitle(t.task.title)})).catch((function(e){t.error(e,t)}))},setActiveFields:function(){this.dueDate=this.task.dueDate?this.task.dueDate:null,this.task.startDate=this.task.startDate?this.task.startDate:null,this.task.endDate=this.task.endDate?this.task.endDate:null,this.activeFields.assignees=this.task.assignees.length>0,this.activeFields.priority=this.task.priority!==v.UNSET,this.activeFields.dueDate=null!==this.task.dueDate,this.activeFields.percentDone=this.task.percentDone>0,this.activeFields.startDate=null!==this.task.startDate,this.activeFields.endDate=null!==this.task.endDate,this.activeFields.reminders=this.task.reminderDates.length>1||window.innerWidth<769&&this.task.reminderDates.length>0,this.activeFields.repeatAfter=this.task.repeatAfter.amount>0,this.activeFields.labels=this.task.labels.length>0,this.activeFields.attachments=this.task.attachments.length>0,this.activeFields.relatedTasks=Object.keys(this.task.relatedTasks).length>0},saveTaskOnChange:function(){this.$refs.taskTitle.spellcheck=!1;var t=this.$refs.taskTitle.textContent;this.task.title=t,this.task.title!==this.taskTitle&&(this.saveTask(),this.taskTitle=t)},saveTask:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.canWrite&&(this.task.dueDate=this.dueDate,this.task.hexColor=this.taskColor,null===this.task.endDate&&null!==this.task.startDate&&null!==this.task.dueDate&&(this.task.endDate=this.task.dueDate),this.$store.dispatch("tasks/update",this.task).then((function(a){t.$set(t,"task",a);var s=[];null!==e&&(s=[{title:"Undo",callback:e}],t.success({message:"The task was saved successfully."},t,s)),t.dueDate=t.task.dueDate,t.setActiveFields()})).catch((function(e){t.error(e,t)})))},setFieldActive:function(t){var e=this;this.activeFields[t]=!0,this.$nextTick((function(){e.$refs[t]&&e.$refs[t].$el.focus()}))},deleteTask:function(){var t=this;this.$store.dispatch("tasks/delete",this.task).then((function(){t.success({message:"The task been deleted successfully."},t),Mn.back()})).catch((function(e){t.error(e,t)}))},toggleTaskDone:function(){var t=this;this.task.done=!this.task.done,this.saveTask((function(){return t.toggleTaskDone()}))},setDescriptionChanged:function(t){"Enter"!==t.key&&"Control"!==t.key&&(this.descriptionChanged=!0)},saveTaskIfDescriptionChanged:function(){this.descriptionChanged&&(this.descriptionChanged=!1,this.saveTask())},changeList:function(t){this.task.listId=t.id,this.saveTask()}}},Ca=ga,_a=Object(g["a"])(Ca,Rt,Ut,!1,null,null,null),ya=_a.exports,wa={name:"TaskDetailViewModal",components:{TaskDetailView:ya},methods:{close:function(){Mn.back()}}},Da=wa,Ta=Object(g["a"])(Da,Bt,Ft,!1,null,null,null),xa=Ta.exports,Ia=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content namespaces-list"},[a("router-link",{staticClass:"button is-success new-namespace",attrs:{to:{name:"namespace.create"}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"plus"}})],1),t._v(" Create new namespace ")]),a("fancycheckbox",{staticClass:"show-archived-check",model:{value:t.showArchived,callback:function(e){t.showArchived=e},expression:"showArchived"}},[t._v(" Show Archived ")]),t._l(t.namespaces,(function(e){return a("div",{key:"n"+e.id,staticClass:"namespace"},[a("h1",[a("span",[t._v(t._s(e.title))]),e.isArchived?a("span",{staticClass:"is-archived"},[t._v(" Archived ")]):t._e()]),a("div",{staticClass:"lists"},[t._l(e.lists,(function(e){return[t.showArchived||!e.isArchived?a("router-link",{key:"l"+e.id,staticClass:"list",class:{"has-light-text":!t.colorIsDark(e.hexColor),"has-background":"undefined"!==typeof t.backgrounds[e.id]},style:{"background-color":e.hexColor,"background-image":"undefined"!==typeof t.backgrounds[e.id]&&"url("+t.backgrounds[e.id]+")"},attrs:{to:{name:"list.index",params:{listId:e.id}}}},[a("div",{staticClass:"is-archived-container"},[e.isArchived?a("span",{staticClass:"is-archived"},[t._v(" Archived ")]):t._e()]),a("div",{staticClass:"title"},[t._v(t._s(e.title))])]):t._e()]}))],2)])}))],2)},Aa=[],Sa={name:"ListNamespaces",components:{Fancycheckbox:L["a"]},data:function(){return{showArchived:!1,backgrounds:{}}},created:function(){this.loadBackgroundsForLists()},mounted:function(){this.setTitle("Namespaces & Lists")},computed:Object(o["b"])({namespaces:function(t){var e=this;return t.namespaces.namespaces.filter((function(t){return!!e.showArchived||!t.isArchived}))}}),methods:{loadBackgroundsForLists:function(){var t=this,e=new ha["a"];this.namespaces.forEach((function(a){a.lists.forEach((function(a){a.backgroundInformation&&e.background(a).then((function(e){t.$set(t.backgrounds,a.id,e)})).catch((function(e){t.error(e,t)}))}))}))}}},$a=Sa,Oa=Object(g["a"])($a,Ia,Aa,!1,null,null,null),ja=Oa.exports,Ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content loader-container is-max-width-desktop",class:{"is-loading":t.teamService.loading}},[a("router-link",{staticClass:"button is-success button-right",attrs:{to:{name:"teams.create"}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"plus"}})],1),t._v(" New Team ")]),a("h1",[t._v("Teams")]),a("ul",{staticClass:"teams box"},t._l(t.teams,(function(e){return a("li",{key:e.id},[a("router-link",{attrs:{to:{name:"teams.edit",params:{id:e.id}}}},[t._v(" "+t._s(e.name)+" ")])],1)})),0)],1)},La=[],Pa=a("0eb6"),Na={name:"ListTeams",data:function(){return{teamService:Pa["a"],teams:[]}},created:function(){this.teamService=new Pa["a"],this.loadTeams()},mounted:function(){this.setTitle("Teams")},methods:{loadTeams:function(){var t=this;this.teamService.getAll().then((function(e){t.$set(t,"teams",e)})).catch((function(e){t.error(e,t)}))}}},Ba=Na,Fa=Object(g["a"])(Ba,Ea,La,!1,null,null,null),Ra=Fa.exports,Ua=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loader-container content",class:{"is-loading":t.labelService.loading}},[a("h1",[t._v("Manage labels")]),a("p",[t._v(" Click on a label to edit it. You can edit all labels you created, you can use all labels which are associated with a task to whose list you have access. ")]),a("div",{staticClass:"columns"},[a("div",{staticClass:"labels-list column"},t._l(t.labels,(function(e){return a("span",{key:e.id,staticClass:"tag",class:{disabled:t.userInfo.id!==e.createdBy.id},style:{background:e.hexColor,color:e.textColor}},[t.userInfo.id!==e.createdBy.id?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"You are not allowed to edit this label because you dont own it.",expression:"'You are not allowed to edit this label because you dont own it.'",modifiers:{bottom:!0}}]},[t._v(" "+t._s(e.title)+" ")]):a("a",{style:{color:e.textColor},on:{click:function(a){return t.editLabel(e)}}},[t._v(" "+t._s(e.title)+" ")]),t.userInfo.id===e.createdBy.id?a("a",{staticClass:"delete is-small",on:{click:function(a){return t.deleteLabel(e)}}}):t._e()])})),0),t.isLabelEdit?a("div",{staticClass:"column is-4"},[a("div",{staticClass:"card"},[a("header",{staticClass:"card-header"},[a("span",{staticClass:"card-header-title"},[t._v(" Edit Label ")]),a("a",{staticClass:"card-header-icon",on:{click:function(e){t.isLabelEdit=!1}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"times"}})],1)])]),a("div",{staticClass:"card-content"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.editLabelSubmit()}}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Title")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.labelEditLabel.title,expression:"labelEditLabel.title"}],staticClass:"input",attrs:{type:"text",placeholder:"Label title"},domProps:{value:t.labelEditLabel.title},on:{input:function(e){e.target.composing||t.$set(t.labelEditLabel,"title",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Description")]),a("div",{staticClass:"control"},[t.editorActive?a("editor",{attrs:{placeholder:"Label description","preview-is-default":!1},model:{value:t.labelEditLabel.description,callback:function(e){t.$set(t.labelEditLabel,"description",e)},expression:"labelEditLabel.description"}}):t._e()],1)]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Color")]),a("div",{staticClass:"control"},[a("color-picker",{model:{value:t.labelEditLabel.hexColor,callback:function(e){t.$set(t.labelEditLabel,"hexColor",e)},expression:"labelEditLabel.hexColor"}})],1)]),a("div",{staticClass:"field has-addons"},[a("div",{staticClass:"control is-expanded"},[a("button",{staticClass:"button is-fullwidth is-primary",class:{"is-loading":t.labelService.loading},attrs:{type:"submit"}},[t._v(" Save ")])]),a("div",{staticClass:"control"},[a("a",{staticClass:"button has-icon is-danger",on:{click:function(){t.deleteLabel(t.labelEditLabel),t.isLabelEdit=!1}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"trash-alt"}})],1)])])])])])])]):t._e()])])},Ma=[],Wa={name:"ListLabels",components:{ColorPicker:ba["a"],editor:function(){return{component:a.e("editor").then(a.bind(null,"d593")),loading:ct["a"],error:lt["a"],timeout:6e4}}},data:function(){return{labelService:ne["a"],labels:[],labelEditLabel:ie["a"],isLabelEdit:!1,editorActive:!1}},created:function(){this.labelService=new ne["a"],this.labelEditLabel=new ie["a"],this.loadLabels()},mounted:function(){this.setTitle("Labels")},computed:Object(o["b"])({userInfo:function(t){return t.auth.info}}),methods:{loadLabels:function(){var t=this,e=function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return t.labelService.getAll({},{},a).then((function(s){return a<t.labelService.totalPages?e(a+1).then((function(t){return s.concat(t)})):s})).catch((function(t){return Promise.reject(t)}))};e().then((function(e){t.$set(t,"labels",e)})).catch((function(e){t.error(e,t)}))},deleteLabel:function(t){var e=this;this.labelService.delete(t).then((function(){for(var a in e.labels)e.labels[a].id===t.id&&e.labels.splice(a,1);e.success({message:"The label was successfully deleted."},e)})).catch((function(t){e.error(t,e)}))},editLabelSubmit:function(){var t=this;this.labelService.update(this.labelEditLabel).then((function(e){for(var a in t.labels)t.labels[a].id===e.id&&t.$set(t.labels,a,e);t.success({message:"The label was successfully updated."},t)})).catch((function(e){t.error(e,t)}))},editLabel:function(t){var e=this;t.createdBy.id===this.userInfo.id&&(this.labelEditLabel=t,this.isLabelEdit=!0,this.editorActive=!1,this.$nextTick((function(){return e.editorActive=!0})))}}},qa=Wa,Ha=Object(g["a"])(qa,Ua,Ma,!1,null,null,null),Ga=Ha.exports,Va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("h1",[t._v("Import your data from other services to Vikunja")]),a("p",[t._v("Click on the logo of one of the third-party services below to get started.")]),a("div",{staticClass:"migration-services-overview"},t._l(t.availableMigrators,(function(e){return a("router-link",{key:e,attrs:{to:{name:"migrate.service",params:{service:e}}}},[a("img",{attrs:{src:"/images/migration/"+e+".png",alt:e}}),t._v(" "+t._s(e)+" ")])})),1)])},Ka=[],za={name:"migrate.service",mounted:function(){this.setTitle("Import your data to Vikunja")},computed:{availableMigrators:function(){return this.$store.state.config.availableMigrators}}},Ya=za,Ja=Object(g["a"])(Ya,Va,Ka,!1,null,null,null),Qa=Ja.exports,Xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("migration",{attrs:{identifier:t.identifier,name:t.name}})},Za=[],ts=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("h1",[t._v("Import your data from "+t._s(t.name)+" to Vikunja")]),a("p",[t._v("Vikunja will import all lists, tasks, notes, reminders and files you have access to.")]),!1===t.isMigrating&&""===t.message&&null===t.lastMigrationDate?[a("p",[t._v("To authorize Vikunja to access your "+t._s(t.name)+" Account, click the button below.")]),a("a",{staticClass:"button is-primary",class:{"is-loading":t.migrationService.loading},attrs:{href:t.authUrl,disabled:t.migrationService.loading}},[t._v(" Get Started ")])]:!0===t.isMigrating&&""===t.message&&null===t.lastMigrationDate?a("div",{staticClass:"migration-in-progress-container"},[a("div",{staticClass:"migration-in-progress"},[a("img",{attrs:{src:"/images/migration/"+t.identifier+".png",alt:t.name}}),t._m(0),a("img",{attrs:{src:"/images/logo.svg",alt:"Vikunja"}})]),a("p",[t._v("Importing in progress, hang tight...")])]):t.lastMigrationDate?a("div",[a("p",[t._v(" It looks like you've already imported your stuff from "+t._s(t.name)+" at "+t._s(t.formatDate(t.lastMigrationDate))+"."),a("br"),t._v(" Importing again is possible, but might create duplicates. Are you sure? ")]),a("div",{staticClass:"buttons"},[a("button",{staticClass:"button is-primary",on:{click:t.migrate}},[t._v("I am sure, please start migrating now!")]),a("router-link",{staticClass:"button is-danger is-outlined",attrs:{to:{name:"home"}}},[t._v("Cancel")])],1)]):a("div",[a("div",{staticClass:"message is-primary"},[a("div",{staticClass:"message-body"},[t._v(" "+t._s(t.message)+" ")])]),a("router-link",{staticClass:"button is-primary",attrs:{to:{name:"home"}}},[t._v("Refresh")])],1)],2)},es=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"progress-dots"},[a("span"),a("span"),a("span"),a("span"),a("span"),a("span"),a("span"),a("span")])}],as=a("2c4c"),ss=a("fc11"),ns=function(t){Object(ve["a"])(a,t);var e=Object(ke["a"])(a);function a(t){var s;return Object(me["a"])(this,a),s=e.call(this,{update:"/migration/"+t+"/migrate"}),Object(ss["a"])(Object(as["a"])(s),"serviceUrlKey",""),s.serviceUrlKey=t,s}return Object(pe["a"])(a,[{key:"getAuthUrl",value:function(){return this.getM("/migration/"+this.serviceUrlKey+"/auth")}},{key:"getStatus",value:function(){return this.getM("/migration/"+this.serviceUrlKey+"/status")}},{key:"migrate",value:function(t){return this.update(t)}}]),a}(be["a"]),is={name:"migration",data:function(){return{authUrl:"",isMigrating:!1,lastMigrationDate:null,message:"",wunderlistCode:""}},props:{name:{type:String,required:!0},identifier:{type:String,required:!0}},created:function(){var t=this;this.migrationService=new ns(this.identifier),this.getAuthUrl(),this.message="","undefined"!==typeof this.$route.query.code&&(this.wunderlistCode=this.$route.query.code,this.migrationService.getStatus().then((function(e){e.time?t.lastMigrationDate=new Date(e.time):t.migrate()})).catch((function(e){t.error(e,t)})))},methods:{getAuthUrl:function(){var t=this;this.migrationService.getAuthUrl().then((function(e){t.authUrl=e.url})).catch((function(e){t.error(e,t)}))},migrate:function(){var t=this;this.isMigrating=!0,this.lastMigrationDate=0,this.migrationService.migrate({code:this.wunderlistCode}).then((function(e){t.message=e.message})).catch((function(e){t.error(e,t)})).finally((function(){t.isMigrating=!1}))}}},rs=is,os=Object(g["a"])(rs,ts,es,!1,null,null,null),cs=os.exports,ls={name:"migrateService",components:{Migration:cs},data:function(){return{name:"",identifier:""}},mounted:function(){this.setTitle("Import your data from ".concat(this.name," into Vikunja"))},created:function(){switch(this.$route.params.service){case"wunderlist":this.name="Wunderlist",this.identifier="wunderlist";break;case"todoist":this.name="Todoist",this.identifier="todoist";break;default:Mn.push({name:"404"})}}},us=ls,ds=Object(g["a"])(us,Xa,Za,!1,null,null,null),hs=ds.exports,fs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loader-container",class:{"is-loading":t.listService.loading}},[a("div",{staticClass:"switch-view"},[a("router-link",{class:{"is-active":"list.list"===t.$route.name},attrs:{to:{name:"list.list",params:{listId:t.listId}}}},[t._v(" List ")]),a("router-link",{class:{"is-active":"list.gantt"===t.$route.name},attrs:{to:{name:"list.gantt",params:{listId:t.listId}}}},[t._v(" Gantt ")]),a("router-link",{class:{"is-active":"list.table"===t.$route.name},attrs:{to:{name:"list.table",params:{listId:t.listId}}}},[t._v(" Table ")]),a("router-link",{class:{"is-active":"list.kanban"===t.$route.name},attrs:{to:{name:"list.kanban",params:{listId:t.listId}}}},[t._v(" Kanban ")])],1),t.list.isArchived?a("div",{staticClass:"notification is-warning"},[t._v(" This list is archived. It is not possible to create new or edit tasks or it. ")]):t._e(),a("router-view")],1)},ms=[],ps=(a("5319"),a("2ca0"),function(t,e){var a=localStorage.getItem("listView"),s=!1;null!==a&&(s=JSON.parse(a));var n={};s&&(n=s),n[t]=e,localStorage.setItem("listView",JSON.stringify(n))}),vs=function(t){var e=localStorage.getItem("listView");if(null!==e&&e.startsWith("list.")&&localStorage.removeItem("listView"),!e)return"list.list";var a=JSON.parse(e);return a[t]?a[t]:"list.list"},ks={data:function(){return{listService:ha["a"],list:fa["a"],listLoaded:0}},created:function(){this.listService=new ha["a"],this.list=new fa["a"]},mounted:function(){this.loadList()},watch:{"$route.path":"loadList"},computed:{listId:function(){return"undefined"===typeof this.$route.params.listId?0:this.$route.params.listId},background:function(){return this.$store.state.background},currentList:function(){return"undefined"===typeof this.$store.state.currentList?{id:0,title:""}:this.$store.state.currentList}},methods:{replaceListView:function(){var t=vs(this.$route.params.listId);Mn.replace({name:t,params:{id:this.$route.params.listId}}),console.debug("Replaced list view with ",t)},loadList:function(){var t=this;if(this.setTitle(this.currentList.title),"list.list"!==this.$route.name&&"list.gantt"!==this.$route.name||this.$store.commit("kanban/setListId",0),"list.index"===this.$route.name)return this.replaceListView();if(this.$route.params.listId!==this.listLoaded&&"undefined"!==typeof this.$route.params.listId&&this.$route.params.listId!==this.currentList.id&&parseInt(this.$route.params.listId)!==this.currentList.id){if("list.list"!==this.$route.name&&"list.gantt"!==this.$route.name&&"list.table"!==this.$route.name&&"list.kanban"!==this.$route.name)return this.replaceListView();console.debug("Loading list, $route.name = ".concat(this.$route.name,", $route.params ="),this.$route.params,", listLoaded = ".concat(this.listLoaded,", currentList = "),this.currentList);var e=new fa["a"]({id:this.$route.params.listId});this.listService.get(e).then((function(e){t.$set(t,"list",e),t.$store.commit(K["b"],e)})).catch((function(e){t.error(e,t)})).finally((function(){t.listLoaded=t.$route.params.listId}))}}}},bs=ks,gs=Object(g["a"])(bs,fs,ms,!1,null,null,null),Cs=gs.exports,_s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"kanban loader-container",class:{"is-loading":t.loading}},[t._l(t.buckets,(function(e){return a("div",{key:"bucket"+e.id,staticClass:"bucket"},[a("div",{staticClass:"bucket-header"},[a("h2",{ref:"bucket"+e.id+"title",refInFor:!0,staticClass:"title input",attrs:{contenteditable:"true",spellcheck:"false"},on:{focusout:function(){return t.saveBucketTitle(e.id)},keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:a.ctrlKey?function(){return t.saveBucketTitle(e.id)}():null}}},[t._v(t._s(e.title))]),t.canWrite?a("div",{staticClass:"dropdown is-right options",class:{"is-active":t.bucketOptionsDropDownActive[e.id]}},[a("div",{staticClass:"dropdown-trigger",on:{click:function(a){return a.stopPropagation(),t.toggleBucketDropdown(e.id)}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"ellipsis-v"}})],1)]),a("div",{staticClass:"dropdown-menu",attrs:{role:"menu"}},[a("div",{staticClass:"dropdown-content"},[a("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.buckets.length<=1?"You cannot remove the last bucket.":"",expression:"buckets.length <= 1 ? 'You cannot remove the last bucket.' : ''"}],staticClass:"dropdown-item has-text-danger",class:{"is-disabled":t.buckets.length<=1},on:{click:function(){return t.deleteBucketModal(e.id)}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"trash-alt"}})],1),t._v(" Delete ")])])])]):t._e()]),a("div",{ref:"tasks-container"+e.id,refInFor:!0,staticClass:"tasks"},[a(t.canWrite?"Container":"div",{tag:"component",attrs:{"group-name":"buckets","get-child-payload":t.getTaskPayload(e.id),"drop-placeholder":t.dropPlaceholderOptions,"animation-duration":150,"drag-class":"ghost-task","drag-class-drop":"ghost-task-drop","drag-handle-selector":".task.draggable"},on:{drop:function(a){return t.onDrop(e.id,a)}}},t._l(e.tasks,(function(s){return a(t.canWrite?"Draggable":"div",{key:"bucket"+e.id+"-task"+s.id,tag:"component"},[a("div",{staticClass:"task loader-container draggable",class:{"is-loading":t.taskService.loading&&t.taskUpdating[s.id],draggable:!t.taskService.loading||!t.taskUpdating[s.id],"has-light-text":!t.colorIsDark(s.hexColor)&&s.hexColor!=="#"+s.defaultColor},style:{"background-color":"#"!==s.hexColor&&s.hexColor!=="#"+s.defaultColor&&s.hexColor},on:{click:[function(e){return e.ctrlKey?function(){return t.markTaskAsDone(s)}():null},function(e){return e.metaKey?function(){return t.markTaskAsDone(s)}():null},function(e){return e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:function(){return t.$router.push({name:"task.kanban.detail",params:{id:s.id}})}()}]}},[a("span",{staticClass:"task-id"},[s.done?a("span",{staticClass:"is-done"},[t._v("Done")]):t._e(),""===s.identifier?[t._v(" #"+t._s(s.index)+" ")]:[t._v(" "+t._s(s.identifier)+" ")]],2),s.dueDate>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.formatDate(s.dueDate),expression:"formatDate(task.dueDate)"}],staticClass:"due-date",class:{overdue:s.dueDate<=new Date&&!s.done}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:["far","calendar-alt"]}})],1),a("span",[t._v(" "+t._s(t.formatDateSince(s.dueDate))+" ")])]):t._e(),a("h3",[t._v(t._s(s.title))]),a("labels",{attrs:{labels:s.labels}}),a("div",{staticClass:"footer"},[a("div",{staticClass:"items"},[a("priority-label",{staticClass:"priority-label",attrs:{priority:s.priority}}),s.assignees.length>0?a("div",{staticClass:"assignees"},t._l(s.assignees,(function(t){return a("user",{key:s.id+"assignee"+t.id,attrs:{user:t,"show-username":!1,"avatar-size":24}})})),1):t._e()],1),a("div",[s.attachments.length>0?a("span",{staticClass:"icon"},[a("svg",{attrs:{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("rect",{attrs:{fill:"none",rx:"0",ry:"0"}}),a("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.86 8.29994C19.8823 8.27664 19.9026 8.25201 19.9207 8.22634C20.5666 7.53541 20.93 6.63567 20.93 5.68001C20.93 4.69001 20.55 3.76001 19.85 3.06001C18.45 1.66001 16.02 1.66001 14.62 3.06001L9.88002 7.80001C9.86705 7.81355 9.85481 7.82753 9.8433 7.8419L4.58 13.1C3.6 14.09 3.06 15.39 3.06 16.78C3.06 18.17 3.6 19.48 4.58 20.46C5.6 21.47 6.93 21.98 8.26 21.98C9.59 21.98 10.92 21.47 11.94 20.46L17.74 14.66C17.97 14.42 17.98 14.04 17.74 13.81C17.5 13.58 17.12 13.58 16.89 13.81L11.09 19.61C10.33 20.36 9.33 20.78 8.26 20.78C7.19 20.78 6.19 20.37 5.43 19.61C4.68 18.85 4.26 17.85 4.26 16.78C4.26 15.72 4.68 14.71 5.43 13.96L15.47 3.91996C15.4962 3.89262 15.5195 3.86346 15.54 3.83292C16.4992 2.95103 18.0927 2.98269 19.01 3.90001C19.48 4.37001 19.74 5.00001 19.74 5.67001C19.74 6.34001 19.48 6.97001 19.01 7.44001L14.27 12.18C14.2571 12.1935 14.2448 12.2075 14.2334 12.2218L8.96 17.4899C8.59 17.8699 7.93 17.8699 7.55 17.4899C7.36 17.2999 7.26 17.0399 7.26 16.7799C7.26 16.5199 7.36 16.2699 7.55 16.0699L15.47 8.14994C15.7 7.90994 15.71 7.52994 15.47 7.29994C15.23 7.06994 14.85 7.06994 14.62 7.29994L6.7 15.2199C6.29 15.6399 6.06 16.1899 6.06 16.7799C6.06 17.3699 6.29 17.9199 6.7 18.3399C7.12 18.7499 7.67 18.9799 8.26 18.9799C8.85 18.9799 9.4 18.7599 9.82 18.3399L19.86 8.29994Z"}})])]):t._e()])])],1)])})),1)],1),t.canWrite?a("div",{staticClass:"bucket-footer"},[t.showNewTaskInput[e.id]?a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"focus",rawName:"v-focus.always",modifiers:{always:!0}},{name:"model",rawName:"v-model",value:t.newTaskText,expression:"newTaskText"}],staticClass:"input",class:{"is-loading":t.taskService.loading},attrs:{type:"text",placeholder:"Enter the new task text...",disabled:t.taskService.loading},domProps:{value:t.newTaskText},on:{focusout:function(a){return t.toggleShowNewTaskInput(e.id)},keyup:[function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"esc",27,a.key,["Esc","Escape"])?null:t.toggleShowNewTaskInput(e.id)},function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.addTaskToBucket(e.id)}],input:function(e){e.target.composing||(t.newTaskText=e.target.value)}}})]),t.newTaskError[e.id]&&""===t.newTaskText?a("p",{staticClass:"help is-danger"},[t._v(" Please specify a title. ")]):t._e()]):t._e(),t.showNewTaskInput[e.id]?t._e():a("a",{staticClass:"button noshadow is-transparent is-fullwidth has-text-centered",on:{click:function(a){return t.toggleShowNewTaskInput(e.id)}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"plus"}})],1),0===e.tasks.length?a("span",[t._v(" Add a task ")]):a("span",[t._v(" Add another task ")])])]):t._e()])})),!t.loading&&t.canWrite?a("div",{staticClass:"bucket new-bucket"},[t.showNewBucketInput?a("input",{directives:[{name:"focus",rawName:"v-focus.always",modifiers:{always:!0}},{name:"model",rawName:"v-model",value:t.newBucketTitle,expression:"newBucketTitle"}],staticClass:"input",class:{"is-loading":t.loading},attrs:{type:"text",placeholder:"Enter the new bucket title...",disabled:t.loading},domProps:{value:t.newBucketTitle},on:{focusout:function(){return t.showNewBucketInput=!1},keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:function(){return t.showNewBucketInput=!1}()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createNewBucket(e)}],input:function(e){e.target.composing||(t.newBucketTitle=e.target.value)}}}):t._e(),t.showNewBucketInput?t._e():a("a",{staticClass:"button noshadow is-transparent is-fullwidth has-text-centered",on:{click:function(){return t.showNewBucketInput=!0}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"plus"}})],1),a("span",[t._v(" Create a new bucket ")])])]):t._e(),a("transition",{attrs:{name:"modal"}},[a("router-view")],1),t.showBucketDeleteModal?a("modal",{on:{close:function(e){t.showBucketDeleteModal=!1},submit:function(e){return t.deleteBucket()}}},[a("span",{attrs:{slot:"header"},slot:"header"},[t._v("Delete the bucket")]),a("p",{attrs:{slot:"text"},slot:"text"},[t._v(" Are you sure you want to delete this bucket?"),a("br"),t._v(" This will not delete any tasks but move them into the default bucket. ")])]):t._e()],2)},ys=[],ws=a("c4c1"),Ds=a("3f7d"),Ts=a("cf42"),xs=a("d0ff"),Is=function(t,e){var a=e.removedIndex,s=e.addedIndex,n=e.payload;if(null===a&&null===s)return t;var i=Object(xs["a"])(t),r=n;return null!==a&&(r=i.splice(a,1)[0]),null!==s&&i.splice(s,0,r),i},As={name:"Kanban",components:{Container:Ds["Container"],Draggable:Ds["Draggable"],Labels:I,User:E,PriorityLabel:_},data:function(){return{taskService:u["a"],dropPlaceholderOptions:{className:"drop-preview",animationDuration:150,showOnTop:!0},bucketOptionsDropDownActive:{},showBucketDeleteModal:!1,bucketToDelete:0,newTaskText:"",showNewTaskInput:{},newBucketTitle:"",showNewBucketInput:!1,newTaskError:{},taskUpdating:{}}},created:function(){var t=this;this.taskService=new u["a"],this.loadBuckets(),this.$nextTick((function(){return document.addEventListener("click",t.closeBucketDropdowns)})),ps(this.$route.params.listId,this.$route.name)},watch:{"$route.params.listId":"loadBuckets"},computed:Object(o["b"])({buckets:function(t){return t.kanban.buckets},loadedListId:function(t){return t.kanban.listId},loading:K["f"],canWrite:function(t){return t.currentList.maxRight>Wt.READ}}),methods:{loadBuckets:function(){var t=this;"list.kanban"===this.$route.name&&this.loadedListId!==this.$route.params.listId&&this.loadedListId!==parseInt(this.$route.params.listId)&&(console.debug("Loading buckets, loadedListId = ".concat(this.loadedListId,", $route.params ="),this.$route.params),this.$store.dispatch("kanban/loadBucketsForList",this.$route.params.listId).catch((function(e){t.error(e,t)})))},onDrop:function(t,e){var a=this,s=Object(Ts["a"])(this.buckets,(function(e){return e.id===t}));if(null!==e.removedIndex||null!==e.addedIndex){var n=Object.assign({},this.buckets),i=n[s];i.tasks=Is(i.tasks,e),delete n[s],n[s]=i}if(null!==e.addedIndex){var r=e.addedIndex,o="undefined"===typeof this.buckets[s].tasks[r-1]?null:this.buckets[s].tasks[r-1],c="undefined"===typeof this.buckets[s].tasks[r+1]?null:this.buckets[s].tasks[r+1],l=this.buckets[s].tasks[r];this.$set(this.taskUpdating,l.id,!0),null===o&&null!==c&&(l.position=c.position/2),null!==o&&null===c&&(l.position=o.position+Math.pow(2,16)),null!==c&&null!==o&&(l.position=o.position+(c.position-o.position)/2),l.bucketId=t,this.$store.dispatch("tasks/update",l).catch((function(t){a.error(t,a)})).finally((function(){a.$set(a.taskUpdating,l.id,!1)}))}},markTaskAsDone:function(t){var e=this;t.done=!t.done,this.$store.dispatch("tasks/update",t).catch((function(t){e.error(t,e)})).finally((function(){e.$set(e.taskUpdating,t.id,!1)}))},getTaskPayload:function(t){var e=this;return function(a){var s=e.buckets[Object(Ts["a"])(e.buckets,(function(e){return e.id===t}))];return s.tasks[a]}},toggleShowNewTaskInput:function(t){this.$set(this.showNewTaskInput,t,!this.showNewTaskInput[t])},toggleBucketDropdown:function(t){this.$set(this.bucketOptionsDropDownActive,t,!this.bucketOptionsDropDownActive[t])},closeBucketDropdowns:function(){for(var t in this.bucketOptionsDropDownActive)this.bucketOptionsDropDownActive[t]=!1},addTaskToBucket:function(t){var e=this;if(""!==this.newTaskText){this.$set(this.newTaskError,t,!1);var a=function(){for(var a in e.buckets)if(e.buckets[a].id===t)return a},s=a(),n=new f["a"]({title:this.newTaskText,bucketId:this.buckets[s].id,listId:this.$route.params.listId});this.taskService.create(n).then((function(t){e.newTaskText="",e.$store.commit("kanban/addTaskToBucket",t)})).catch((function(t){e.error(t,e)})).finally((function(){e.$refs["tasks-container".concat(n.bucketId)][0]&&(e.$refs["tasks-container".concat(n.bucketId)][0].scrollTop=e.$refs["tasks-container".concat(n.bucketId)][0].scrollHeight)}))}else this.$set(this.newTaskError,t,!0)},createNewBucket:function(){var t=this;if(""!==this.newBucketTitle){var e=new ws["a"]({title:this.newBucketTitle,listId:parseInt(this.$route.params.listId)});this.$store.dispatch("kanban/createBucket",e).then((function(){t.newBucketTitle="",t.showNewBucketInput=!1})).catch((function(e){t.error(e,t)}))}},deleteBucketModal:function(t){this.buckets.length<=1||(this.bucketToDelete=t,this.showBucketDeleteModal=!0)},deleteBucket:function(){var t=this,e=new ws["a"]({id:this.bucketToDelete,listId:this.$route.params.listId});this.$store.dispatch("kanban/deleteBucket",e).catch((function(e){t.error(e,t)})).finally((function(){t.showBucketDeleteModal=!1}))},saveBucketTitle:function(t){var e=this,a=this.$refs["bucket".concat(t,"title")][0].textContent,s=new ws["a"]({id:t,title:a,listId:Number(this.$route.params.listId)}),n=this.buckets[Object(Ts["a"])(this.buckets,(function(e){return e.id===t}))];n.title!==a&&this.$store.dispatch("kanban/updateBucket",s).then((function(t){n.title=t.title})).catch((function(t){e.error(t,e)}))}}},Ss=As,$s=Object(g["a"])(Ss,_s,ys,!1,null,null,null),Os=$s.exports,js=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loader-container is-max-width-desktop",class:{"is-loading":t.taskCollectionService.loading}},[a("div",{staticClass:"filter-container"},[a("div",{staticClass:"items"},[a("div",{staticClass:"search"},[a("div",{staticClass:"field has-addons",class:{hidden:!t.showTaskSearch}},[a("div",{staticClass:"control has-icons-left has-icons-right"},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],staticClass:"input",attrs:{type:"text",placeholder:"Search"},domProps:{value:t.searchTerm},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchTasks(e)},blur:function(e){return t.hideSearchBar()},input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}}),a("span",{staticClass:"icon is-left"},[a("icon",{attrs:{icon:"search"}})],1)]),a("div",{staticClass:"control"},[a("button",{staticClass:"button noshadow is-primary",class:{"is-loading":t.taskCollectionService.loading},on:{click:t.searchTasks}},[t._v(" Search ")])])]),t.showTaskSearch?t._e():a("button",{staticClass:"button",on:{click:function(e){t.showTaskSearch=!t.showTaskSearch}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"search"}})],1)])]),a("button",{staticClass:"button",on:{click:function(e){t.showTaskFilter=!t.showTaskFilter}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"filter"}})],1),t._v(" Filters ")])]),a("transition",{attrs:{name:"fade"}},[t.showTaskFilter?a("filters",{on:{change:function(e){return t.loadTasks(1)}},model:{value:t.params,callback:function(e){t.params=e},expression:"params"}}):t._e()],1)],1),!t.list.isArchived&&t.canWrite?a("div",{staticClass:"field task-add"},[a("div",{staticClass:"field is-grouped"},[a("p",{staticClass:"control has-icons-left is-expanded",class:{"is-loading":t.taskService.loading}},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.newTaskText,expression:"newTaskText"}],staticClass:"input",class:{disabled:t.taskService.loading},attrs:{type:"text",placeholder:"Add a new task..."},domProps:{value:t.newTaskText},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addTask()},input:function(e){e.target.composing||(t.newTaskText=e.target.value)}}}),a("span",{staticClass:"icon is-small is-left"},[a("icon",{attrs:{icon:"tasks"}})],1)]),a("p",{staticClass:"control"},[a("button",{staticClass:"button is-success",attrs:{disabled:0===t.newTaskText.length},on:{click:function(e){return t.addTask()}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"plus"}})],1),t._v(" Add ")])])]),t.showError&&""===t.newTaskText?a("p",{staticClass:"help is-danger"},[t._v(" Please specify a list title. ")]):t._e()]):t._e(),0===t.tasks.length?a("p",{staticClass:"list-is-empty-notice"},[t._v(" This list is currently empty. ")]):t._e(),a("div",{staticClass:"columns"},[a("div",{staticClass:"column"},[t.tasks&&t.tasks.length>0?a("div",{staticClass:"tasks",class:{short:t.isTaskEdit}},t._l(t.tasks,(function(e){return a("div",{key:e.id,staticClass:"task"},[a("single-task-in-list",{attrs:{"the-task":e,"task-detail-route":"task.detail",disabled:!t.canWrite},on:{taskUpdated:t.updateTasks}}),!t.list.isArchived&&t.canWrite?a("div",{staticClass:"icon settings",on:{click:function(a){return t.editTask(e.id)}}},[a("icon",{attrs:{icon:"pencil-alt"}})],1):t._e()],1)})),0):t._e()]),t.isTaskEdit?a("div",{staticClass:"column is-4"},[a("div",{staticClass:"card taskedit"},[a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v(" Edit Task ")]),a("a",{staticClass:"card-header-icon",on:{click:function(e){t.isTaskEdit=!1}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"angle-right"}})],1)])]),a("div",{staticClass:"card-content"},[a("div",{staticClass:"content"},[a("edit-task",{attrs:{task:t.taskEditTask}})],1)])])]):t._e()]),t.taskCollectionService.totalPages>1?a("nav",{staticClass:"pagination is-centered",attrs:{role:"navigation","aria-label":"pagination"}},[a("router-link",{staticClass:"pagination-previous",attrs:{to:t.getRouteForPagination(t.currentPage-1),tag:"button",disabled:1===t.currentPage}},[t._v(" Previous ")]),a("router-link",{staticClass:"pagination-next",attrs:{to:t.getRouteForPagination(t.currentPage+1),tag:"button",disabled:t.currentPage===t.taskCollectionService.totalPages}},[t._v(" Next page ")]),a("ul",{staticClass:"pagination-list"},[t._l(t.pages,(function(e,s){return[e.isEllipsis?a("li",{key:"page"+s},[a("span",{staticClass:"pagination-ellipsis"},[t._v("…")])]):a("li",{key:"page"+s},[a("router-link",{staticClass:"pagination-link",class:{"is-current":e.number===t.currentPage},attrs:{to:t.getRouteForPagination(e.number),"aria-label":"Goto page "+e.number}},[t._v(" "+t._s(e.number)+" ")])],1)]}))],2)],1):t._e(),a("transition",{attrs:{name:"modal"}},[a("router-view")],1)],1)},Es=[],Ls=(a("3ca3"),a("ddb0"),a("4b81")),Ps=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{on:{submit:function(e){return e.preventDefault(),t.editTaskSubmit()}}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"tasktext"}},[t._v("Task Text")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.taskEditTask.title,expression:"taskEditTask.title"}],staticClass:"input",class:{disabled:t.taskService.loading},attrs:{disabled:t.taskService.loading,type:"text",id:"tasktext",placeholder:"The task text is here..."},domProps:{value:t.taskEditTask.title},on:{change:function(e){return t.editTaskSubmit()},input:function(e){e.target.composing||t.$set(t.taskEditTask,"title",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"taskdescription"}},[t._v("Description")]),a("div",{staticClass:"control"},[t.editorActive?a("editor",{attrs:{placeholder:"The tasks description goes here...",id:"taskdescription","preview-is-default":!1},model:{value:t.taskEditTask.description,callback:function(e){t.$set(t.taskEditTask,"description",e)},expression:"taskEditTask.description"}}):t._e()],1)]),a("b",[t._v("Reminder Dates")]),a("reminders",{on:{change:function(e){return t.editTaskSubmit()}},model:{value:t.taskEditTask.reminderDates,callback:function(e){t.$set(t.taskEditTask,"reminderDates",e)},expression:"taskEditTask.reminderDates"}}),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"taskduedate"}},[t._v("Due Date")]),a("div",{staticClass:"control"},[a("flat-pickr",{staticClass:"input",class:{disabled:t.taskService.loading},attrs:{disabled:t.taskService.loading,config:t.flatPickerConfig,id:"taskduedate",placeholder:"The tasks due date is here..."},on:{"on-close":function(e){return t.editTaskSubmit()}},model:{value:t.taskEditTask.dueDate,callback:function(e){t.$set(t.taskEditTask,"dueDate",e)},expression:"taskEditTask.dueDate"}})],1)]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:""}},[t._v("Duration")]),a("div",{staticClass:"control columns"},[a("div",{staticClass:"column"},[a("flat-pickr",{staticClass:"input",class:{disabled:t.taskService.loading},attrs:{disabled:t.taskService.loading,config:t.flatPickerConfig,id:"taskduedate",placeholder:"Start date"},on:{"on-close":function(e){return t.editTaskSubmit()}},model:{value:t.taskEditTask.startDate,callback:function(e){t.$set(t.taskEditTask,"startDate",e)},expression:"taskEditTask.startDate"}})],1),a("div",{staticClass:"column"},[a("flat-pickr",{staticClass:"input",class:{disabled:t.taskService.loading},attrs:{disabled:t.taskService.loading,config:t.flatPickerConfig,id:"taskduedate",placeholder:"End date"},on:{"on-close":function(e){return t.editTaskSubmit()}},model:{value:t.taskEditTask.endDate,callback:function(e){t.$set(t.taskEditTask,"endDate",e)},expression:"taskEditTask.endDate"}})],1)])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:""}},[t._v("Repeat after")]),a("repeat-after",{on:{change:function(e){return t.editTaskSubmit()}},model:{value:t.taskEditTask.repeatAfter,callback:function(e){t.$set(t.taskEditTask,"repeatAfter",e)},expression:"taskEditTask.repeatAfter"}})],1),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:""}},[t._v("Priority")]),a("div",{staticClass:"control priority-select"},[a("priority-select",{on:{change:function(e){return t.editTaskSubmit()}},model:{value:t.taskEditTask.priority,callback:function(e){t.$set(t.taskEditTask,"priority",e)},expression:"taskEditTask.priority"}})],1)]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Percent Done")]),a("div",{staticClass:"control"},[a("percent-done-select",{on:{change:function(e){return t.editTaskSubmit()}},model:{value:t.taskEditTask.percentDone,callback:function(e){t.$set(t.taskEditTask,"percentDone",e)},expression:"taskEditTask.percentDone"}})],1)]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Color")]),a("div",{staticClass:"control"},[a("color-picker",{model:{value:t.taskEditTask.hexColor,callback:function(e){t.$set(t.taskEditTask,"hexColor",e)},expression:"taskEditTask.hexColor"}})],1)]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:""}},[t._v("Assignees")]),a("ul",{staticClass:"assingees"},t._l(t.taskEditTask.assignees,(function(e,s){return a("li",{key:e.id},[t._v(" "+t._s(e.username)+" "),a("a",{on:{click:function(e){return t.deleteAssigneeByIndex(s)}}},[a("icon",{attrs:{icon:"times"}})],1)])})),0)]),a("div",{staticClass:"field has-addons"},[a("div",{staticClass:"control is-expanded"},[a("edit-assignees",{attrs:{"task-id":t.taskEditTask.id,"list-id":t.taskEditTask.listId,"initial-assignees":t.taskEditTask.assignees}})],1)]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Labels")]),a("div",{staticClass:"control"},[a("edit-labels",{attrs:{"task-id":t.taskEditTask.id},model:{value:t.taskEditTask.labels,callback:function(e){t.$set(t.taskEditTask,"labels",e)},expression:"taskEditTask.labels"}})],1)]),a("related-tasks",{staticClass:"is-narrow",attrs:{"task-id":t.task.id,"list-id":t.task.listId,"initial-related-tasks":t.task.relatedTasks}}),a("button",{staticClass:"button is-success is-fullwidth",class:{"is-loading":t.taskService.loading},attrs:{type:"submit"}},[t._v(" Save ")])],1)},Ns=[],Bs={name:"edit-task",data:function(){return{listId:this.$route.params.id,listService:ha["a"],taskService:u["a"],priorities:v,list:{},editorActive:!1,newTask:f["a"],isTaskEdit:!1,taskEditTask:f["a"],flatPickerConfig:{altFormat:"j M Y H:i",altInput:!0,dateFormat:"Y-m-d H:i",enableTime:!0,onOpen:this.updateLastReminderDate,onClose:this.addReminderDate}}},components:{ColorPicker:ba["a"],Reminders:ta,RepeatAfter:ze,RelatedTasks:We,EditAssignees:Te,EditLabels:ue,PercentDoneSelect:te,PrioritySelect:zt,flatPickr:F.a,editor:function(){return{component:a.e("editor").then(a.bind(null,"d593")),loading:ct["a"],error:lt["a"],timeout:6e4}}},props:{task:{type:f["a"],required:!0}},watch:{task:function(){this.taskEditTask=this.task,this.initTaskFields()}},created:function(){this.listService=new ha["a"],this.taskService=new u["a"],this.newTask=new f["a"],this.taskEditTask=this.task,this.initTaskFields()},methods:{initTaskFields:function(){var t=this;this.taskEditTask.dueDate=0===+new Date(this.task.dueDate)?null:this.task.dueDate,this.taskEditTask.startDate=0===+new Date(this.task.startDate)?null:this.task.startDate,this.taskEditTask.endDate=0===+new Date(this.task.endDate)?null:this.task.endDate,this.editorActive=!1,this.$nextTick((function(){return t.editorActive=!0}))},editTaskSubmit:function(){var t=this;this.taskService.update(this.taskEditTask).then((function(e){t.$set(t,"taskEditTask",e),t.initTaskFields()})).catch((function(e){t.error(e,t)}))}}},Fs=Bs,Rs=(a("781a"),Object(g["a"])(Fs,Ps,Ns,!1,null,"abdd7876",null)),Us=Rs.exports,Ms=(a("841c"),function(t){Object(ve["a"])(a,t);var e=Object(ke["a"])(a);function a(){return Object(me["a"])(this,a),e.call(this,{getAll:"/lists/{listId}/tasks"})}return Object(pe["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(ge["a"])(t.created),t.updated=Object(ge["a"])(t.updated),t}},{key:"modelFactory",value:function(t){return new f["a"](t)}}]),a}(be["a"])),Ws={data:function(){return{taskCollectionService:Ms,tasks:[],pages:[],currentPage:0,showTaskSearch:!1,searchTerm:"",showTaskFilter:!1,params:{sort_by:["done","id"],order_by:["asc","desc"],filter_by:["done"],filter_value:["false"],filter_comparator:["equals"],filter_concat:"and"}}},watch:{"$route.query":"loadTasksForPage"},beforeMount:function(){this.loadTasksForPage(this.$route.query)},created:function(){this.taskCollectionService=new Ms},methods:{loadTasks:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;"list.list"!==this.$route.name&&"list.table"!==this.$route.name||(this.$set(this,"tasks",[]),null===s&&(s=this.params),""!==a&&(s.s=a),this.taskCollectionService.getAll({listId:this.$route.params.listId},s,t).then((function(a){e.$set(e,"tasks",a),e.$set(e,"pages",[]),e.currentPage=t;for(var s=0;s<e.taskCollectionService.totalPages;s++)s>0&&s+1<e.taskCollectionService.totalPages&&(s+1>e.currentPage+1||s+1<e.currentPage-1)?e.pages[s-1]&&!e.pages[s-1].isEllipsis&&e.pages.push({number:0,isEllipsis:!0}):e.pages.push({number:s+1,isEllipsis:!1})})).catch((function(t){e.error(t,e)})))},loadTasksForPage:function(t){var e=Number(t.page);"undefined"===typeof t.page&&(e=1);var a=t.search;"undefined"===typeof t.search&&(a=""),this.initTasks(e,a)},sortTasks:function(){if(null!==this.tasks&&this.tasks!==[])return this.tasks.sort((function(t,e){return t.done<e.done?-1:t.done>e.done?1:t.id>e.id?-1:t.id<e.id?1:0}))},searchTasks:function(){this.$route.query!==this.searchTerm&&this.$router.push({name:"list.list",query:{search:this.searchTerm}})},hideSearchBar:function(){var t=this;setTimeout((function(){t.showTaskSearch=!1}),200)},getRouteForPagination:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"list";return{name:"list."+e,params:{type:e},query:{page:t}}}}},qs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card filters"},[a("div",{staticClass:"card-content"},[a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Show Done Tasks")]),a("div",{staticClass:"control"},[a("fancycheckbox",{on:{change:t.setDoneFilter},model:{value:t.filters.done,callback:function(e){t.$set(t.filters,"done",e)},expression:"filters.done"}},[t._v(" Show Done Tasks ")])],1)]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Due Date")]),a("div",{staticClass:"control"},[a("flat-pickr",{staticClass:"input",attrs:{config:t.flatPickerConfig,placeholder:"Due Date Range"},on:{"on-close":t.setDueDateFilter},model:{value:t.filters.dueDate,callback:function(e){t.$set(t.filters,"dueDate",e)},expression:"filters.dueDate"}})],1)])])])},Hs=[],Gs={name:"filters",components:{Fancycheckbox:L["a"],flatPickr:F.a},data:function(){return{params:{sort_by:[],order_by:[],filter_by:[],filter_value:[],filter_comparator:[]},filters:{done:!1,dueDate:""},flatPickerConfig:{altFormat:"j M Y H:i",altInput:!0,dateFormat:"Y-m-d H:i",enableTime:!0,time_24hr:!0,mode:"range"}}},mounted:function(){this.params=this.value,this.prepareDone()},props:{value:{required:!0}},watch:{value:function(t){this.$set(this,"params",t),this.prepareDone()}},methods:{change:function(){this.$emit("input",this.params),this.$emit("change",this.params)},prepareDone:function(){if("undefined"!==typeof this.params.filter_by){var t=!1;this.params.filter_by.forEach((function(e,a){"done"===e&&(t=a)})),!1===t&&(this.filters.done=!0)}},setDoneFilter:function(){if(this.filters.done){for(var t in this.params.filter_by)if("done"===this.params.filter_by[t]){this.params.filter_by.splice(t,1),this.params.filter_comparator.splice(t,1),this.params.filter_value.splice(t,1);break}}else this.params.filter_by.push("done"),this.params.filter_comparator.push("equals"),this.params.filter_value.push("false");this.change()},setDueDateFilter:function(){var t=this;if(""!==this.filters.dueDate){var e=this.filters.dueDate.split(" to ");if(e.length<2)return;var a=!1,s=!1;this.params.filter_by.forEach((function(n,i){"due_date"===n&&"greater_equals"===t.params.filter_comparator[i]&&(a=!0,t.params.filter_value[i]=+new Date(e[0])/1e3),"due_date"===n&&"less_equals"===t.params.filter_comparator[i]&&(s=!0,t.params.filter_value[i]=+new Date(e[1])/1e3)})),a||(this.params.filter_by.push("due_date"),this.params.filter_comparator.push("greater_equals"),this.params.filter_value.push(+new Date(e[0])/1e3)),s||(this.params.filter_by.push("due_date"),this.params.filter_comparator.push("less_equals"),this.params.filter_value.push(+new Date(e[1])/1e3)),this.change()}}}},Vs=Gs,Ks=Object(g["a"])(Vs,qs,Hs,!1,null,null,null),zs=Ks.exports,Ys={name:"List",data:function(){return{taskService:u["a"],list:{},isTaskEdit:!1,taskEditTask:f["a"],newTaskText:"",showError:!1,labelTaskService:re["a"],labelService:ne["a"]}},mixins:[Ws],components:{Filters:zs,SingleTaskInList:V,EditTask:Us},created:function(){this.taskService=new u["a"],this.labelService=new ne["a"],this.labelTaskService=new re["a"],ps(this.$route.params.listId,this.$route.name)},computed:Object(o["b"])({canWrite:function(t){return t.currentList.maxRight>Wt.READ}}),methods:{initTasks:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.taskEditTask=null,this.isTaskEdit=!1,this.loadTasks(t,e)},addTask:function(){var t=this;if(""!==this.newTaskText){this.showError=!1;var e=new f["a"]({title:this.newTaskText,listId:this.$route.params.listId});this.taskService.create(e).then((function(e){t.tasks.push(e),t.sortTasks(),t.newTaskText="";var a=e.title.split(" ~");if(a.length>1){var s=[],n=[];a.forEach((function(t,e){e<1||n.push(new Promise((function(t,e){s.push({resolve:t,reject:e})})))})),a.forEach((function(a,n){if(!(n<1)){var i=a.split(" ")[0];t.labelService.getAll({},{s:i}).then((function(a){if(a.length>0&&a[0].title===i){var r=new Ls["a"]({taskId:e.id,labelId:a[0].id});t.labelTaskService.create(r).then((function(t){e.labels.push(a[0]),e.title=e.title.replace(" ~".concat(i),""),s[n-1].resolve(t)})).catch((function(e){t.error(e,t)}))}else{var o=new ie["a"]({title:i});t.labelService.create(o).then((function(a){var r=new Ls["a"]({taskId:e.id,labelId:a.id});t.labelTaskService.create(r).then((function(t){e.labels.push(a),e.title=e.title.replace(" ~".concat(i),""),s[n-1].resolve(t)})).catch((function(e){t.error(e,t)}))})).catch((function(e){t.error(e,t)}))}})).catch((function(e){t.error(e,t)}))}})),Promise.all(n).then((function(){t.taskService.update(e).then((function(e){t.updateTasks(e)})).catch((function(e){t.error(e,t)}))}))}})).catch((function(e){t.error(e,t)}))}else this.showError=!0},editTask:function(t){var e=this.getTaskById(t);this.taskEditTask=e,this.isTaskEdit=!0},getTaskById:function(t){for(var e in this.tasks)if(this.tasks[e].id===parseInt(t))return this.tasks[e];return{}},updateTasks:function(t){for(var e in this.tasks)if(this.tasks[e].id===t.id){this.$set(this.tasks,e,t);break}this.sortTasks()}}},Js=Ys,Qs=Object(g["a"])(Js,js,Es,!1,null,null,null),Xs=Qs.exports,Zs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gantt-chart-container"},[a("div",{staticClass:"gantt-options"},[a("fancycheckbox",{staticClass:"is-block",model:{value:t.showTaskswithoutDates,callback:function(e){t.showTaskswithoutDates=e},expression:"showTaskswithoutDates"}},[t._v(" Show tasks which don't have dates set ")]),a("div",{staticClass:"range-picker"},[a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"dayWidth"}},[t._v("Size")]),a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model.number",value:t.dayWidth,expression:"dayWidth",modifiers:{number:!0}}],attrs:{id:"dayWidth"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var a="_value"in e?e._value:e.value;return t._n(a)}));t.dayWidth=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"35"}},[t._v("Default")]),a("option",{attrs:{value:"10"}},[t._v("Month")]),a("option",{attrs:{value:"80"}},[t._v("Day")])])])])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"fromDate"}},[t._v("From")]),a("div",{staticClass:"control"},[a("flat-pickr",{staticClass:"input",attrs:{config:t.flatPickerConfig,id:"fromDate",placeholder:"From"},model:{value:t.dateFrom,callback:function(e){t.dateFrom=e},expression:"dateFrom"}})],1)]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"toDate"}},[t._v("To")]),a("div",{staticClass:"control"},[a("flat-pickr",{staticClass:"input",attrs:{config:t.flatPickerConfig,id:"toDate",placeholder:"To"},model:{value:t.dateTo,callback:function(e){t.dateTo=e},expression:"dateTo"}})],1)])])],1),a("gantt-chart",{attrs:{"list-id":Number(t.$route.params.listId),"show-taskswithout-dates":t.showTaskswithoutDates,"date-from":t.dateFrom,"date-to":t.dateTo,"day-width":t.dayWidth}}),a("transition",{attrs:{name:"modal"}},[a("router-view")],1)],1)},tn=[],en=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gantt-chart box"},[a("div",{staticClass:"dates"},[t._l(t.days,(function(e,s){return[a("div",{key:s+"year",staticClass:"months"},t._l(t.days[s],(function(e,n){return a("div",{key:n+"month",staticClass:"month"},[t._v(" "+t._s(new Date(new Date(s).setMonth(n)).toLocaleString("en-us",{month:"long"}))+", "+t._s(new Date(s).getFullYear())+" "),a("div",{staticClass:"days"},t._l(t.days[s][n],(function(e,s){return a("div",{key:s+"day",staticClass:"day",class:{today:e.toDateString()===t.now.toDateString()},style:{width:t.dayWidth+"px"}},[t.dayWidth>25?a("span",{staticClass:"theday"},[t._v(" "+t._s(e.getDate())+" ")]):t._e(),t.dayWidth>25?a("span",{staticClass:"weekday"},[t._v(" "+t._s(e.toLocaleString("en-us",{weekday:"short"}))+" ")]):t._e()])})),0)])})),0)]}))],2),a("div",{staticClass:"tasks",style:{width:t.fullWidth+"px"}},[t._l(t.theTasks,(function(e,s){return a("div",{key:e.id,staticClass:"row",style:{background:"repeating-linear-gradient(90deg, #ededed, #ededed 1px, "+(s%2===0?"#fafafa 1px, #fafafa ":"#fff 1px, #fff ")+t.dayWidth+"px)"}},[a("VueDragResize",{staticClass:"task",class:{done:e.done,"is-current-edit":null!==t.taskToEdit&&t.taskToEdit.id===e.id,"has-light-text":!t.colorIsDark(e.hexColor),"has-dark-text":t.colorIsDark(e.hexColor)},style:{"border-color":e.hexColor,"background-color":e.hexColor},attrs:{isActive:t.canWrite,x:e.offsetDays*t.dayWidth-6,y:0,w:e.durationDays*t.dayWidth,h:31,minw:t.dayWidth,snapToGrid:!0,gridX:t.dayWidth,sticks:["mr","ml"],axis:"x",parentLimitation:!0,parentW:t.fullWidth},on:{resizestop:t.resizeTask,dragstop:t.resizeTask,clicked:function(a){return t.setTaskDragged(e)}}},[a("span",{class:{"has-high-priority":e.priority>=t.priorities.HIGH,"has-not-so-high-priority":e.priority===t.priorities.HIGH,"has-super-high-priority":e.priority===t.priorities.DO_NOW}},[t._v(t._s(e.title))]),a("priority-label",{attrs:{priority:e.priority}}),a("a",{staticClass:"edit-toggle",on:{click:function(e){return t.editTask(t.theTasks[s])}}},[a("icon",{attrs:{icon:"pen"}})],1)],1)],1)})),t.showTaskswithoutDates?t._l(t.tasksWithoutDates,(function(e,s){return a("div",{key:e.id,staticClass:"row",style:{background:"repeating-linear-gradient(90deg, #ededed, #ededed 1px, "+(s%2===0?"#fafafa 1px, #fafafa ":"#fff 1px, #fff ")+t.dayWidth+"px)"}},[a("VueDragResize",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"This task has no dates set.",expression:"'This task has no dates set.'"}],staticClass:"task nodate",attrs:{isActive:t.canWrite,x:t.dayOffsetUntilToday*t.dayWidth-6,y:0,h:31,minw:t.dayWidth,snapToGrid:!0,gridX:t.dayWidth,sticks:["mr","ml"],axis:"x",parentLimitation:!0,parentW:t.fullWidth},on:{resizestop:t.resizeTask,dragstop:t.resizeTask,clicked:function(a){return t.setTaskDragged(e)}}},[a("span",[t._v(t._s(e.title))])])],1)})):t._e()],2),t.canWrite?a("form",{staticClass:"add-new-task",on:{submit:function(e){return e.preventDefault(),t.addNewTask()}}},[a("transition",{attrs:{name:"width"}},[t.newTaskFieldActive?a("input",{directives:[{name:"model",rawName:"v-model",value:t.newTaskTitle,expression:"newTaskTitle"}],ref:"newTaskTitleField",staticClass:"input",attrs:{type:"text"},domProps:{value:t.newTaskTitle},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.newTaskFieldActive=!1},blur:t.hideCrateNewTask,input:function(e){e.target.composing||(t.newTaskTitle=e.target.value)}}}):t._e()]),a("button",{staticClass:"button is-primary noshadow",on:{click:t.showCreateNewTask}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"plus"}})],1),t._v(" Add a new task ")])],1):t._e(),a("transition",{attrs:{name:"fade"}},[t.isTaskEdit?a("div",{staticClass:"card taskedit"},[a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v(" Edit Task ")]),a("a",{staticClass:"card-header-icon",on:{click:function(){t.isTaskEdit=!1,t.taskToEdit=null}}},[a("span",{staticClass:"icon"},[a("icon",{attrs:{icon:"times"}})],1)])]),a("div",{staticClass:"card-content"},[a("div",{staticClass:"content"},[a("edit-task",{attrs:{task:t.taskToEdit}})],1)])]):t._e()])],1)},an=[],sn=(a("d81d"),a("3b58")),nn=a.n(sn),rn={name:"GanttChart",components:{PriorityLabel:_,EditTask:Us,VueDragResize:nn.a},props:{listId:{type:Number,required:!0},showTaskswithoutDates:{type:Boolean,default:!1},dateFrom:{default:new Date((new Date).setDate((new Date).getDate()-15))},dateTo:{default:new Date((new Date).setDate((new Date).getDate()+30))},dayWidth:{type:Number,default:35}},data:function(){return{days:[],startDate:null,endDate:null,theTasks:[],tasksWithoutDates:[],taskService:u["a"],taskDragged:null,fullWidth:0,now:null,dayOffsetUntilToday:0,isTaskEdit:!1,taskToEdit:null,newTaskTitle:"",newTaskFieldActive:!1,priorities:{},taskCollectionService:Ms}},watch:{dateFrom:"buildTheGanttChart",dateTo:"buildTheGanttChart",listId:"parseTasks"},created:function(){this.now=new Date,this.taskCollectionService=new Ms,this.taskService=new u["a"],this.priorities=v},mounted:function(){this.buildTheGanttChart()},computed:Object(o["b"])({canWrite:function(t){return t.currentList.maxRight>Wt.READ}}),methods:{buildTheGanttChart:function(){this.setDates(),this.prepareGanttDays(),this.parseTasks()},setDates:function(){this.startDate=new Date(this.dateFrom),this.endDate=new Date(this.dateTo),this.dayOffsetUntilToday=Math.floor((this.now-this.startDate)/1e3/60/60/24)+1},prepareGanttDays:function(){for(var t={},e=this.startDate;e<=this.endDate;e.setDate(e.getDate()+1)){var a=new Date(e);void 0===t[a.getFullYear()+""]&&(t[a.getFullYear()+""]={}),void 0===t[a.getFullYear()+""][a.getMonth()+""]&&(t[a.getFullYear()+""][a.getMonth()+""]=[]),t[a.getFullYear()+""][a.getMonth()+""].push(a),this.fullWidth+=this.dayWidth}this.$set(this,"days",t)},parseTasks:function(){this.setDates(),this.prepareTasks()},prepareTasks:function(){var t=this,e=function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return t.taskCollectionService.getAll({listId:t.listId},{},a).then((function(s){return a<t.taskCollectionService.totalPages?e(a+1).then((function(t){return s.concat(t)})):s})).catch((function(t){return Promise.reject(t)}))};e().then((function(e){t.theTasks=e.filter((function(e){return null!==e.startDate||e.done||t.tasksWithoutDates.push(e),e.startDate>=t.startDate&&e.endDate<=t.endDate})).map((function(e){return t.addGantAttributes(e)})).sort((function(t,e){return t.startDate<e.startDate?-1:t.startDate>e.startDate?1:0}))})).catch((function(e){t.error(e,t)}))},addGantAttributes:function(t){return null===t.endDate?this.endDate:t.endDate,t.durationDays=Math.floor((t.endDate-t.startDate)/1e3/60/60/24)+1,t.offsetDays=Math.floor((t.startDate-this.startDate)/1e3/60/60/24)+1,t},setTaskDragged:function(t){this.taskDragged=t},resizeTask:function(t){var e=this;setTimeout((function(){if(!e.isTaskEdit){var a=null===e.taskDragged.startDate,s=new Date(e.startDate);s.setDate(s.getDate()+t.left/e.dayWidth),s.setUTCHours(0),s.setUTCMinutes(0),s.setUTCSeconds(0),s.setUTCMilliseconds(0),e.taskDragged.startDate=s;var n=new Date(s);for(var i in n.setDate(s.getDate()+t.width/e.dayWidth),e.taskDragged.startDate=s,e.taskDragged.endDate=n,e.theTasks)if(e.theTasks[i].id===e.taskDragged.id){e.$set(e,"taskDragged",e.theTasks[i]);break}e.taskService.update(e.taskDragged).then((function(t){if(a){for(var s in e.tasksWithoutDates)if(e.tasksWithoutDates[s].id===t.id){e.tasksWithoutDates.splice(s,1);break}e.theTasks.push(e.addGantAttributes(t))}else for(var n in e.theTasks)if(e.theTasks[n].id===t.id){e.$set(e.theTasks,n,e.addGantAttributes(t));break}})).catch((function(t){e.error(t,e)}))}}),100)},editTask:function(t){this.taskToEdit=t,this.isTaskEdit=!0},showCreateNewTask:function(){var t=this;this.newTaskFieldActive||setTimeout((function(){t.newTaskFieldActive=!0,t.$nextTick((function(){return t.$refs.newTaskTitleField.focus()}))}),100)},hideCrateNewTask:function(){var t=this;""===this.newTaskTitle&&this.$nextTick((function(){return t.newTaskFieldActive=!1}))},addNewTask:function(){var t=this;if(this.newTaskFieldActive){var e=new f["a"]({title:this.newTaskTitle,listId:this.listId});this.taskService.create(e).then((function(e){t.tasksWithoutDates.push(t.addGantAttributes(e)),t.newTaskTitle="",t.hideCrateNewTask()})).catch((function(e){t.error(e,t)}))}}}},on=rn,cn=Object(g["a"])(on,en,an,!1,null,null,null),ln=cn.exports,un={name:"Gantt",components:{Fancycheckbox:L["a"],flatPickr:F.a,GanttChart:ln},created:function(){ps(this.$route.params.listId,this.$route.name)},data:function(){return{showTaskswithoutDates:!1,dayWidth:35,dateFrom:null,dateTo:null,flatPickerConfig:{altFormat:"j M Y",altInput:!0,dateFormat:"Y-m-d",enableTime:!1}}},beforeMount:function(){this.dateFrom=new Date((new Date).setDate((new Date).getDate()-15)),this.dateTo=new Date((new Date).setDate((new Date).getDate()+30))}},dn=un,hn=Object(g["a"])(dn,Zs,tn,!1,null,null,null),fn=hn.exports,mn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-view loader-container",class:{"is-loading":t.taskCollectionService.loading}},[a("div",{staticClass:"filter-container"},[a("div",{staticClass:"items"},[a("button",{staticClass:"button",on:{click:function(){t.showActiveColumnsFilter=!t.showActiveColumnsFilter,t.showTaskFilter=!1}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"th"}})],1),t._v(" Columns ")]),a("button",{staticClass:"button",on:{click:function(){t.showTaskFilter=!t.showTaskFilter,t.showActiveColumnsFilter=!1}}},[a("span",{staticClass:"icon is-small"},[a("icon",{attrs:{icon:"filter"}})],1),t._v(" Filters ")])]),a("transition",{attrs:{name:"fade"}},[t.showActiveColumnsFilter?a("div",{staticClass:"card"},[a("div",{staticClass:"card-content"},[a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.id,callback:function(e){t.$set(t.activeColumns,"id",e)},expression:"activeColumns.id"}},[t._v("#")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.done,callback:function(e){t.$set(t.activeColumns,"done",e)},expression:"activeColumns.done"}},[t._v("Done")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.title,callback:function(e){t.$set(t.activeColumns,"title",e)},expression:"activeColumns.title"}},[t._v("Title")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.priority,callback:function(e){t.$set(t.activeColumns,"priority",e)},expression:"activeColumns.priority"}},[t._v("Priority")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.labels,callback:function(e){t.$set(t.activeColumns,"labels",e)},expression:"activeColumns.labels"}},[t._v("Labels")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.assignees,callback:function(e){t.$set(t.activeColumns,"assignees",e)},expression:"activeColumns.assignees"}},[t._v("Assignees")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.dueDate,callback:function(e){t.$set(t.activeColumns,"dueDate",e)},expression:"activeColumns.dueDate"}},[t._v("Due Date")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.startDate,callback:function(e){t.$set(t.activeColumns,"startDate",e)},expression:"activeColumns.startDate"}},[t._v("Start Date")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.endDate,callback:function(e){t.$set(t.activeColumns,"endDate",e)},expression:"activeColumns.endDate"}},[t._v("End Date")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.percentDone,callback:function(e){t.$set(t.activeColumns,"percentDone",e)},expression:"activeColumns.percentDone"}},[t._v("% Done")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.created,callback:function(e){t.$set(t.activeColumns,"created",e)},expression:"activeColumns.created"}},[t._v("Created")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.updated,callback:function(e){t.$set(t.activeColumns,"updated",e)},expression:"activeColumns.updated"}},[t._v("Updated")]),a("fancycheckbox",{on:{change:t.saveTaskColumns},model:{value:t.activeColumns.createdBy,callback:function(e){t.$set(t.activeColumns,"createdBy",e)},expression:"activeColumns.createdBy"}},[t._v("Created By")])],1)]):t._e(),t.showTaskFilter?a("filters",{on:{change:function(e){return t.loadTasks(1)}},model:{value:t.params,callback:function(e){t.params=e},expression:"params"}}):t._e()],1)],1),a("table",{staticClass:"table is-hoverable is-fullwidth"},[a("thead",[a("tr",[t.activeColumns.id?a("th",[t._v(" # "),a("sort",{attrs:{order:t.sortBy.id},on:{click:function(e){return t.sort("id")}}})],1):t._e(),t.activeColumns.done?a("th",[t._v(" Done "),a("sort",{attrs:{order:t.sortBy.done},on:{click:function(e){return t.sort("done")}}})],1):t._e(),t.activeColumns.title?a("th",[t._v(" Name "),a("sort",{attrs:{order:t.sortBy.title},on:{click:function(e){return t.sort("title")}}})],1):t._e(),t.activeColumns.priority?a("th",[t._v(" Priority "),a("sort",{attrs:{order:t.sortBy.priority},on:{click:function(e){return t.sort("priority")}}})],1):t._e(),t.activeColumns.labels?a("th",[t._v(" Labels ")]):t._e(),t.activeColumns.assignees?a("th",[t._v(" Assignees ")]):t._e(),t.activeColumns.dueDate?a("th",[t._v(" Due Date "),a("sort",{attrs:{order:t.sortBy.due_date},on:{click:function(e){return t.sort("due_date")}}})],1):t._e(),t.activeColumns.startDate?a("th",[t._v(" Start Date "),a("sort",{attrs:{order:t.sortBy.start_date},on:{click:function(e){return t.sort("start_date")}}})],1):t._e(),t.activeColumns.endDate?a("th",[t._v(" End Date "),a("sort",{attrs:{order:t.sortBy.end_date},on:{click:function(e){return t.sort("end_date")}}})],1):t._e(),t.activeColumns.percentDone?a("th",[t._v(" % Done "),a("sort",{attrs:{order:t.sortBy.percent_done},on:{click:function(e){return t.sort("percent_done")}}})],1):t._e(),t.activeColumns.created?a("th",[t._v(" Created "),a("sort",{attrs:{order:t.sortBy.created},on:{click:function(e){return t.sort("created")}}})],1):t._e(),t.activeColumns.updated?a("th",[t._v(" Updated "),a("sort",{attrs:{order:t.sortBy.updated},on:{click:function(e){return t.sort("updated")}}})],1):t._e(),t.activeColumns.createdBy?a("th",[t._v(" Created By ")]):t._e()])]),a("tbody",t._l(t.tasks,(function(e){return a("tr",{key:e.id},[t.activeColumns.id?a("td",[a("router-link",{attrs:{to:{name:"task.detail",params:{id:e.id}}}},[""===e.identifier?[t._v(" #"+t._s(e.index)+" ")]:[t._v(" "+t._s(e.identifier)+" ")]],2)],1):t._e(),t.activeColumns.done?a("td",[e.done?a("div",{staticClass:"is-done"},[t._v("Done")]):t._e()]):t._e(),t.activeColumns.title?a("td",[a("router-link",{attrs:{to:{name:"task.detail",params:{id:e.id}}}},[t._v(t._s(e.title))])],1):t._e(),t.activeColumns.priority?a("td",[a("priority-label",{attrs:{priority:e.priority,"show-all":!0}})],1):t._e(),t.activeColumns.labels?a("td",[a("labels",{attrs:{labels:e.labels}})],1):t._e(),t.activeColumns.assignees?a("td",t._l(e.assignees,(function(t,s){return a("user",{key:e.id+"assignee"+t.id+s,attrs:{user:t,"avatar-size":27,"show-username":!1,"is-inline":!0}})})),1):t._e(),t.activeColumns.dueDate?a("date-table-cell",{attrs:{date:e.dueDate}}):t._e(),t.activeColumns.startDate?a("date-table-cell",{attrs:{date:e.startDate}}):t._e(),t.activeColumns.endDate?a("date-table-cell",{attrs:{date:e.endDate}}):t._e(),t.activeColumns.percentDone?a("td",[t._v(t._s(100*e.percentDone)+"%")]):t._e(),t.activeColumns.created?a("date-table-cell",{attrs:{date:e.created}}):t._e(),t.activeColumns.updated?a("date-table-cell",{attrs:{date:e.updated}}):t._e(),t.activeColumns.createdBy?a("td",[a("user",{attrs:{user:e.createdBy,"show-username":!1,"avatar-size":27}})],1):t._e()],1)})),0)]),t.taskCollectionService.totalPages>1?a("nav",{staticClass:"pagination is-centered",attrs:{role:"navigation","aria-label":"pagination"}},[a("router-link",{staticClass:"pagination-previous",attrs:{to:t.getRouteForPagination(t.currentPage-1,"table"),tag:"button",disabled:1===t.currentPage}},[t._v("Previous")]),a("router-link",{staticClass:"pagination-next",attrs:{to:t.getRouteForPagination(t.currentPage+1,"table"),tag:"button",disabled:t.currentPage===t.taskCollectionService.totalPages}},[t._v("Next page")]),a("ul",{staticClass:"pagination-list"},[t._l(t.pages,(function(e,s){return[e.isEllipsis?a("li",{key:"page"+s},[a("span",{staticClass:"pagination-ellipsis"},[t._v("…")])]):a("li",{key:"page"+s},[a("router-link",{staticClass:"pagination-link",class:{"is-current":e.number===t.currentPage},attrs:{to:t.getRouteForPagination(e.number,"table"),"aria-label":"Goto page "+e.number}},[t._v(t._s(e.number))])],1)]}))],2)],1):t._e(),a("transition",{attrs:{name:"modal"}},[a("router-view")],1)],1)},pn=[],vn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{directives:[{name:"tooltip",rawName:"v-tooltip",value:0===+t.date?"":t.formatDate(t.date),expression:"+date === 0 ? '' : formatDate(date)"}]},[t._v(" "+t._s(0===+t.date?"-":t.formatDateSince(t.date))+" ")])},kn=[],bn={name:"date-table-cell",props:{date:{type:Date,default:0}}},gn=bn,Cn=Object(g["a"])(gn,vn,kn,!1,null,null,null),_n=Cn.exports,yn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{on:{click:t.click}},["asc"===t.order?a("icon",{attrs:{icon:"sort-up"}}):"desc"===t.order?a("icon",{attrs:{icon:"sort-up",rotation:"180"}}):a("icon",{attrs:{icon:"sort"}})],1)},wn=[],Dn={name:"sort",props:{order:{type:String,default:"none"}},methods:{click:function(){this.$emit("click")}}},Tn=Dn,xn=Object(g["a"])(Tn,yn,wn,!1,null,null,null),In=xn.exports,An={name:"Table",components:{Filters:zs,Sort:In,Fancycheckbox:L["a"],DateTableCell:_n,Labels:I,PriorityLabel:_,User:E},mixins:[Ws],data:function(){return{showActiveColumnsFilter:!1,activeColumns:{id:!0,done:!0,title:!0,priority:!1,labels:!0,assignees:!0,dueDate:!0,startDate:!1,endDate:!1,percentDone:!1,created:!1,updated:!1,createdBy:!1},sortBy:{id:"desc"}}},created:function(){var t=localStorage.getItem("tableViewColumns");null!==t&&this.$set(this,"activeColumns",JSON.parse(t));var e=localStorage.getItem("tableViewSortBy");null!==e&&this.$set(this,"sortBy",JSON.parse(e)),this.$set(this.params,"filter_by",[]),this.$set(this.params,"filter_value",[]),this.$set(this.params,"filter_comparator",[]),this.initTasks(1),ps(this.$route.params.listId,this.$route.name)},methods:{initTasks:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=this.params;s.sort_by=[],s.order_by=[],Object.keys(this.sortBy).map((function(t){s.sort_by.push(t),s.order_by.push(e.sortBy[t])})),this.loadTasks(t,a,s)},sort:function(t){var e=this.sortBy[t];"undefined"===typeof e||"none"===e?this.$set(this.sortBy,t,"desc"):"desc"===e?this.$set(this.sortBy,t,"asc"):this.$delete(this.sortBy,t),this.initTasks(this.currentPage,this.searchTerm),localStorage.setItem("tableViewSortBy",JSON.stringify(this.sortBy))},saveTaskColumns:function(){localStorage.setItem("tableViewColumns",JSON.stringify(this.activeColumns))}}},Sn=An,$n=Object(g["a"])(Sn,mn,pn,!1,null,null,null),On=$n.exports,jn=function(){return{component:a.e("user-settings").then(a.bind(null,"eb4e")),loading:ct["a"],error:lt["a"],timeout:6e4}},En=function(){return{component:a.e("user-settings").then(a.bind(null,"3983")),loading:ct["a"],error:lt["a"],timeout:6e4}},Ln=function(){return{component:a.e("user-settings").then(a.bind(null,"9471")),loading:ct["a"],error:lt["a"],timeout:6e4}},Pn=function(){return{component:a.e("settings").then(a.bind(null,"bc9a")),loading:ct["a"],error:lt["a"],timeout:6e4}},Nn=function(){return{component:a.e("settings").then(a.bind(null,"1f33")),loading:ct["a"],error:lt["a"],timeout:6e4}},Bn=function(){return{component:a.e("settings").then(a.bind(null,"49f4")),loading:ct["a"],error:lt["a"],timeout:6e4}},Fn=function(){return{component:a.e("settings").then(a.bind(null,"cf29")),loading:ct["a"],error:lt["a"],timeout:6e4}},Rn=function(){return{component:a.e("settings").then(a.bind(null,"2f15")),loading:ct["a"],error:lt["a"],timeout:6e4}},Un=function(){return{component:a.e("settings").then(a.bind(null,"df03")),loading:ct["a"],error:lt["a"],timeout:6e4}};s["default"].use(n["a"]);var Mn=e["a"]=new n["a"]({mode:"history",scrollBehavior:function(t,e,a){return a||(t.hash?{selector:t.hash}:{x:0,y:0})},routes:[{path:"/",name:"home",component:et},{path:"*",name:"404",component:ot},{path:"/login",name:"user.login",component:bt},{path:"/get-password-reset",name:"user.password-reset.request",component:En},{path:"/password-reset",name:"user.password-reset.reset",component:jn},{path:"/register",name:"user.register",component:Dt},{path:"/user/settings",name:"user.settings",component:Ln},{path:"/share/:share/auth",name:"link-share.auth",component:Nt},{path:"/namespaces",name:"namespaces.index",component:ja},{path:"/namespaces/new",name:"namespace.create",component:Bn},{path:"/namespaces/:id/edit",name:"namespace.edit",component:Fn},{path:"/namespaces/:id/list",name:"list.create",component:Pn},{path:"/lists/:id/edit",name:"list.edit",component:Nn},{path:"/tasks/:id",name:"task.detail",component:ya},{path:"/tasks/by/:type",name:"tasks.range",component:$t},{path:"/lists/:listId",name:"list.index",component:Cs,children:[{path:"/lists/:listId/list",name:"list.list",component:Xs,children:[{path:"/tasks/:id",name:"task.list.detail",component:xa}]},{path:"/lists/:listId/gantt",name:"list.gantt",component:fn,children:[{path:"/tasks/:id",name:"task.gantt.detail",component:xa}]},{path:"/lists/:listId/table",name:"list.table",component:On},{path:"/lists/:listId/kanban",name:"list.kanban",component:Os,children:[{path:"/tasks/:id",name:"task.kanban.detail",component:xa}]}]},{path:"/teams",name:"teams.index",component:Ra},{path:"/teams/new",name:"teams.create",component:Un},{path:"/teams/:id/edit",name:"teams.edit",component:Rn},{path:"/labels",name:"labels.index",component:Ga},{path:"/migrate",name:"migrate.start",component:Qa},{path:"/migrate/:service",name:"migrate.service",component:hs}]})},a1b4:function(t){t.exports=JSON.parse('{"READ":0,"READ_WRITE":1,"ADMIN":2}')},b1c6:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var s=a("276c"),n=a("e954"),i=a("fc11"),r=a("2ef0"),o=a("cf2a"),c=function(){function t(e){Object(s["a"])(this,t),Object(i["a"])(this,"maxRight",null),e=Object(o["a"])(e),Object(r["defaults"])(this,Object(r["omitBy"])(e,r["isNil"]),this.defaults())}return Object(n["a"])(t,[{key:"defaults",value:function(){return{}}}]),t}()},b8e5:function(t){t.exports=JSON.parse('{"subtask":["Subtask","Subtasks"],"parenttask":["Parent Task","Parent Tasks"],"related":["Related Task","Related Tasks"],"duplicateof":["Duplicate Of","Duplicates Of"],"duplicates":["Duplicates","Duplicates"],"blocking":["Blocking","Blocking"],"blocked":["Blocked By","Blocked By"],"precedes":["Preceds","Preceds"],"follows":["Follows","Follows"],"copiedfrom":["Copied From","Copied From"],"copiedto":["Copied To","Copied To"]}')},c4c1:function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));a("d81d");var s=a("276c"),n=a("e954"),i=a("920b"),r=a("92a6"),o=a("b1c6"),c=a("8654"),l=a("f1a4"),u=function(t){Object(i["a"])(a,t);var e=Object(r["a"])(a);function a(t){var n;return Object(s["a"])(this,a),n=e.call(this,t),n.tasks=n.tasks.map((function(t){return new l["a"](t)})),n.createdBy=new c["a"](n.createdBy),n.created=new Date(n.created),n.updated=new Date(n.updated),n}return Object(n["a"])(a,[{key:"defaults",value:function(){return{id:0,title:"",listId:0,tasks:[],createdBy:null,created:null,updated:null}}}]),a}(o["a"])},cb78:function(t,e,a){"use strict";a.d(e,"a",(function(){return h}));a("4160"),a("d81d"),a("a434"),a("a9e3"),a("b64b"),a("159b");var s=a("276c"),n=a("e954"),i=a("920b"),r=a("92a6"),o=a("0402"),c=a("f1a4"),l=a("ffd0"),u=a("8821"),d=a("737d"),h=function(t){Object(i["a"])(a,t);var e=Object(r["a"])(a);function a(){return Object(s["a"])(this,a),e.call(this,{create:"/lists/{listId}",getAll:"/tasks/all",get:"/tasks/{id}",update:"/tasks/{id}",delete:"/tasks/{id}"})}return Object(n["a"])(a,[{key:"modelFactory",value:function(t){return new c["a"](t)}},{key:"beforeUpdate",value:function(t){return this.processModel(t)}},{key:"beforeCreate",value:function(t){return this.processModel(t)}},{key:"processModel",value:function(t){var e=this;for(var a in t.listId=Number(t.listId),t.dueDate=t.dueDate?Object(d["a"])(new Date(t.dueDate)):null,t.startDate=t.startDate?Object(d["a"])(new Date(t.startDate)):null,t.endDate=t.endDate?Object(d["a"])(new Date(t.endDate)):null,t.created=Object(d["a"])(t.created),t.updated=Object(d["a"])(t.updated),t.reminderDates)null===t.reminderDates[a]&&t.reminderDates.splice(a,1);t.reminderDates.length>0&&(t.reminderDates=t.reminderDates.map((function(t){return Object(d["a"])(new Date(t))})));var s=0;if(null!==t.repeatAfter.amount||0!==t.repeatAfter.amount)switch(t.repeatAfter.type){case"hours":s=60*t.repeatAfter.amount*60;break;case"days":s=60*t.repeatAfter.amount*60*24;break;case"weeks":s=60*t.repeatAfter.amount*60*24*7;break;case"months":s=60*t.repeatAfter.amount*60*24*30;break;case"years":s=60*t.repeatAfter.amount*60*24*365;break}if(t.repeatAfter=s,"#"===t.hexColor.substring(0,1)&&(t.hexColor=t.hexColor.substring(1,7)),Object.keys(t.relatedTasks).forEach((function(a){t.relatedTasks[a]=t.relatedTasks[a].map((function(t){return e.processModel(t)}))})),t.attachments.length>0){var n=new l["a"];t.attachments.map((function(t){return n.processModel(t)}))}if(t.labels.length>0){var i=new u["a"];t.labels=t.labels.map((function(t){return i.processModel(t)}))}return t}}]),a}(o["a"])},cc5d:function(t,e,a){},cf2a:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return o}));a("d81d");var s=a("0122"),n=a("87ab"),i=a("a4d6");function r(t){if("object"!==Object(s["a"])(t))return t;var e={};for(var a in t)e[Object(n["a"])(a)]=t[a],null!==t[a]&&(Array.isArray(t[a])?e[Object(n["a"])(a)]=t[a].map((function(t){return r(t)})):"object"===Object(s["a"])(t[a])&&(e[Object(n["a"])(a)]=r(t[a])));return e}function o(t){if("object"!==Object(s["a"])(t))return t;var e={};for(var a in t)e[Object(i["a"])(a)]=t[a],null===t[a]||t[a]instanceof Date||(Array.isArray(t[a])?e[Object(i["a"])(a)]=t[a].map((function(t){return o(t)})):"object"===Object(s["a"])(t[a])&&(e[Object(i["a"])(a)]=o(t[a])));return e}},cf42:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var s=function(t,e){var a;for(a in t)if(e(t[a]))return a;return null}},dfcd:function(t,e,a){},e011:function(t,e,a){"use strict";var s=a("0ea7"),n=a.n(s);n.a},e02a:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var s=a("276c"),n=a("e954"),i=a("920b"),r=a("92a6"),o=a("0402"),c=a("4b81"),l=function(t){Object(i["a"])(a,t);var e=Object(r["a"])(a);function a(){return Object(s["a"])(this,a),e.call(this,{create:"/tasks/{taskId}/labels",getAll:"/tasks/{taskId}/labels",delete:"/tasks/{taskId}/labels/{labelId}"})}return Object(n["a"])(a,[{key:"modelFactory",value:function(t){return new c["a"](t)}}]),a}(o["a"])},e256:function(t,e,a){},e3aa:function(t,e,a){},f16e:function(t,e,a){"use strict";e["a"]={setLoading:function(t){var e=setTimeout((function(){t.loading=!0}),100);return function(){clearTimeout(e),t.loading=!1}},error:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=t.message;t.response&&t.response.data&&t.response.data.message&&(s+="<br/>"+t.response.data.message),e.$notify({type:"error",title:"Error",text:s,actions:a}),e.loading=!1},success:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=t.message;t.response&&t.response.data&&t.response.data.message&&(s+="<br/>"+t.response.data.message),e.$notify({type:"success",title:"Success",text:s,data:{actions:a}}),e.loading=!1}}},f1a4:function(t,e,a){"use strict";a.d(e,"a",(function(){return m}));a("4160"),a("d81d"),a("a9e3"),a("b64b"),a("2ca0"),a("159b"),a("96cf");var s=a("c964"),n=a("276c"),i=a("e954"),r=a("2c4c"),o=a("920b"),c=a("92a6"),l=a("fc11"),u=a("b1c6"),d=a("8654"),h=a("83a4"),f=a("50cf"),m=function(t){Object(o["a"])(a,t);var e=Object(c["a"])(a);function a(t){var s;return Object(n["a"])(this,a),s=e.call(this,t),Object(l["a"])(Object(r["a"])(s),"defaultColor","198CFF"),s.id=Number(s.id),s.listId=Number(s.listId),s.dueDate=s.dueDate&&!s.dueDate.startsWith("0001")?new Date(s.dueDate):null,s.startDate=s.startDate&&!s.startDate.startsWith("0001")?new Date(s.startDate):null,s.endDate=s.endDate&&!s.endDate.startsWith("0001")?new Date(s.endDate):null,s.cancelScheduledNotifications().then((function(){s.reminderDates=s.reminderDates.map((function(t){return t=new Date(t),s.scheduleNotification(t),t})),s.reminderDates.push(null)})),s.parseRepeatAfter(),s.assignees=s.assignees.map((function(t){return new d["a"](t)})),s.createdBy=new d["a"](s.createdBy),s.labels=s.labels.map((function(t){return new h["a"](t)})),""===s.hexColor&&(s.hexColor=s.defaultColor),"#"!==s.hexColor.substring(0,1)&&(s.hexColor="#"+s.hexColor),Object.keys(s.relatedTasks).forEach((function(t){s.relatedTasks[t]=s.relatedTasks[t].map((function(t){return new a(t)}))})),s.attachments=s.attachments.map((function(t){return new f["a"](t)})),s.identifier==="-".concat(s.index)&&(s.identifier=""),s.created=new Date(s.created),s.updated=new Date(s.updated),s}return Object(i["a"])(a,[{key:"defaults",value:function(){return{id:0,text:"",description:"",done:!1,priority:0,labels:[],assignees:[],dueDate:0,startDate:0,endDate:0,repeatAfter:0,repeatFromCurrentDate:!1,reminderDates:[],parentTaskId:0,hexColor:"",percentDone:0,relatedTasks:{},attachments:[],identifier:"",index:0,createdBy:d["a"],created:null,updated:null,listId:0}}},{key:"parseRepeatAfter",value:function(){var t=this.repeatAfter/60/60;if(this.repeatAfter={type:"hours",amount:t},t%24===0){var e=t/24;e%7===0?(this.repeatAfter.type="weeks",this.repeatAfter.amount=e/7):e%30===0?(this.repeatAfter.type="months",this.repeatAfter.amount=e/30):e%365===0?(this.repeatAfter.type="years",this.repeatAfter.amount=e/365):(this.repeatAfter.type="days",this.repeatAfter.amount=e)}}},{key:"cancelScheduledNotifications",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("showTrigger"in Notification.prototype){t.next=3;break}return console.debug("This browser does not support triggered notifications"),t.abrupt("return");case 3:return t.next=5,navigator.serviceWorker.getRegistration();case 5:if(e=t.sent,"undefined"!==typeof e){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,e.getNotifications({tag:"vikunja-task-".concat(this.id),includeTriggered:!0});case 10:a=t.sent,console.debug("Already scheduled notifications:",a),a.forEach((function(t){return t.close()}));case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"scheduleNotification",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e<new Date)){t.next=3;break}return console.debug("Date is in the past, not scheduling a notification. Date is ",e),t.abrupt("return");case 3:if("showTrigger"in Notification.prototype){t.next=6;break}return console.debug("This browser does not support triggered notifications"),t.abrupt("return");case 6:return t.next=8,navigator.permissions.request({name:"notifications"});case 8:if(a=t.sent,s=a.state,"granted"===s){t.next=13;break}return console.debug("Notification permission not granted, not showing notifications"),t.abrupt("return");case 13:return t.next=15,navigator.serviceWorker.getRegistration();case 15:if(n=t.sent,"undefined"!==typeof n){t.next=19;break}return console.error("No service worker registration available"),t.abrupt("return");case 19:n.showNotification("Vikunja Reminder",{tag:"vikunja-task-".concat(this.id),body:this.title,showTrigger:new TimestampTrigger(e),badge:"/images/icons/badge-monochrome.png",icon:"/images/icons/android-chrome-512x512.png",data:{taskId:this.id},actions:[{action:"mark-as-done",title:"Done"},{action:"show-task",title:"Show task"}]}).then((function(){console.debug("Notification scheduled for "+e)})).catch((function(t){console.debug("Error scheduling notification",t)}));case 20:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),a}(u["a"])},f339:function(t,e,a){"use strict";var s=a("e256"),n=a.n(s);n.a},f792:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fancycheckbox",class:{"is-disabled":t.disabled}},[a("input",{staticStyle:{display:"none"},attrs:{type:"checkbox",id:t.checkBoxId,disabled:t.disabled},domProps:{checked:t.checked},on:{change:t.updateData}}),a("label",{staticClass:"check",attrs:{for:t.checkBoxId}},[a("svg",{attrs:{width:"18px",height:"18px",viewBox:"0 0 18 18"}},[a("path",{attrs:{d:"M1,9 L1,3.5 C1,2 2,1 3.5,1 L14.5,1 C16,1 17,2 17,3.5 L17,14.5 C17,16 16,17 14.5,17 L3.5,17 C2,17 1,16 1,14.5 L1,9 Z"}}),a("polyline",{attrs:{points:"1 9 7 14 15 4"}})]),a("span",[t._t("default")],2)])])},n=[],i={name:"fancycheckbox",data:function(){return{checked:!1,checkBoxId:""}},props:{value:{required:!1},disabled:{type:Boolean,required:!1,default:!1}},watch:{value:function(t){this.checked=t}},mounted:function(){this.checked=this.value},created:function(){this.checkBoxId="fancycheckbox"+Math.random()},methods:{updateData:function(t){this.checked=t.target.checked,this.$emit("input",this.checked),this.$emit("change",t.target.checked)}}},r=i,o=a("2877"),c=Object(o["a"])(r,s,n,!1,null,null,null);e["a"]=c.exports},fbe6:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var s=a("276c"),n=a("e954"),i=a("920b"),r=a("92a6"),o=a("b1c6"),c=function(t){Object(i["a"])(a,t);var e=Object(r["a"])(a);function a(t){var n;return Object(s["a"])(this,a),n=e.call(this,t),n.created=new Date(n.created),n}return Object(n["a"])(a,[{key:"defaults",value:function(){return{created:null,userId:0,taskId:0}}}]),a}(o["a"])},fc6f:function(t){t.exports=JSON.parse('{"UNKNOWN":0,"USER":1,"LINK_SHARE":2}')},feb3:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var s=function(t){if("#"===t||""===t)return!0;var e=parseInt(t.substring(1,7),16),a=e>>16&255,s=e>>8&255,n=e>>0&255,i=.2126*a+.7152*s+.0722*n;return i>128}},ffd0:function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));a("d81d"),a("b0c0"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d");var s=a("276c"),n=a("e954"),i=a("920b"),r=a("92a6"),o=a("0402"),c=a("50cf"),l=a("737d"),u=function(t){Object(i["a"])(a,t);var e=Object(r["a"])(a);function a(){return Object(s["a"])(this,a),e.call(this,{create:"/tasks/{taskId}/attachments",getAll:"/tasks/{taskId}/attachments",delete:"/tasks/{taskId}/attachments/{id}"})}return Object(n["a"])(a,[{key:"processModel",value:function(t){return t.created=Object(l["a"])(t.created),t}},{key:"useCreateInterceptor",value:function(){return!1}},{key:"modelFactory",value:function(t){return new c["a"](t)}},{key:"modelCreateFactory",value:function(t){var e=this;return t.success=(null===t.success?[]:t.success).map((function(t){return e.modelFactory(t)})),t}},{key:"getBlobUrl",value:function(t){return this.http({url:"/tasks/"+t.taskId+"/attachments/"+t.id,method:"GET",responseType:"blob"}).then((function(t){return window.URL.createObjectURL(new Blob([t.data]))}))}},{key:"download",value:function(t){this.getBlobUrl(t).then((function(e){var a=document.createElement("a");a.href=e,a.setAttribute("download",t.file.name),a.click(),window.URL.revokeObjectURL(e)}))}},{key:"create",value:function(t,e){for(var a=new FormData,s=0;s<e.length;s++)a.append("files",new Blob([e[s]]),e[s].name);return this.uploadFormData(this.getReplacedRoute(this.paths.create,t),a)}}]),a}(o["a"])}});